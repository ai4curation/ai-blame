{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#ai-blame","title":"ai-blame","text":"<p>Extract provenance from AI agent execution traces.</p> <p>Like <code>git blame</code>, but for AI-assisted edits. See which AI model wrote each line of code.</p>"},{"location":"#quick-command-reference","title":"Quick Command Reference","text":"Command What It Does When to Use <code>init</code> Create starter config First-time setup <code>stats</code> Show trace statistics Discover available traces <code>timeline</code> Chronological edit timeline Understand project history <code>transcript</code> Explore AI sessions Review agent conversations <code>blame</code> Line-by-line attribution See who edited what <code>report</code> Preview provenance Dry-run before annotating <code>annotate</code> Embed provenance Apply changes to files <p>\u2192 Full Command Index | \u2192 Quickstart</p>"},{"location":"#demo","title":"Demo","text":"<p>Watch a complete walkthrough of all commands in action:</p> <p></p> <p>The demo shows setup, discovery (stats, timeline, transcripts), line-level blame analysis (the centerpiece), and annotation workflows using real traces from ai-blame development (80 traces, 378 edits).</p>"},{"location":"#what-is-ai-blame","title":"What is ai-blame?","text":"<p>As AI agents increasingly assist with knowledge base curation, documentation, and code generation, we need to track provenance \u2014 which agent/model made what changes, when, and why.</p> <p><code>ai-blame</code> parses execution traces from AI coding assistants (Claude Code, GitHub Copilot, and others) and extracts a structured audit trail of file modifications. This history can be:</p> <ul> <li>Appended directly to YAML/JSON files as a <code>edit_history</code> section</li> <li>Written to sidecar files (e.g., <code>foo.history.yaml</code>)</li> <li>Embedded as comments in code files</li> </ul>"},{"location":"#typical-workflows","title":"Typical Workflows","text":""},{"location":"#exploration-workflow","title":"\ud83d\udcca Exploration Workflow","text":"<p>Commands: <code>stats</code> \u2192 <code>timeline</code> \u2192 <code>transcript list</code> \u2192 <code>transcript view</code></p> <p>Start by discovering what traces and edits are available:</p>"},{"location":"#1-overview-of-traces-and-edits","title":"1. Overview of Traces and Edits","text":"<pre><code>$ ai-blame stats\n</code></pre> <pre><code>Trace directory: /Users/alice/.claude/projects/-Users-alice-myproject/\nTrace files: 5\n  Session traces: 3\n  Agent traces: 2\n\nFiles with edits (all files): 23\nTotal successful edits: 47\n</code></pre>"},{"location":"#2-see-timeline-of-all-actions","title":"2. See Timeline of All Actions","text":"<pre><code>$ ai-blame timeline\n</code></pre> <pre><code>=== Timeline of Actions ===\n2025-12-01 08:03:42 UTC  [CREATED]  disease_definitions.yaml (claude-opus-4-5)\n2025-12-01 08:05:18 UTC  [EDITED]   disease_definitions.yaml (claude-opus-4-5)\n2025-12-02 14:12:15 UTC  [CREATED]  phenotypes.yaml (gpt-4)\n...\n</code></pre>"},{"location":"#3-list-and-review-sessions","title":"3. List and Review Sessions","text":"<pre><code>$ ai-blame transcript list --columns SATMO\n</code></pre> <p>Shows all Claude Code and Codex sessions with models used in each:</p> <pre><code>Session ID                               Agent           Start Time             Msgs     Models\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n483c7d95-6b9c-46db-afd4-3ecb6257781a    claude-code     2025-12-01 03:56         53      claude-opus-4-5\n483c7d95-6b9c-46db-afd4-3ecb6257781a    claude-code     2025-12-01 03:55          2      claude-haiku\n</code></pre> <p>See Understanding Session ID Duplication to learn why the same Session ID appears multiple times (subagent sessions).</p>"},{"location":"#4-explore-a-specific-session","title":"4. Explore a Specific Session","text":"<pre><code>$ ai-blame transcript view 483c7d95 --full --show-thinking\n</code></pre> <p>Shows the complete session transcript with all messages, reasoning, and tool use.</p>"},{"location":"#annotation-workflow","title":"\ud83d\udcbe Annotation Workflow","text":"<p>Commands: <code>report</code> \u2192 <code>annotate</code> (with <code>--dry-run</code> preview pattern)</p> <p>Extract and embed provenance into your project files:</p>"},{"location":"#1-show-line-by-line-attribution","title":"1. Show Line-by-Line Attribution","text":"<pre><code>$ ai-blame blame src/main.rs\n</code></pre> <pre><code>     1  claude-opus-4-5    fn process_data(input: &amp;str) -&gt; Result&lt;Vec&lt;Item&gt;&gt; {\n     2  claude-opus-4-5    let items = parse_input(input)?;\n     3  claude-opus-4-5\n     4  claude-opus-4-5    items.iter()\n     5  claude-opus-4-5        .filter(|item| item.is_valid())\n     6  claude-3-5-sonnet   .map(|item| transform(item))\n     7  claude-3-5-sonnet   .collect()\n     8  claude-opus-4-5    }\n</code></pre> <p>Use <code>--blocks</code> to group consecutive lines from the same model:</p> <pre><code>$ ai-blame blame src/main.rs --blocks\n</code></pre>"},{"location":"#2-preview-provenance-report","title":"2. Preview Provenance Report","text":"<pre><code>$ ai-blame report --initial-and-recent\n</code></pre> <p>Shows what <code>edit_history</code> would be added to each file:</p> <pre><code>Processing: disease_definitions.yaml\n\nEdits for disease_definitions.yaml:\n  [CREATED] 2025-12-01 08:03:42 UTC\n    Model: claude-opus-4-5-20251101\n    Agent: claude-code (v2.0.75)\n\n  [EDITED] 2025-12-15 20:34:29 UTC\n    Model: claude-opus-4-5-20251101\n    Agent: claude-code (v2.1.0)\n</code></pre>"},{"location":"#3-embed-provenance-in-your-files","title":"3. Embed Provenance in Your Files","text":"<pre><code>$ ai-blame annotate --initial-and-recent --dry-run\n</code></pre> <p>Preview the changes, then apply with:</p> <pre><code>$ ai-blame annotate --initial-and-recent  # Writes to files\n</code></pre>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Line-level blame \u2014 <code>ai-blame blame</code> shows git-blame-style attribution for each line in a file</li> <li>Desktop UI \u2014 Visual blame viewer, timeline, and transcript explorer</li> <li>Automatic trace discovery \u2014 Finds execution traces from multiple AI agents</li> <li>Configurable output policies \u2014 Append, sidecar, or comment-based history</li> <li>Flexible filtering \u2014 By file pattern, change size, or time range</li> <li>Dry-run by default \u2014 Preview changes before applying</li> <li>Multiple file type support \u2014 YAML, JSON, Python, and more</li> </ul>"},{"location":"#desktop-app","title":"Desktop App","text":"<p>For visual exploration, the desktop app provides an interactive interface for browsing AI-assisted edits.</p> <p></p> <p>Features:</p> <ul> <li>Blame Viewer \u2014 Browse files with line-by-line AI attribution</li> <li>Timeline \u2014 Chronological view of all AI edits with navigation</li> <li>Transcripts \u2014 Search and explore AI conversation sessions</li> <li>Settings \u2014 Configure project paths and caching options</li> </ul> <pre><code># Run the desktop app\ncd src-tauri &amp;&amp; cargo run --release\n</code></pre> <p>\u2192 Desktop App Documentation</p>"},{"location":"#supported-trace-sources","title":"Supported Trace Sources","text":"Agent Status Claude Code \u2705 Supported OpenAI Codex / GitHub Copilot \u2705 Supported Others (Cursor, Aider, etc.) PRs welcome!"},{"location":"#installation","title":"Installation","text":"<pre><code>git clone https://github.com/ai4curation/ai-blame\ncd ai-blame\n\n# Build with cargo\ncargo build --release\n\n# Optionally install it\ncargo install --path .\n</code></pre>"},{"location":"#documentation-learning-paths","title":"Documentation &amp; Learning Paths","text":""},{"location":"#new-to-ai-blame","title":"\ud83d\ude80 New to ai-blame?","text":"<p>Start here:</p> Quickstart 5-minute guide with the most common commands. Perfect for busy people! Getting Started Comprehensive hands-on tutorial: install, scan traces, annotate files. Command Index Visual overview of all 7 commands with task-to-command mapping."},{"location":"#learning-by-task","title":"\ud83d\udcda Learning by Task","text":"<p>Find what you need:</p> Task Documentation Understand sessions &amp; subagents Transcripts &amp; Subagents Explore traces Trace Exploration (stats, timeline, transcript) Annotate files with provenance Provenance Annotation (report, annotate) Set up configuration Setup &amp; Configuration (init command) Analyze line changes Line-Level Analysis (blame command) Optimize performance Performance (caching, filters) Configure output formats Configuration Guide Handle different file types File Types Customize display columns Column Layouts"},{"location":"#understanding-the-system","title":"\ud83d\udd0d Understanding the System","text":"<p>Deep technical details:</p> How It Works Architecture overview: trace parsing, edit extraction, and blame computation. Trace Format How execution traces are structured and parsed. Claude Traces Technical details on Claude Code trace format. Codex Traces Technical details on GitHub Copilot/Codex trace format. Philosophy Why provenance tracking matters for AI-assisted curation. CLI Syntax Reference Complete command syntax and options reference."},{"location":"#faqs-community","title":"\ud83d\udcac FAQs &amp; Community","text":"FAQs Answers to common questions about installation, usage, and troubleshooting. Contributing Want to help? See how to contribute code, documentation, and test cases."},{"location":"about/","title":"About ai-blame","text":""},{"location":"about/#project","title":"Project","text":"<p><code>ai-blame</code> is a tool for extracting and tracking provenance from AI agent execution traces. It emerged from work on AI-assisted curation of knowledge bases, ontologies, and structured data, but applies broadly to any code or content generated with AI assistance.</p>"},{"location":"about/#origin","title":"Origin","text":"<p>This project is part of the broader AI4Curation ecosystem\u2014a collection of patterns, tools, and workflows for maintaining knowledge bases and code in an age of AI pair programming.</p>"},{"location":"about/#key-use-cases","title":"Key Use Cases","text":"<ul> <li>Knowledge base curation \u2014 Track which AI models generated or edited ontology files</li> <li>Code auditing \u2014 Understand which parts of your codebase are AI-generated</li> <li>Compliance \u2014 Create audit trails for industries with strict provenance requirements</li> <li>Model evaluation \u2014 Compare output quality across different model versions</li> </ul>"},{"location":"about/#read-the-article","title":"Read the Article","text":"<p>For a comprehensive introduction to the problem and solution, see:</p> <p>\"Whose Code Is This, Anyway? Tracking AI Agent Provenance\" \u2014 A Medium article exploring: - Why git blame isn't enough in AI-assisted workflows - Real-world examples from knowledge base curation - How embedded provenance solves attribution and accountability gaps - The regulatory and compliance implications</p>"},{"location":"about/#license","title":"License","text":"<p>BSD-3-Clause</p>"},{"location":"about/#contributing","title":"Contributing","text":"<p>Contributions welcome! See the main repository for ways to contribute.</p>"},{"location":"faqs/","title":"Frequently Asked Questions","text":""},{"location":"faqs/#ghost-commits-and-codex-attribution","title":"Ghost Commits and Codex Attribution","text":""},{"location":"faqs/#what-is-a-ghost-commit","title":"What is a \"ghost commit\"?","text":"<p>A ghost commit is a special git commit object created by Codex CLI to capture file snapshots during execution. These commits:</p> <ul> <li>Are stored in your <code>.git/objects/</code> directory (the git object database)</li> <li>Have the author <code>Codex Snapshot &lt;snapshot@codex.local&gt;</code></li> <li>Are not attached to any branch or tag (they're not in your commit history)</li> <li>Can be inspected with <code>git show &lt;commit-hash&gt;</code> or <code>git cat-file</code></li> </ul> <p>Example: When Codex CLI starts or finishes an operation, it creates a ghost commit capturing the current state of all tracked files.</p>"},{"location":"faqs/#how-do-i-make-ghost-commits-real","title":"How do I make ghost commits \"real\"?","text":"<p>Ghost commits are ephemeral reference objects used only for tracking file snapshots. To permanently record Codex changes in your git history:</p>"},{"location":"faqs/#option-1-commit-the-changes-to-a-real-branch","title":"Option 1: Commit the changes to a real branch","text":"<pre><code># After Codex CLI finishes, commit the changes normally\ngit add .\ngit commit -m \"Changes from Codex CLI session\"\ngit push origin main\n</code></pre> <p>This is the standard approach - just treat Codex output like you would any other generated code.</p>"},{"location":"faqs/#option-2-create-a-branch-from-a-ghost-commit","title":"Option 2: Create a branch from a ghost commit","text":"<p>If you want to preserve a specific ghost commit snapshot as a real branch:</p> <pre><code># Find the ghost commit hash from logs or git object database\nGHOST_COMMIT=\"b843e9becf13584978668f53f7a787c093494d06\"\n\n# Create a real branch pointing to it\ngit branch codex-snapshot $GHOST_COMMIT\n\n# Or create a tag\ngit tag codex-session-001 $GHOST_COMMIT\n</code></pre>"},{"location":"faqs/#option-3-just-use-ai-blame-automatic","title":"Option 3: Just use ai-blame (automatic)","text":"<p>If you've committed changes to git after running Codex CLI, <code>ai-blame</code> will detect: - Claude Code edits (stored in traces) - Codex CLI changes (detected via ghost commits + git diffs)</p> <p>No special steps needed - just commit normally.</p>"},{"location":"faqs/#why-arent-my-codex-cli-edits-showing-up-in-blame","title":"Why aren't my Codex CLI edits showing up in blame?","text":"<p>There are several reasons:</p>"},{"location":"faqs/#1-changes-made-with-bash-commands-not-captured-in-traces","title":"1. Changes made with bash commands (not captured in traces)","text":"<p>If you use Codex CLI to run bash commands that modify files (like <code>&gt;&gt; foo.md</code>), these changes are not recorded in the trace format:</p> <pre><code># This gets logged in ~/.codex/log/*, but NOT in the traces\ncodex exec \"printf 'some text' &gt;&gt; foo.md\"\n</code></pre> <p>Root cause: Bash commands run through Codex don't produce structured edit records - only shell command logs.</p> <p>Solutions: - Use Codex's structured file editing features (not raw bash <code>&gt;&gt;</code>) - Commit the changes after running bash, then use git to understand what changed - Use <code>ai-blame report</code> with git integration to see uncommitted changes</p>"},{"location":"faqs/#2-changes-in-working-directory-not-yet-in-a-ghost-commit","title":"2. Changes in working directory (not yet in a ghost commit)","text":"<p>If you edit files in your working directory after Codex's last snapshot:</p> <pre><code># Codex creates ghost commit with version A of foo.md\n# Then you edit foo.md manually\n# Your edits are in working directory, NOT in the ghost commit\n</code></pre> <p>Solution: Commit the changes to git, then rerun <code>ai-blame</code>.</p>"},{"location":"faqs/#3-no-ghost-commit-was-created","title":"3. No ghost commit was created","text":"<p>Ghost commits are created at specific points (usually session start/end). If a session doesn't create a ghost commit, file changes won't be detected.</p> <p>Solution: Run a complete Codex CLI session that includes snapshots, or manually commit changes to git.</p>"},{"location":"faqs/#how-do-i-know-if-a-file-was-edited-by-codex-or-claude","title":"How do I know if a file was edited by Codex or Claude?","text":"<p>Use <code>ai-blame blame &lt;file&gt;</code>:</p> <pre><code>ai-blame blame foo.md\n</code></pre> <p>This shows: - claude-haiku-4-5-...: Edit made by Claude Code - gpt-5.2-codex: Edit made by Codex CLI - No attribution: Untracked changes or uncommitted edits</p> <p>The timestamp and line numbers show exactly what changed when.</p>"},{"location":"faqs/#why-do-some-lines-show-claude-attribution-when-codex-edited-them","title":"Why do some lines show Claude attribution when Codex edited them?","text":"<p>This happens when:</p> <ol> <li>Claude initially created the file (stored in Claude Code traces)</li> <li>Codex later added lines (but via bash <code>&gt;&gt;</code> or uncommitted changes)</li> <li>ai-blame can only see the Claude creation (because Codex changes aren't in parseable traces)</li> </ol> <p>Example from your test: - Lines 1-21: Created by Claude (2025-12-28 15:21) - Lines 22-23: Added by Codex bash script (visible in logs but not in traces) - Result: All lines show Claude attribution</p> <p>Why this is expected: The blame algorithm works backwards through trace records. Without a structured edit record, it can't attribute those lines to Codex.</p> <p>Workaround: Commit the Codex changes to git before running <code>ai-blame</code>:</p> <pre><code># After Codex finishes and modifies files:\ngit add foo.md\ngit commit -m \"Codex updates\"\nai-blame blame foo.md  # Now it will detect the edit\n</code></pre>"},{"location":"faqs/#performance","title":"Performance","text":""},{"location":"faqs/#why-is-ai-blame-stats-slow","title":"Why is <code>ai-blame stats</code> slow?","text":"<p>The tool needs to parse hundreds of trace files to extract edit records. Initial runs typically take 30-60 seconds depending on trace history size.</p>"},{"location":"faqs/#how-can-i-speed-up-repeated-runs","title":"How can I speed up repeated runs?","text":"<p>Caching is enabled by default! No special configuration needed:</p> <pre><code># First run: ~55 seconds (builds cache)\nai-blame stats\n\n# Second run: ~3-5 seconds (uses cache)\nai-blame stats\n</code></pre> <p>You can disable it with <code>--no-cache</code> or <code>export AI_BLAME_NO_CACHE=1</code>.</p> <p>See Performance and Caching for full details.</p>"},{"location":"faqs/#how-much-faster-is-caching","title":"How much faster is caching?","text":"<p>Expected speedup: ~90% for unchanged traces</p> Scenario Time First run (no cache) 53 seconds First run (with cache) ~55 seconds Second run (cache hit) ~3-5 seconds 10% files changed ~10-15 seconds <p>Speedup scales with trace count - larger trace histories see bigger wins.</p>"},{"location":"faqs/#where-is-the-cache-stored","title":"Where is the cache stored?","text":"<p>The cache is stored in <code>.ai-blame.ddb</code> next to your trace files:</p> <pre><code>~/.claude/projects/myproject/\n\u251c\u2500\u2500 session-1.jsonl\n\u251c\u2500\u2500 session-2.jsonl\n\u2514\u2500\u2500 .ai-blame.ddb  \u2190 Cache file\n</code></pre>"},{"location":"faqs/#how-do-i-clear-the-cache","title":"How do I clear the cache?","text":"<pre><code># Delete the cache file\nrm .ai-blame.ddb\n\n# Or force rebuild via CLI\nai-blame stats --rebuild-cache\n</code></pre>"},{"location":"faqs/#general-questions","title":"General Questions","text":""},{"location":"faqs/#which-ai-tools-does-ai-blame-support","title":"Which AI tools does ai-blame support?","text":"<ul> <li>Claude Code: Full support (stores structured edit records in traces)</li> <li>GitHub Copilot: Full support (similar trace structure)</li> <li>Codex CLI: Full support (via ghost commits + snapshot snapshots)</li> <li>Other tools: Limited support (depends on trace format)</li> </ul> <p>See Trace Format for details.</p>"},{"location":"faqs/#can-i-use-ai-blame-without-traces","title":"Can I use ai-blame without traces?","text":"<p>No - <code>ai-blame</code> requires trace data to know who made which changes. Without traces, it can only show: - Git history (via <code>git blame</code>) - File creation/modification times (generic, not AI-specific)</p> <p>For uncommitted changes without trace data, use: <pre><code>git diff  # See what changed\ngit log   # See git history with attribution\n</code></pre></p>"},{"location":"faqs/#how-do-i-trust-the-attribution","title":"How do I trust the attribution?","text":"<p>The attribution is as trustworthy as your traces:</p> <ol> <li>Traces are generated by the AI tool (Claude, Copilot, Codex)</li> <li>Timestamps come from the tool's system clock</li> <li>No modifications are made to traces during extraction</li> </ol> <p>However: - Traces don't verify that the AI actually made the changes (user could edit after) - Uncommitted working directory changes are invisible to <code>ai-blame</code> - Ghost commits can be cleaned up by aggressive <code>git gc</code></p> <p>Best practice: Use <code>ai-blame</code> in conjunction with <code>git log</code> for full provenance understanding.</p>"},{"location":"faqs/#can-i-exclude-certain-files-from-blame","title":"Can I exclude certain files from blame?","text":"<p>Yes - use the configuration file:</p> <pre><code># .ai-blame.yaml\nfilters:\n  file_pattern: \"*.py\"  # Only show Python files\n  min_change_size: 100  # Ignore changes smaller than 100 bytes\n</code></pre> <p>See Configuration for details.</p>"},{"location":"faqs/#what-if-ai-blame-reports-no-edits-found","title":"What if ai-blame reports no edits found?","text":"<p>Possible causes:</p> <ol> <li>No traces in the expected directory</li> <li>Check <code>~/.claude/projects/</code> and <code>~/.codex/sessions/</code></li> <li> <p>Ensure the project was actually edited with Claude Code or Codex CLI</p> </li> <li> <p>File pattern doesn't match</p> </li> <li>Use <code>ai-blame report</code> without filters to see all files</li> <li> <p>Check file paths are absolute or relative correctly</p> </li> <li> <p>Traces are for a different project</p> </li> <li>Claude Code and Codex CLI create separate traces per project</li> <li> <p>Use <code>--trace-dir</code> to specify the correct trace directory</p> </li> <li> <p>Time filters excluded all edits</p> </li> <li>Check <code>--since</code> and <code>--until</code> date ranges</li> </ol> <p>Debugging: <pre><code>ai-blame stats --trace-dir ~/.claude/projects\nai-blame report . --show-all  # See all files and edits\n</code></pre></p>"},{"location":"faqs/#see-also","title":"See Also","text":"<ul> <li>Codex CLI Traces - Technical details about ghost commits</li> <li>Claude Code Traces - How Claude traces work</li> <li>How It Works - The blame algorithm explained</li> <li>CLI Reference - Command-line options</li> </ul>"},{"location":"tauri-review/","title":"Tauri + Core Lib/CLI Best Practices and Repo Review","text":""},{"location":"tauri-review/#best-practices-summary","title":"Best Practices (Summary)","text":"<ul> <li>Prefer a single repo with a Cargo workspace when the CLI and Tauri UI share a core Rust library and are released together.</li> <li>Keep a small, reusable core crate; have separate CLI and Tauri crates depend on it.</li> <li>Tauri\u2019s default layout keeps the Rust app in <code>src-tauri</code>; if you want a workspace, add a root <code>Cargo.toml</code> with <code>members = [\"src-tauri\"]</code> and keep the Tauri bin target in that crate.</li> <li>Avoid relocating the Tauri entrypoint out of <code>src-tauri</code> without configuring the CLI; community reports indicate the Tauri CLI expects a bin target in the Tauri crate.</li> <li>Use dedicated frontend build output for <code>distDir</code>, and wire <code>beforeDevCommand</code>/<code>beforeBuildCommand</code> when the UI is no longer static.</li> </ul> <p>Sources: - https://v2.tauri.app/develop/debug/rustrover/ - https://github.com/orgs/tauri-apps/discussions/12630 - https://doc.rust-lang.org/cargo/reference/workspaces.html - https://v1.tauri.app/v1/api/config - https://v1.tauri.app/v1/api/cli - https://github.com/tauri-apps/create-tauri-app</p>"},{"location":"tauri-review/#findings-in-this-repo","title":"Findings in This Repo","text":""},{"location":"tauri-review/#high","title":"High","text":"<p>1) <code>src-tauri/tauri.conf.json:14</code> uses an SVG (<code>../docs/assets/favicon.svg</code>) for <code>bundle.icon</code>.    - Tauri bundling typically expects PNG/ICO/ICNS. SVG can fail on some platforms.    - You already have <code>src-tauri/icons/</code> which is the conventional place for generated icons.</p>"},{"location":"tauri-review/#medium","title":"Medium","text":"<p>2) <code>src/lib.rs:2</code> exposes the <code>cli</code> module, and <code>src-tauri/Cargo.toml:9</code> depends on <code>ai-blame</code>.    - This pulls <code>clap</code> into the GUI build even if the UI only needs the core logic.    - If you want a leaner GUI, split into a core crate and keep CLI-only deps in a separate crate or behind a feature flag.</p> <p>3) <code>src-tauri/tauri.conf.json:3-8</code> uses <code>devPath</code> and <code>distDir</code> as <code>../ui</code> and leaves build commands empty.    - Works for the static prototype but will become a packaging risk when the UI gains a real build step.    - Best practice is <code>distDir</code> = compiled build output and to set <code>beforeDevCommand</code>/<code>beforeBuildCommand</code>.</p>"},{"location":"tauri-review/#low","title":"Low","text":"<p>4) <code>src-tauri/Cargo.toml:1-6</code> duplicates version/edition/authors rather than inheriting from the workspace.    - Not incorrect, but it weakens centralized version management if you intend single-version releases.</p>"},{"location":"tauri-review/#idiomatic-structures-examples","title":"Idiomatic Structures (Examples)","text":""},{"location":"tauri-review/#example-a-default-tauri-layout-frontend-in-root-rust-in-src-tauri","title":"Example A: Default Tauri Layout (Frontend in Root, Rust in <code>src-tauri</code>)","text":"<p><pre><code>.\n\u251c\u2500\u2500 ui/                  # frontend (or src/, etc.)\n\u251c\u2500\u2500 src-tauri/           # Tauri Rust app\n\u2502   \u251c\u2500\u2500 Cargo.toml\n\u2502   \u251c\u2500\u2500 src/main.rs\n\u2502   \u2514\u2500\u2500 tauri.conf.json\n\u2514\u2500\u2500 package.json         # if using Node tooling\n</code></pre> Notes: - This matches Tauri\u2019s default layout; the Rust project lives under <code>src-tauri</code>. - IDEs can attach the <code>src-tauri/Cargo.toml</code> directly or via a root workspace.</p>"},{"location":"tauri-review/#example-b-workspace-with-core-cli-tauri","title":"Example B: Workspace With Core + CLI + Tauri","text":"<p><pre><code>.\n\u251c\u2500\u2500 Cargo.toml           # [workspace] members = [\"crates/core\", \"crates/cli\", \"src-tauri\"]\n\u251c\u2500\u2500 crates/\n\u2502   \u251c\u2500\u2500 core/            # shared library\n\u2502   \u2514\u2500\u2500 cli/             # CLI binary\n\u251c\u2500\u2500 src-tauri/           # Tauri app (bin)\n\u2502   \u251c\u2500\u2500 Cargo.toml\n\u2502   \u251c\u2500\u2500 src/main.rs\n\u2502   \u2514\u2500\u2500 tauri.conf.json\n\u2514\u2500\u2500 ui/                  # frontend\n</code></pre> Notes: - Keeps the Tauri bin target in <code>src-tauri</code> (works with <code>tauri dev/build</code>). - Avoids pulling CLI-only dependencies into the GUI by depending only on <code>core</code>.</p>"},{"location":"tauri-review/#example-c-rust-frontend-no-src-tauri-subdir","title":"Example C: Rust Frontend (No <code>src-tauri</code> Subdir)","text":"<p><pre><code>.\n\u251c\u2500\u2500 Cargo.toml           # root is the Tauri app\n\u251c\u2500\u2500 src/                 # Rust frontend or Rust-only UI\n\u2514\u2500\u2500 tauri.conf.json\n</code></pre> Notes: - Tauri docs note that <code>src-tauri</code> is created by default; a root Cargo project is used when Rust is also the frontend.</p>"},{"location":"tauri-review/#proposed-outline-minimal-workspace-friendly","title":"Proposed Outline (Minimal, Workspace-Friendly)","text":""},{"location":"tauri-review/#option-a-keep-current-top-level-crate-add-dedicated-core-crate","title":"Option A: Keep Current Top-Level Crate + Add Dedicated Core Crate","text":"<ul> <li><code>crates/core</code> (library): all reusable logic.</li> <li><code>crates/cli</code> (bin): depends on <code>core</code> and owns CLI parsing.</li> <li><code>src-tauri</code> (bin): depends on <code>core</code> and exposes Tauri commands.</li> <li>Root <code>Cargo.toml</code> as workspace with <code>members = [\"crates/core\", \"crates/cli\", \"src-tauri\"]</code>.</li> </ul>"},{"location":"tauri-review/#option-b-convert-current-root-crate-into-core-add-clitauri-crates","title":"Option B: Convert Current Root Crate Into Core + Add CLI/Tauri Crates","text":"<ul> <li><code>crates/cli</code> (bin) depends on root core crate.</li> <li><code>src-tauri</code> (bin) depends on root core crate.</li> <li>Root stays as the core library; workspace members add <code>src-tauri</code> and <code>crates/cli</code>.</li> </ul>"},{"location":"tauri-review/#common-configuration-notes","title":"Common Configuration Notes","text":"<ul> <li>Keep the Tauri bin target in <code>src-tauri</code> so <code>tauri dev/build</code> works without extra CLI overrides.</li> <li>Prefer frontend build output in <code>distDir</code> and add <code>beforeDevCommand</code>/<code>beforeBuildCommand</code> for the UI.</li> <li>Generate platform icons into <code>src-tauri/icons/</code> and reference those in <code>tauri.conf.json</code>.</li> </ul>"},{"location":"tauri-review/#assumptions-questions","title":"Assumptions / Questions","text":"<ul> <li>The UI will evolve beyond a static prototype and will require a real build step.</li> <li>You want to avoid pulling CLI-only deps into the Tauri binary.</li> </ul>"},{"location":"tauri-review/#additional-references","title":"Additional References","text":"<ul> <li>https://tauri.app/ (docs home)</li> <li>https://v2.tauri.app/ (latest docs)</li> <li>https://v1.tauri.app/v1/guides/getting-started/setup/ (v1 quick start)</li> <li>https://v1.tauri.app/v1/guides/getting-started/setup/integrate (v1 integrate guide)</li> <li>https://github.com/tauri-apps/tauri (Tauri repo, shows monorepo/workspace patterns)</li> </ul>"},{"location":"explanation/claude-traces/","title":"Claude Code Traces","text":"<p>This document explains how Claude Code records file edits and how <code>ai-blame</code> extracts blame attribution from these traces.</p>"},{"location":"explanation/claude-traces/#overview","title":"Overview","text":"<p>Claude Code (formerly Claude Editor) is Anthropic's command-line tool for AI-assisted development. It tracks all file edits in structured trace files that include timestamps, model identifiers, and file change information.</p>"},{"location":"explanation/claude-traces/#trace-storage","title":"Trace Storage","text":"<p>Claude Code stores traces in the <code>.claude</code> directory in your home directory:</p> <pre><code>~/.claude/projects/&lt;encoded-path&gt;/\n</code></pre> <p>where <code>&lt;encoded-path&gt;</code> is the current working directory path with <code>/</code> replaced by <code>-</code>. For example:</p> <pre><code>~/.claude/projects/-Users-alice-myproject/\n\u251c\u2500\u2500 a1b2c3d4-5678-90ab-cdef-123456789abc.jsonl\n\u251c\u2500\u2500 b2c3d4e5-6789-01cd-ef23-456789abcdef.jsonl\n\u2514\u2500\u2500 agent-c3d4e5f6-7890-12de-f345-6789abcdef01.jsonl\n</code></pre> <p>Each <code>.jsonl</code> file represents a single Claude Code session with one JSON object per line.</p>"},{"location":"explanation/claude-traces/#session-types","title":"Session Types","text":"<ul> <li>Regular sessions: Standard Claude Code sessions, named with a UUID</li> <li>Agent sessions: Claude Code subagent invocations, prefixed with <code>agent-</code></li> </ul>"},{"location":"explanation/claude-traces/#trace-structure","title":"Trace Structure","text":""},{"location":"explanation/claude-traces/#message-flow","title":"Message Flow","text":"<p>Claude Code traces record the conversation between the user and Claude, including:</p> <ol> <li>User messages: Commands and questions from the user</li> <li>Assistant responses: Claude's reasoning and decisions</li> <li>Tool use messages: Claude using file editing tools</li> <li>Tool results: Outcome of file operations</li> </ol>"},{"location":"explanation/claude-traces/#key-objects-for-blame-attribution","title":"Key Objects for Blame Attribution","text":"<p><code>ai-blame</code> extracts edit information from two main record types:</p>"},{"location":"explanation/claude-traces/#1-parent-assistant-messages","title":"1. Parent Assistant Messages","text":"<p>These contain the model identifier used for the edit:</p> <pre><code>{\n  \"uuid\": \"assistant-uuid-123\",\n  \"type\": \"assistant\",\n  \"message\": {\n    \"model\": \"claude-opus-4-5-20251101\",\n    \"content\": [\n      {\n        \"type\": \"tool_use\",\n        \"id\": \"toolu_123abc\",\n        \"name\": \"EditFile\",\n        \"input\": { ... }\n      }\n    ]\n  }\n}\n</code></pre> <p>Key fields: - <code>message.model</code>: The Claude model used (e.g., <code>claude-opus-4-5-20251101</code>, <code>claude-haiku-4-5-20251001</code>) - <code>message.content[].id</code>: Tool use ID for matching with tool results</p>"},{"location":"explanation/claude-traces/#2-tool-result-messages-user-messages-with-file-operations","title":"2. Tool Result Messages (User Messages with File Operations)","text":"<p>These contain the actual file edit operations:</p> <pre><code>{\n  \"uuid\": \"user-uuid-456\",\n  \"type\": \"user\",\n  \"timestamp\": \"2025-12-01T08:00:00Z\",\n  \"sessionId\": \"session-123\",\n  \"parentUuid\": \"assistant-uuid-123\",\n  \"toolUseResult\": {\n    \"type\": \"create\",\n    \"filePath\": \"/Users/alice/myproject/main.py\",\n    \"content\": \"def hello():\\n    print('Hello')\\n\"\n  }\n}\n</code></pre> <p>or for edits:</p> <pre><code>{\n  \"uuid\": \"user-uuid-456\",\n  \"type\": \"user\",\n  \"timestamp\": \"2025-12-01T08:05:00Z\",\n  \"sessionId\": \"session-123\",\n  \"parentUuid\": \"assistant-uuid-123\",\n  \"toolUseResult\": {\n    \"type\": \"edit\",\n    \"filePath\": \"/Users/alice/myproject/main.py\",\n    \"oldString\": \"def hello():\\n    pass\\n\",\n    \"newString\": \"def hello():\\n    print('Hello')\\n\",\n    \"structuredPatch\": \"@@ -1,2 +1,2 @@\"\n  }\n}\n</code></pre> <p>Key fields: - <code>timestamp</code>: RFC3339-formatted timestamp of when the edit occurred - <code>sessionId</code>: Identifies which Claude Code session performed the edit - <code>parentUuid</code>: References the assistant message (for model lookup) - <code>toolUseResult.filePath</code>: Absolute path to the edited file - <code>toolUseResult.type</code>: Either \"create\" or \"edit\" - <code>toolUseResult.oldString</code>: Previous content (for edits) - <code>toolUseResult.newString</code>: New content (for creates or edits) - <code>toolUseResult.content</code>: Full file content (for creates) - <code>toolUseResult.structuredPatch</code>: Unified diff format patch</p>"},{"location":"explanation/claude-traces/#blame-extraction-algorithm","title":"Blame Extraction Algorithm","text":"<p><code>ai-blame</code> reconstructs file blame by:</p> <ol> <li>Parsing all tool result messages in chronological order</li> <li>Resolving the model by looking up the <code>parentUuid</code> in parent assistant messages</li> <li>Reverse-applying edits from newest to oldest to map current lines to their origins</li> <li>Matching new content to the original file using the patch hints from <code>structuredPatch</code></li> <li>Attributing lines to the edit that introduced them</li> </ol>"},{"location":"explanation/claude-traces/#example-three-edit-sequence","title":"Example: Three-Edit Sequence","text":"<p>Given a file <code>math.py</code> that went through three edits:</p> <p>Edit 1 (2025-12-01 08:00:00, claude-opus): <pre><code>def add(a, b):\n    return a + b\n</code></pre></p> <p>Edit 2 (2025-12-01 08:05:00, claude-haiku): <pre><code>def add(a, b):\n    \"\"\"Add two numbers.\"\"\"\n    return a + b\n</code></pre></p> <p>Edit 3 (2025-12-01 08:10:00, claude-opus): <pre><code>def add(a, b):\n    \"\"\"Add two numbers.\"\"\"\n    result = a + b\n    return result\n</code></pre></p> <p><code>ai-blame</code> would attribute: - Lines 1-2: claude-opus (from Edit 1) - Line 3: claude-haiku (from Edit 2 - docstring addition) - Lines 4-5: claude-opus (from Edit 3 - variable introduction)</p>"},{"location":"explanation/claude-traces/#known-limitations","title":"Known Limitations","text":"<ol> <li>Agent subagents: Edits within agent sessions are attributed to \"claude-code-agent\" rather than a specific model version</li> <li>Deleted content: Once lines are deleted, they cannot be blamed (there's no record of deletion)</li> <li>Complex refactors: Very large changes might have matching issues if context is ambiguous</li> <li>Timestamps: Only edits recorded in traces have timestamps; uncommitted work has no trace</li> </ol>"},{"location":"explanation/claude-traces/#see-also","title":"See Also","text":"<ul> <li>Codex CLI Traces - Codex CLI trace format and ghost commits</li> <li>Trace Format - Overview of all supported trace formats</li> <li>How It Works - General architecture and blame algorithm</li> </ul>"},{"location":"explanation/codex-traces/","title":"Codex CLI Traces and Ghost Commits","text":"<p>This document explains how Codex CLI records file edits using \"ghost commits\" and how <code>ai-blame</code> extracts blame attribution from these traces.</p>"},{"location":"explanation/codex-traces/#what-is-codex","title":"What is Codex?","text":"<p>Codex is OpenAI's AI coding assistant available through:</p> <ul> <li>Codex CLI (<code>codex</code> command-line tool): Direct CLI access to code generation</li> <li>GitHub Copilot: IDE integration in VS Code and other editors</li> <li>OpenAI API: Custom integrations</li> </ul> <p>This document focuses on Codex CLI traces and the unique \"ghost commit\" mechanism it uses to track file changes.</p>"},{"location":"explanation/codex-traces/#trace-storage","title":"Trace Storage","text":"<p>Codex CLI stores session traces in:</p> <pre><code>~/.codex/sessions/YYYY/MM/DD/rollout-&lt;timestamp&gt;-&lt;session-id&gt;.jsonl\n</code></pre> <p>For example:</p> <pre><code>~/.codex/sessions/\n\u251c\u2500\u2500 2025/\n\u2502   \u2514\u2500\u2500 12/\n\u2502       \u2514\u2500\u2500 29/\n\u2502           \u251c\u2500\u2500 rollout-2025-12-29T16-54-27-019b6b08-58f3-7580.jsonl\n\u2502           \u2514\u2500\u2500 rollout-2025-12-29T17-33-00-019b6b2b-85de-7a40.jsonl\n\u251c\u2500\u2500 history.jsonl\n\u2514\u2500\u2500 config.toml\n</code></pre> <p>Each file represents a single Codex CLI session with one JSON object per line.</p>"},{"location":"explanation/codex-traces/#ghost-commits-the-unique-codex-innovation","title":"Ghost Commits: The Unique Codex Innovation","text":"<p>Unlike Claude Code which stores file content directly in traces, Codex CLI stores file changes as git commits in your repository's git object database. These are called \"ghost commits\":</p> <pre><code>Ghost Commit Structure:\n  commit &lt;hash&gt;\n  tree &lt;tree-hash&gt;\n  author Codex Snapshot &lt;snapshot@codex.local&gt;\n\n  codex snapshot\n\n  &lt;file contents&gt;\n</code></pre>"},{"location":"explanation/codex-traces/#why-ghost-commits","title":"Why Ghost Commits?","text":"<p>Ghost commits serve several purposes:</p> <ol> <li>Efficient storage: Don't need to store full file contents in traces</li> <li>Git integration: Leverage git's existing object storage and diff capabilities</li> <li>History preservation: Can track the evolution of files through snapshots</li> <li>Content integrity: Use git's SHA hashing for content verification</li> </ol>"},{"location":"explanation/codex-traces/#how-it-works","title":"How It Works","text":"<p>When Codex CLI runs in your repository:</p> <ol> <li>At various points (often start and end of operations), Codex creates a \"snapshot\"</li> <li>Each snapshot captures the state of all tracked files</li> <li>A git commit object is created in your <code>.git/objects/</code> directory</li> <li>The commit hash is recorded in the trace as <code>ghost_commit.id</code></li> <li>Later, content can be retrieved with: <code>git show &lt;commit-hash&gt;:&lt;filepath&gt;</code></li> </ol>"},{"location":"explanation/codex-traces/#trace-structure","title":"Trace Structure","text":""},{"location":"explanation/codex-traces/#ghost-snapshot-records","title":"Ghost Snapshot Records","text":"<p>The key records for blame attribution are <code>response_item</code> events with <code>ghost_snapshot</code> payloads:</p> <pre><code>{\n  \"timestamp\": \"2025-12-29T16:55:51.498Z\",\n  \"type\": \"response_item\",\n  \"payload\": {\n    \"type\": \"ghost_snapshot\",\n    \"ghost_commit\": {\n      \"id\": \"bf1fe931bc70f605aacd81822dd1d8dea2ca0822\",\n      \"parent\": null,\n      \"preexisting_untracked_files\": [\n        \".gitignore\",\n        \".python-version\",\n        \"README.md\",\n        \"config.yaml\",\n        \"created-with-codex.md\",\n        \"data.json\",\n        \"example.py\",\n        \"foo.md\",\n        \"main.py\",\n        \"notes.md\",\n        \"pyproject.toml\"\n      ],\n      \"preexisting_untracked_dirs\": []\n    }\n  }\n}\n</code></pre> <p>Key fields: - <code>timestamp</code>: RFC3339-formatted timestamp of the snapshot - <code>ghost_commit.id</code>: SHA1 hash of the git commit object - <code>preexisting_untracked_files</code>: List of files that existed in the repo at this point</p>"},{"location":"explanation/codex-traces/#turn-context-records","title":"Turn Context Records","text":"<p>Model information is in <code>turn_context</code> events:</p> <pre><code>{\n  \"timestamp\": \"2025-12-29T16:54:43.779Z\",\n  \"type\": \"turn_context\",\n  \"payload\": {\n    \"cwd\": \"/Users/alice/myproject\",\n    \"approval_policy\": \"never\",\n    \"sandbox_policy\": { \"type\": \"danger-full-access\" },\n    \"model\": \"gpt-5.2-codex\",\n    \"summary\": \"auto\"\n  }\n}\n</code></pre> <p>Key fields: - <code>model</code>: The model used (e.g., <code>gpt-5.2-codex</code>) - <code>cwd</code>: Current working directory during the session</p>"},{"location":"explanation/codex-traces/#blame-extraction-algorithm","title":"Blame Extraction Algorithm","text":"<p><code>ai-blame</code> reconstructs file blame from Codex traces by:</p> <ol> <li>Parsing ghost snapshots in chronological order</li> <li>Comparing file lists between successive snapshots to find changes</li> <li>For added files: Using <code>git show &lt;commit&gt;:&lt;file&gt;</code> to retrieve content</li> <li>For modified files: Comparing content between commits to detect changes</li> <li>Creating edit records with the snapshot timestamp and model</li> </ol>"},{"location":"explanation/codex-traces/#example-file-modifications-across-snapshots","title":"Example: File Modifications Across Snapshots","text":"<p>Given three snapshots:</p> <p>Snapshot 1 (2025-12-29 16:54:43, commit: 808b54e): <pre><code>Files: config.yaml, data.json, example.py, foo.md, ...\n</code></pre></p> <p>Snapshot 2 (2025-12-29 16:55:24, commit: 18538bd): <pre><code>Files: config.yaml, data.json, example.py, foo.md, ...  (no changes)\n</code></pre></p> <p>Snapshot 3 (2025-12-29 16:55:51, commit: bf1fe93): <pre><code>Files: config.yaml, data.json, example.py, foo.md, created-with-codex.md, ...\n</code></pre></p> <p><code>ai-blame</code> would attribute: - <code>created-with-codex.md</code>: Added in Snapshot 3 \u2192 created by gpt-5.2-codex at 16:55:51 - Other files: No changes detected in Snapshot 2\u21923 \u2192 no new edits - If <code>foo.md</code> content differed between snapshots, it would be marked as modified</p>"},{"location":"explanation/codex-traces/#accessing-ghost-commits","title":"Accessing Ghost Commits","text":"<p>You can manually inspect ghost commits:</p> <pre><code># View a file from a ghost commit\ngit show &lt;commit-hash&gt;:&lt;filepath&gt;\n\n# View the commit object\ngit cat-file -p &lt;commit-hash&gt;\n\n# List git objects in your repo\nls -la .git/objects/\n</code></pre>"},{"location":"explanation/codex-traces/#known-limitations-and-observations","title":"Known Limitations and Observations","text":""},{"location":"explanation/codex-traces/#1-uncommitted-working-directory-changes","title":"1. Uncommitted Working Directory Changes","text":"<p>Limitation: If you edit files after Codex runs but before the next snapshot, those changes won't be in any ghost commit.</p> <p>Example: You run <code>codex exec \"create file A\"</code>, Codex creates a snapshot showing file A. Then you manually edit file A. Those manual edits are in your working directory but not in any ghost commit, so they can't be blamed.</p> <p>Workaround: Codex will capture changes in the next snapshot when it runs, or you can commit the changes to git manually.</p>"},{"location":"explanation/codex-traces/#2-ghost-commits-are-ephemeral","title":"2. Ghost Commits Are Ephemeral","text":"<p>Observation: Ghost commits are stored in <code>.git/objects/</code> but are not part of any ref (branch, tag, etc.). If you run <code>git gc</code>, they might be cleaned up.</p> <p>Best Practice: Don't run aggressive git garbage collection on repositories with active Codex CLI usage.</p>"},{"location":"explanation/codex-traces/#3-multiple-sessions-in-same-repo","title":"3. Multiple Sessions in Same Repo","text":"<p>Observation: Multiple Codex CLI sessions in the same repo share the same git object database, but each session creates independent ghost commits.</p> <p>Attribution: Each session records files as they existed during that session, so <code>ai-blame</code> correctly attributes edits to the right session and model.</p>"},{"location":"explanation/codex-traces/#api-and-documentation","title":"API and Documentation","text":"<p>For more information about Codex CLI, see the official documentation:</p> <ul> <li>Codex CLI Documentation - Official guide</li> <li>Codex CLI Features - Feature reference</li> <li>Codex CLI Reference - Command-line options</li> <li>Codex CLI Exec Guide - Exec command documentation</li> <li>OpenAI Codex Overview - General Codex information</li> </ul>"},{"location":"explanation/codex-traces/#codex-cli-vs-github-copilot-traces","title":"Codex CLI vs GitHub Copilot Traces","text":"<p>This document focuses on Codex CLI traces. GitHub Copilot (IDE integration) stores traces differently:</p> Aspect Codex CLI GitHub Copilot Storage <code>~/.codex/sessions/</code> IDE/Copilot config directories Format JSON with ghost commits JSON with structured events File Changes Ghost commits in <code>.git/objects/</code> Direct event records Attribution Snapshot timestamps Event timestamps <p><code>ai-blame</code> supports both formats automatically.</p>"},{"location":"explanation/codex-traces/#see-also","title":"See Also","text":"<ul> <li>Claude Traces - Claude Code trace format</li> <li>Trace Format - Overview of all supported formats</li> <li>How It Works - General blame algorithm</li> </ul>"},{"location":"explanation/how-it-works/","title":"How It Works","text":"<p>This document explains the internal workings of <code>ai-blame</code>.</p>"},{"location":"explanation/how-it-works/#overview","title":"Overview","text":"<pre><code>flowchart LR\n    A[Claude Code Traces] --&gt; B[Extractor]\n    B --&gt; C[Edit Records]\n    C --&gt; D[Filters]\n    D --&gt; E[File Histories]\n    E --&gt; F[Updater]\n    F --&gt; G[Modified Files]</code></pre>"},{"location":"explanation/how-it-works/#step-1-locate-trace-files","title":"Step 1: Locate Trace Files","text":"<p>Claude Code stores execution traces in:</p> <pre><code>~/.claude/projects/&lt;encoded-cwd&gt;/\n</code></pre> <p>Where <code>&lt;encoded-cwd&gt;</code> is a filesystem-safe encoding of the project path (path separators become <code>-</code>, and punctuation like <code>.</code> may also be normalized to <code>-</code>).</p>"},{"location":"explanation/how-it-works/#step-2-parse-trace-files","title":"Step 2: Parse Trace Files","text":"<p>Each trace file is JSONL: one JSON record per line. <code>ai-blame</code> looks for successful tool results that correspond to file writes/edits (e.g., records that include a <code>toolUseResult.filePath</code> and either a create indicator or patch information).</p>"},{"location":"explanation/how-it-works/#step-3-extract-metadata","title":"Step 3: Extract Metadata","text":"<p>For each successful edit, we extract fields like timestamp, model, agent/tool version, whether it was a create vs edit, and (when available) patch details.</p>"},{"location":"explanation/how-it-works/#step-4-apply-filters","title":"Step 4: Apply Filters","text":"<p>Filters reduce the volume of edit records:</p> <ul> <li>File pattern filter</li> <li>Size filter (<code>--min-change-size</code>)</li> <li>First+last only (<code>--initial-and-recent</code>)</li> </ul>"},{"location":"explanation/how-it-works/#step-5-convert-to-file-histories","title":"Step 5: Convert to File Histories","text":"<p>Edit records are grouped by file and converted to file-level histories (<code>edit_history</code>).</p>"},{"location":"explanation/how-it-works/#step-6-load-output-configuration","title":"Step 6: Load Output Configuration","text":"<p>Rules in <code>.ai-blame.yaml</code> decide how each file type is handled (<code>append</code>, <code>sidecar</code>, <code>comment</code>, <code>skip</code>).</p>"},{"location":"explanation/how-it-works/#step-7-apply-changes","title":"Step 7: Apply Changes","text":"<p>Based on the output policy, <code>ai-blame</code> writes:</p> <ul> <li>Append: embeds <code>edit_history</code> into YAML/JSON files</li> <li>Sidecar: writes a companion <code>*.history.yaml</code></li> <li>Comment: embeds a comment block at the end of code files</li> </ul>"},{"location":"explanation/philosophy/","title":"Philosophy","text":"<p>Why does <code>ai-blame</code> exist, and what problems does it solve?</p>"},{"location":"explanation/philosophy/#the-problem-ai-assisted-curation-at-scale","title":"The Problem: AI-Assisted Curation at Scale","text":"<p>AI agents are increasingly being used to assist with knowledge base curation, documentation maintenance, and code generation. Tools like Claude Code can create and modify dozens of files in a single session.</p> <p>But this raises a critical question: who made this change?</p> <p>Traditional version control (git) tells you what changed and when, but in an AI-assisted workflow, the commit author is a human even when an AI made the actual edit. This creates an attribution gap:</p> <pre><code>$ git log --oneline\na1b2c3d Add disease definitions (Alice)\nd4e5f6g Update phenotype mappings (Bob)\n</code></pre> <p>Both commits might have been AI-generated, but there's no way to tell:</p> <ul> <li>Which AI model was used?</li> <li>Was it created from scratch or edited from existing content?</li> <li>What version of the AI tool made the change?</li> </ul>"},{"location":"explanation/philosophy/#the-solution-embedded-provenance","title":"The Solution: Embedded Provenance","text":"<p><code>ai-blame</code> extracts provenance information from AI agent execution traces and embeds it directly in the affected files:</p> <pre><code># disease.yaml\nname: Asthma\ndefinition: A chronic respiratory condition...\n\nedit_history:\n  - timestamp: \"2025-12-01T08:03:42+00:00\"\n    model: claude-opus-4-5-20251101\n    agent_tool: claude-code\n    agent_version: \"2.0.75\"\n    action: CREATED\n</code></pre> <p>This provides:</p> <ol> <li>Attribution \u2014 Know which model made each change</li> <li>Traceability \u2014 Track the evolution of AI-curated content</li> <li>Reproducibility \u2014 Record the exact tool versions used</li> <li>Transparency \u2014 Make AI involvement visible and auditable</li> </ol>"},{"location":"explanation/philosophy/#design-principles","title":"Design Principles","text":""},{"location":"explanation/philosophy/#1-non-invasive","title":"1. Non-Invasive","text":"<p><code>ai-blame</code> works with existing files and doesn't require changes to your workflow. It reads execution traces that are already being generated by tools like Claude Code.</p>"},{"location":"explanation/philosophy/#2-flexible-output","title":"2. Flexible Output","text":"<p>Different file types need different approaches:</p> <ul> <li>Structured data (YAML, JSON) \u2014 Append an <code>edit_history</code> key</li> <li>Code files \u2014 Use sidecar files or embedded comments</li> <li>Documentation \u2014 Often best skipped</li> </ul> <p>The configuration system lets you define policies per file type.</p>"},{"location":"explanation/philosophy/#3-dry-run-by-default","title":"3. Dry-Run by Default","text":"<p>The tool never modifies files unless explicitly told to. This lets you preview changes and ensure they're correct before applying.</p>"},{"location":"explanation/philosophy/#4-minimal-footprint","title":"4. Minimal Footprint","text":"<p>With <code>--initial-and-recent</code>, you can keep only the first and last edit, avoiding bloated history sections while preserving the essential provenance information.</p>"},{"location":"explanation/philosophy/#read-more","title":"Read More","text":"<p>For a deeper dive into the motivation and real-world use cases, see:</p> <p>\"Whose Code Is This, Anyway? Tracking AI Agent Provenance\" on Medium</p> <p>This article explores why provenance tracking matters for knowledge bases, code auditing, model comparison, and regulatory compliance\u2014and includes examples of how ai-blame solves the \"git blame won't tell you anymore\" problem.</p>"},{"location":"explanation/related-tools/","title":"Related Tools","text":"<p>Several tools address the challenge of tracking AI contributions to codebases. This document compares different approaches and explains where <code>ai-blame</code> fits in the landscape.</p>"},{"location":"explanation/related-tools/#the-provenance-problem","title":"The Provenance Problem","text":"<p>As AI agents become routine collaborators in software development and knowledge curation, we face a new challenge: attribution. Traditional version control tells us who committed changes, but in an AI-assisted workflow, the human commits changes that an AI actually wrote.</p> <p>Different tools take different approaches to solving this.</p>"},{"location":"explanation/related-tools/#git-ai","title":"git-ai","text":"<p>Website: usegitai.com</p> <p>git-ai takes a git-native approach to AI attribution. Rather than modifying files, it extends git's metadata system.</p>"},{"location":"explanation/related-tools/#comparison-with-ai-blame","title":"Comparison with ai-blame","text":"Aspect git-ai ai-blame Granularity Line-level File-level (plus <code>ai-blame blame</code> for a best-effort view) Storage Git notes (<code>.git/</code>) Embedded in files Timing Real-time during coding Post-hoc extraction Portability Via git clone Files carry their history Use case Development workflows Knowledge bases, structured data"},{"location":"explanation/trace-format/","title":"Trace Format","text":"<p>This document explains the structure of trace files that <code>ai-blame</code> parses.</p>"},{"location":"explanation/trace-format/#claude-code-traces","title":"Claude Code Traces","text":""},{"location":"explanation/trace-format/#file-location","title":"File Location","text":"<p>Claude Code stores traces in:</p> <pre><code>~/.claude/projects/&lt;encoded-cwd&gt;/\n</code></pre> <p><code>&lt;encoded-cwd&gt;</code> is a filesystem-safe encoding of your working directory path (path separators become <code>-</code>, and punctuation like <code>.</code> may also be normalized to <code>-</code>).</p> <p>Each session creates a JSONL file named with a UUID:</p> <pre><code>~/.claude/projects/-Users-alice-myproject/\n\u251c\u2500\u2500 a1b2c3d4-5678-90ab-cdef-123456789abc.jsonl\n\u251c\u2500\u2500 b2c3d4e5-6789-01cd-ef23-456789abcdef.jsonl\n\u2514\u2500\u2500 agent-c3d4e5f6-7890-12de-f345-6789abcdef01.jsonl\n</code></pre> <p>Files prefixed with <code>agent-</code> are from subagent invocations.</p>"},{"location":"explanation/trace-format/#jsonl-structure","title":"JSONL Structure","text":"<p>Each line is a JSON object representing a message in the conversation.</p>"},{"location":"explanation/trace-format/#key-fields-for-extraction","title":"Key Fields for Extraction","text":"<p><code>ai-blame</code> extracts these fields when present:</p> Field Location Description <code>file_path</code> <code>toolUseResult.filePath</code> Absolute path to the file <code>timestamp</code> root <code>timestamp</code> When the operation occurred <code>model</code> parent assistant <code>message.model</code> Model identifier <code>session_id</code> root <code>sessionId</code> Session identifier <code>is_create</code> <code>toolUseResult.type == \"create\"</code> Whether file was created <code>agent_version</code> root <code>version</code> Claude Code version"},{"location":"explanation/trace-format/#codexgithub-copilot-traces","title":"Codex/GitHub Copilot Traces","text":""},{"location":"explanation/trace-format/#file-location_1","title":"File Location","text":"<p>Codex traces may be stored in various locations depending on the client/implementation:</p> <pre><code>~/.codex/                              # Codex Direct (may have history.jsonl or sessions/)\n~/.codex/sessions/                     # Codex sessions directory\n~/.copilot/traces/                     # GitHub Copilot\n~/.config/github-copilot/traces/       # GitHub Copilot (config variant)\n~/.vscode/copilot/traces/              # VS Code Copilot extension\n~/.cursor/traces/                      # Cursor IDE\n~/.openai/traces/                      # OpenAI API\n</code></pre> <p><code>ai-blame</code> scans these locations automatically and uses any that exist. Files are typically <code>.jsonl</code> format (one JSON object per line).</p>"},{"location":"explanation/trace-format/#jsonl-structure_1","title":"JSONL Structure","text":"<p>Each line is a JSON object representing a completion or edit event.</p>"},{"location":"explanation/trace-format/#key-fields-for-extraction_1","title":"Key Fields for Extraction","text":"<p><code>ai-blame</code> extracts these fields when present:</p> Field Location Description <code>file</code> or <code>file_path</code> or <code>filePath</code> root Path to the file <code>timestamp</code> root <code>timestamp</code> When the operation occurred (RFC3339) <code>model</code> root <code>model</code> Model identifier (e.g., \"gpt-4\", \"codex-davinci-002\") <code>session_id</code> or <code>sessionId</code> root Session identifier <code>event</code> or <code>action</code> root Event type (\"create\", \"edit\", \"completion\") <code>content</code> root <code>content</code> File content for create operations <code>old_content</code> root <code>old_content</code> Original content for edits <code>new_content</code> root <code>new_content</code> New content for edits <code>diff</code> or <code>patch</code> root Structured diff/patch information"},{"location":"explanation/trace-format/#example-codex-trace-records","title":"Example Codex Trace Records","text":"<p>Create event: <pre><code>{\n  \"event\": \"create\",\n  \"file\": \"/path/to/file.py\",\n  \"model\": \"gpt-4\",\n  \"timestamp\": \"2025-12-01T08:00:00Z\",\n  \"session_id\": \"abc123\",\n  \"content\": \"def hello():\\n    print('Hello')\\n\"\n}\n</code></pre></p> <p>Edit event: <pre><code>{\n  \"event\": \"edit\",\n  \"file_path\": \"/path/to/file.py\",\n  \"model\": \"gpt-4\",\n  \"timestamp\": \"2025-12-01T08:05:00Z\",\n  \"session_id\": \"abc123\",\n  \"old_content\": \"def hello():\\n    pass\\n\",\n  \"new_content\": \"def hello():\\n    print('Hello')\\n\"\n}\n</code></pre></p>"},{"location":"explanation/trace-format/#mixed-traces","title":"Mixed Traces","text":"<p><code>ai-blame</code> can parse trace files containing both Claude Code and Codex format records in the same file, automatically detecting the format of each record.</p>"},{"location":"explanation/transcripts-and-subagents/","title":"Transcripts and Subagents","text":"<p>The <code>ai-blame transcript</code> commands let you explore and analyze the complete history of Claude Code and Codex sessions. Understanding how transcripts work\u2014especially with subagents\u2014helps you navigate multi-step tasks and complex interactions.</p>"},{"location":"explanation/transcripts-and-subagents/#what-is-a-transcript","title":"What is a Transcript?","text":"<p>A transcript is a complete record of one interaction session between you and an AI agent. It includes:</p> <ul> <li>Messages: All back-and-forth exchanges (user prompts and assistant responses)</li> <li>Metadata: Session ID, agent name, start/end times, working directory</li> <li>Content Blocks: Not just text\u2014also tool uses, file operations, thinking blocks, commands, and their outputs</li> <li>Trace File: The source <code>.jsonl</code> file where the session was originally recorded</li> </ul>"},{"location":"explanation/transcripts-and-subagents/#example-session","title":"Example Session","text":"<pre><code>User:    \"Help me refactor this function\"\nClaude:  \"I'll analyze the code... [reads file] Here's a refactored version...\"\nUser:    \"That looks good, apply it\"\nClaude:  \"Applying changes... [creates/edits file]\"\n</code></pre> <p>Each of these interactions appears as a message in the transcript.</p>"},{"location":"explanation/transcripts-and-subagents/#what-are-subagents","title":"What are Subagents?","text":"<p>Claude Code can autonomously spawn subagents to handle complex, multi-step tasks. These are specialized AI instances that can:</p> <ul> <li>Research: The <code>Explore</code> agent searches and analyzes codebases</li> <li>Plan: The <code>Plan</code> agent designs implementation strategies</li> <li>Task: The <code>Task</code> agent handles complex multi-step operations</li> <li>And more: Other specialized agents for specific domains</li> </ul>"},{"location":"explanation/transcripts-and-subagents/#when-are-subagents-created","title":"When are Subagents Created?","text":"<p>Claude Code launches subagents when:</p> <ol> <li>You ask a complex question (e.g., \"Find all places where errors are handled\")</li> <li>You request implementation with a complex design (e.g., \"Add authentication to my app\")</li> <li>You need research or exploration of an unfamiliar codebase</li> <li>A task is too complex for a single agent to handle efficiently</li> </ol>"},{"location":"explanation/transcripts-and-subagents/#key-point-shared-session-ids","title":"Key Point: Shared Session IDs","text":"<p>When Claude Code spawns a subagent, the subagent shares the same Session ID as the parent session. However, each subagent interaction is recorded in a separate trace file.</p> <p>This means you may see the same Session ID appearing multiple times in <code>transcript list</code> output\u2014each row represents a different trace file (parent session or subagent session), not a different user interaction.</p>"},{"location":"explanation/transcripts-and-subagents/#understanding-session-id-duplication","title":"Understanding Session ID Duplication","text":"<p>Here's a real example from your earlier output:</p> <pre><code>Session ID                               Agent           Start Time             Msgs  Files\n-----------------------------------------------------------------------------------------------\n483c7d95-6b9c-46db-afd4-3ecb6257781a     claude-code     2025-12-31 03:56         53      0\n483c7d95-6b9c-46db-afd4-3ecb6257781a     claude-code     2025-12-31 03:55          2      0\n483c7d95-6b9c-46db-afd4-3ecb6257781a     claude-code     2025-12-31 03:55          2      0\n</code></pre> <p>All three rows have the same Session ID (<code>483c7d95...</code>). Here's what this means:</p> <ol> <li>Row 1 (53 msgs): Main Claude Code session\u2014the parent interaction you initiated</li> <li>Row 2 (2 msgs): A subagent (e.g., Explore agent) that Claude spawned to research something</li> <li>Row 3 (2 msgs): Another subagent (e.g., Task agent) that Claude spawned for a specific operation</li> </ol> <p>All three are part of the same user-initiated conversation, but they're recorded separately because each involves different agent tools or different trace files.</p>"},{"location":"explanation/transcripts-and-subagents/#why-separate-trace-files","title":"Why Separate Trace Files?","text":"<p>Separate trace files for subagents provide several benefits:</p> <ol> <li>Isolation: Subagent work is isolated and can be reviewed independently</li> <li>Clear hierarchy: You can see the parent session and its child sessions</li> <li>Efficient parsing: Subagent traces can be cached and invalidated independently (per-file caching in Codex)</li> <li>Deduplication: Using UUIDs (Claude) or sequential IDs (Codex), the system prevents duplicate messages across related traces</li> </ol>"},{"location":"explanation/transcripts-and-subagents/#viewing-transcripts-with-subagents","title":"Viewing Transcripts with Subagents","text":""},{"location":"explanation/transcripts-and-subagents/#listing-with-model-information","title":"Listing with Model Information","text":"<p>To see which models were used in each trace file (helpful for identifying agent types), use:</p> <pre><code>ai-blame transcript list --columns SATMO\n</code></pre> <p>Output might look like:</p> <pre><code>Session ID                        Agent           Start Time           Msgs  Models\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n483c7d95-6b9c-46db-afd4-3ec...   claude-code     2025-12-31 03:56      53    claude-opus-4.5\n483c7d95-6b9c-46db-afd4-3ec...   claude-code     2025-12-31 03:55      2     claude-haiku\n483c7d95-6b9c-46db-afd4-3ec...   claude-code     2025-12-31 03:55      2     claude-haiku\n</code></pre> <ul> <li>The main session used Opus 4.5 (more capable model)</li> <li>The subagents used Haiku (faster, lighter-weight model)</li> </ul>"},{"location":"explanation/transcripts-and-subagents/#viewing-a-specific-subagent-transcript","title":"Viewing a Specific Subagent Transcript","text":"<p>Since each trace file is independent, you can view any subagent transcript by session ID:</p> <pre><code># View the main session\nai-blame transcript view 483c7d95\n\n# View a specific subagent session\nai-blame transcript view 483c7d95 --full --show-thinking\n</code></pre> <p>Because all three rows have the same Session ID, Claude will find and display the first matching transcript. If you need to view a specific file, you can pass the full path:</p> <pre><code>ai-blame transcript view ~/.claude/projects/-Users-alice-project/483c7d95-agent-explore.jsonl\n</code></pre>"},{"location":"explanation/transcripts-and-subagents/#understanding-agent-touched-files-with-subagents","title":"Understanding Agent-Touched Files with Subagents","text":"<p>When Claude spawns a subagent to explore or research:</p> <ol> <li>Subagent reads files without modifying them (files_touched may show 0)</li> <li>Main session writes files based on subagent recommendations</li> <li>Cache is intelligently invalidated when traces change</li> </ol> <p>This is why you might see:</p> <pre><code>483c7d95...   claude-code     2025-12-31 03:56      53    Files: 5   (main session modified files)\n483c7d95...   claude-code     2025-12-31 03:55      2     Files: 0   (subagent only read files)\n</code></pre>"},{"location":"explanation/transcripts-and-subagents/#data-model-summary","title":"Data Model Summary","text":"<pre><code>\u250c\u2500 User-Initiated Session (Session ID: 483c7d95...)\n\u2502\n\u251c\u2500 Trace File: session.jsonl\n\u2502  \u251c\u2500 Message 1: User prompt\n\u2502  \u251c\u2500 Message 2-53: Claude responses, tool uses, file edits\n\u2502  \u2514\u2500 Metadata: started at 03:56, modified 5 files\n\u2502\n\u251c\u2500 Trace File: session-agent-explore.jsonl (spawned subagent)\n\u2502  \u251c\u2500 Message 1: Explore task\n\u2502  \u251c\u2500 Message 2: Exploration results\n\u2502  \u2514\u2500 Metadata: started at 03:55, read 0 files (no writes)\n\u2502\n\u2514\u2500 Trace File: session-agent-task.jsonl (spawned subagent)\n   \u251c\u2500 Message 1: Task request\n   \u251c\u2500 Message 2: Task completion\n   \u2514\u2500 Metadata: started at 03:55, read 0 files\n</code></pre> <p>All share the same Session ID but have different trace files and potentially different models.</p>"},{"location":"explanation/transcripts-and-subagents/#cli-tips-for-subagent-workflows","title":"CLI Tips for Subagent Workflows","text":""},{"location":"explanation/transcripts-and-subagents/#see-everything-including-subagents","title":"See Everything (including subagents)","text":"<pre><code># Show all transcripts with models\u2014helps distinguish subagents\nai-blame transcript list -n 0 --columns SATMO\n</code></pre>"},{"location":"explanation/transcripts-and-subagents/#export-a-complex-session-for-documentation","title":"Export a Complex Session for Documentation","text":"<pre><code># Export the main session and subagent work as markdown\nai-blame transcript view 483c7d95 --format markdown --full &gt; main-session.md\n</code></pre>"},{"location":"explanation/transcripts-and-subagents/#analyze-subagent-performance","title":"Analyze Subagent Performance","text":"<p>Use the <code>--show-thinking</code> and <code>--show-tools</code> flags to understand what subagents are doing:</p> <pre><code>ai-blame transcript view 483c7d95 --show-thinking --show-tools\n</code></pre>"},{"location":"explanation/transcripts-and-subagents/#related-documentation","title":"Related Documentation","text":"<ul> <li>CLI Reference: transcript list \u2014 Column specifications and examples</li> <li>CLI Reference: transcript view \u2014 View options and output formats</li> <li>How It Works: Trace Format \u2014 Low-level detail on how traces are structured</li> <li>Claude Traces \u2014 Claude Code trace format specifics</li> <li>Codex Traces \u2014 Codex CLI trace format specifics</li> </ul>"},{"location":"how-to/column-layouts/","title":"Custom Column Layouts and Aliases","text":"<p>The <code>ai-blame blame</code> command provides fine-grained control over output formatting with customizable column layouts and abbreviation aliases.</p>"},{"location":"how-to/column-layouts/#column-layout-dsl","title":"Column Layout DSL","text":"<p>Use the <code>--columns</code> flag with a mini-DSL to specify which columns to display and their order:</p> <pre><code>ai-blame blame &lt;file&gt; --columns AMTLC\n</code></pre>"},{"location":"how-to/column-layouts/#available-column-specifiers","title":"Available Column Specifiers","text":"Letter Column Description <code>A</code> Agent Agent tool and version (e.g., <code>claude-code@1.0.0</code>) <code>M</code> Model AI model name (e.g., <code>claude-3-opus</code>) <code>T</code> Timestamp When the change was made <code>L</code> Line Line number <code>C</code> Code Source code content"},{"location":"how-to/column-layouts/#examples","title":"Examples","text":"<pre><code># Show only model, timestamp, line, and code (default when --show-agent is false)\nai-blame blame src/main.rs --columns MTLC\n\n# Show agent, model, and code columns only\nai-blame blame src/main.rs --columns AMC\n\n# Minimal output: just line numbers and code\nai-blame blame src/main.rs --columns LC\n\n# Full output with custom order\nai-blame blame src/main.rs --columns CATML\n</code></pre>"},{"location":"how-to/column-layouts/#abbreviation-aliases","title":"Abbreviation Aliases","text":"<p>Long agent and model names can make output cluttered. Use alias flags to define shorter abbreviations:</p>"},{"location":"how-to/column-layouts/#agent-aliases","title":"Agent Aliases","text":"<pre><code>ai-blame blame &lt;file&gt; --agent-alias claude-code=CC --agent-alias cursor=CR\n</code></pre>"},{"location":"how-to/column-layouts/#model-aliases","title":"Model Aliases","text":"<pre><code>ai-blame blame &lt;file&gt; --model-alias claude-3-opus=opus --model-alias gpt-4o=gpt4o\n</code></pre>"},{"location":"how-to/column-layouts/#combined-example","title":"Combined Example","text":"<pre><code>ai-blame blame src/main.rs \\\n  --columns AMTLC \\\n  --agent-alias claude-code=CC \\\n  --agent-alias cursor=CR \\\n  --model-alias claude-3-opus=opus-4.5 \\\n  --model-alias gpt-4o=gpt4o\n</code></pre> <p>This produces compact output like: <pre><code>Agent        | Model     | Timestamp        | Line | Code\n-------------|-----------|------------------|------|------------------\nCC@1.0.0     | opus-4.5  | 2025-12-01 09:00 |   1  | fn main() {\nCR@2.1.0     | gpt4o     | 2025-12-01 10:15 |   2  |     println!(\"Hello\");\n</code></pre></p>"},{"location":"how-to/column-layouts/#relationship-to-show-agent","title":"Relationship to --show-agent","text":"<p>When using the legacy <code>--show-agent</code> flag:</p> <ul> <li>Without <code>--columns</code>: <code>--show-agent</code> controls whether the Agent column is included in the default layout</li> <li>With <code>--columns</code>: <code>--show-agent</code> is ignored; explicitly include <code>A</code> in your column spec to show agent information</li> </ul> <pre><code># These are equivalent:\nai-blame blame file.rs --show-agent\nai-blame blame file.rs --columns AMTLC\n\n# These are equivalent:\nai-blame blame file.rs \nai-blame blame file.rs --columns MTLC\n</code></pre>"},{"location":"how-to/column-layouts/#default-behavior","title":"Default Behavior","text":"<ul> <li>Default columns (no <code>--columns</code> flag): <code>MTLC</code> (model, timestamp, line, code)</li> <li>With <code>--show-agent</code>: <code>AMTLC</code> (agent, model, timestamp, line, code)  </li> <li>Case insensitive: <code>amtlc</code> works the same as <code>AMTLC</code></li> <li>Whitespace ignored: <code>A M T L C</code> works the same as <code>AMTLC</code></li> </ul>"},{"location":"how-to/column-layouts/#error-handling","title":"Error Handling","text":"<p>Invalid column specifiers produce helpful error messages:</p> <pre><code>$ ai-blame blame file.rs --columns AMXLC\nError: invalid column specifier 'X' in \"AMXLC\". Valid specifiers: A, M, T, L, C\n</code></pre>"},{"location":"how-to/column-layouts/#performance-notes","title":"Performance Notes","text":"<ul> <li>Column selection doesn't affect parsing performance\u2014all data is extracted regardless</li> <li>Fewer columns produce cleaner, more readable output for large files</li> <li>Use aliases to keep output compact while preserving readability</li> </ul>"},{"location":"how-to/column-layouts/#related-topics","title":"Related Topics","text":"<ul> <li>Trace Exploration - <code>transcript list</code> command with column layouts</li> <li>Line-Level Analysis - <code>blame</code> command with column options</li> <li>CLI Reference - Complete syntax reference</li> <li>Command Index - Visual guide to all commands</li> </ul>"},{"location":"how-to/configuration/","title":"Configure Output Policies","text":"<p>This guide shows how to configure <code>ai-blame</code> to handle different file types with different output strategies.</p>"},{"location":"how-to/configuration/#the-configuration-file","title":"The Configuration File","text":"<p>Create a <code>.ai-blame.yaml</code> file in your project root:</p> <pre><code># .ai-blame.yaml\n\ndefaults:\n  policy: sidecar\n  sidecar_pattern: \"{stem}.history.yaml\"\n\nrules:\n  - pattern: \"*.yaml\"\n    policy: append\n\n  - pattern: \"*.yml\"\n    policy: append\n\n  - pattern: \"*.json\"\n    policy: append\n    format: json\n\n  - pattern: \"*.py\"\n    policy: comment\n    comment_syntax: hash\n\n  - pattern: \"*.md\"\n    policy: skip\n</code></pre>"},{"location":"how-to/configuration/#output-policies","title":"Output Policies","text":""},{"location":"how-to/configuration/#append-add-to-the-file","title":"<code>append</code> \u2014 Add to the File","text":"<p>Best for structured data files. Adds a <code>edit_history</code> key directly:</p> <pre><code>rules:\n  - pattern: \"*.yaml\"\n    policy: append\n</code></pre> <p>For JSON files, specify the format:</p> <pre><code>rules:\n  - pattern: \"*.json\"\n    policy: append\n    format: json\n</code></pre>"},{"location":"how-to/configuration/#sidecar-write-to-companion-file","title":"<code>sidecar</code> \u2014 Write to Companion File","text":"<p>Creates a separate history file alongside the original:</p> <pre><code>defaults:\n  policy: sidecar\n  sidecar_pattern: \"{stem}.history.yaml\"\n</code></pre> <p>Given <code>src/main.py</code>, this creates <code>src/main.history.yaml</code>.</p> <p>Sidecar pattern variables:</p> Variable Description Example <code>{name}</code> Full filename <code>main.py</code> <code>{stem}</code> Filename without extension <code>main</code> <code>{ext}</code> Extension (without dot) <code>py</code> <code>{dir}</code> Parent directory <code>src</code> <p>Examples:</p> <pre><code># foo.py \u2192 foo.history.yaml\nsidecar_pattern: \"{stem}.history.yaml\"\n\n# foo.py \u2192 foo.py.history.yaml\nsidecar_pattern: \"{name}.history.yaml\"\n\n# foo.py \u2192 .history/foo.py.yaml\nsidecar_pattern: \".history/{name}.yaml\"\n</code></pre>"},{"location":"how-to/configuration/#comment-embed-as-comments","title":"<code>comment</code> \u2014 Embed as Comments","text":"<p>Adds history as a comment block at the end of the file:</p> <pre><code>rules:\n  - pattern: \"*.py\"\n    policy: comment\n    comment_syntax: hash\n\n  - pattern: \"*.js\"\n    policy: comment\n    comment_syntax: slash\n\n  - pattern: \"*.html\"\n    policy: comment\n    comment_syntax: html\n</code></pre> <p>Comment syntaxes:</p> Syntax Format <code>hash</code> <code># comment</code> <code>slash</code> <code>// comment</code> <code>html</code> <code>&lt;!-- comment --&gt;</code> <p>Result in a Python file:</p> <pre><code># ... your code ...\n\n# --- edit_history ---\n# - timestamp: '2025-12-01T08:03:42+00:00'\n#   model: claude-opus-4-5-20251101\n#   action: CREATED\n# --- end edit_history ---\n</code></pre>"},{"location":"how-to/configuration/#skip-ignore-files","title":"<code>skip</code> \u2014 Ignore Files","text":"<p>Don't process matching files:</p> <pre><code>rules:\n  - pattern: \"*.md\"\n    policy: skip\n\n  - pattern: \"tests/**\"\n    policy: skip\n</code></pre>"},{"location":"how-to/configuration/#rule-matching","title":"Rule Matching","text":"<p>Rules are evaluated in order \u2014 first match wins.</p> <pre><code>rules:\n  # Specific rule first\n  - pattern: \"config/*.yaml\"\n    policy: append\n\n  # Then general rule\n  - pattern: \"*.yaml\"\n    policy: sidecar\n</code></pre>"},{"location":"how-to/configuration/#pattern-syntax","title":"Pattern Syntax","text":"<ul> <li>Simple glob: <code>*.yaml</code>, <code>*.py</code></li> <li>Path patterns: <code>src/**/*.py</code>, <code>kb/*.yaml</code></li> <li>Filename patterns: <code>config.yaml</code>, <code>README.md</code></li> </ul> <p>For patterns without <code>/</code>, only the filename is matched. For patterns with <code>/</code> or <code>**</code>, the full path is matched.</p>"},{"location":"how-to/configuration/#specifying-config-file","title":"Specifying Config File","text":"<pre><code># Auto-find (walks up from cwd)\nai-blame report\n\n# Explicit path\nai-blame annotate --config /path/to/.ai-blame.yaml --dry-run\n</code></pre>"},{"location":"how-to/configuration/#related-topics","title":"Related Topics","text":"<ul> <li>Setup &amp; Configuration \u2014 How to initialize and configure <code>.ai-blame.yaml</code></li> <li>Provenance Annotation \u2014 Using <code>report</code> and <code>annotate</code> commands</li> <li>File Types \u2014 Handling different file formats</li> <li>Performance and Caching \u2014 Optimizing configuration for speed</li> </ul>"},{"location":"how-to/file-types/","title":"Handle Different File Types","text":"<p>This guide shows recommended configurations for various file types.</p>"},{"location":"how-to/file-types/#structured-data-files","title":"Structured Data Files","text":""},{"location":"how-to/file-types/#yaml-files","title":"YAML Files","text":"<p>YAML files work best with the <code>append</code> policy:</p> <pre><code>rules:\n  - pattern: \"*.yaml\"\n    policy: append\n  - pattern: \"*.yml\"\n    policy: append\n</code></pre> <p>Result:</p> <pre><code># your-file.yaml\nname: Example\nversion: 1.0\n\nedit_history:\n  - timestamp: \"2025-12-01T08:03:42+00:00\"\n    model: claude-opus-4-5-20251101\n    action: CREATED\n</code></pre>"},{"location":"how-to/file-types/#json-files","title":"JSON Files","text":"<p>JSON files can also use <code>append</code> with the JSON format:</p> <pre><code>rules:\n  - pattern: \"*.json\"\n    policy: append\n    format: json\n</code></pre> <p>Result:</p> <pre><code>{\n  \"name\": \"Example\",\n  \"version\": \"1.0\",\n  \"edit_history\": [\n    {\n      \"timestamp\": \"2025-12-01T08:03:42+00:00\",\n      \"model\": \"claude-opus-4-5-20251101\",\n      \"action\": \"CREATED\"\n    }\n  ]\n}\n</code></pre>"},{"location":"how-to/file-types/#code-files","title":"Code Files","text":"<p>For code files, you have two options: sidecar files or embedded comments.</p>"},{"location":"how-to/file-types/#python","title":"Python","text":"Sidecar (Recommended)Comments <pre><code>rules:\n  - pattern: \"*.py\"\n    policy: sidecar\n    sidecar_pattern: \"{stem}.history.yaml\"\n</code></pre> <p>Creates <code>main.history.yaml</code> alongside <code>main.py</code>.</p> <pre><code>rules:\n  - pattern: \"*.py\"\n    policy: comment\n    comment_syntax: hash\n</code></pre> <p>Embeds at end of file:</p> <pre><code># --- edit_history ---\n# - timestamp: '2025-12-01T08:03:42+00:00'\n#   model: claude-opus-4-5\n#   action: CREATED\n# --- end edit_history ---\n</code></pre>"},{"location":"how-to/file-types/#javascript-typescript","title":"JavaScript / TypeScript","text":"SidecarComments <pre><code>rules:\n  - pattern: \"*.js\"\n    policy: sidecar\n  - pattern: \"*.ts\"\n    policy: sidecar\n  - pattern: \"*.tsx\"\n    policy: sidecar\n</code></pre> <pre><code>rules:\n  - pattern: \"*.js\"\n    policy: comment\n    comment_syntax: slash\n  - pattern: \"*.ts\"\n    policy: comment\n    comment_syntax: slash\n</code></pre>"},{"location":"how-to/file-types/#html-xml","title":"HTML / XML","text":"<pre><code>rules:\n  - pattern: \"*.html\"\n    policy: comment\n    comment_syntax: html\n</code></pre> <p>Result:</p> <pre><code>&lt;!-- edit_history\n- timestamp: '2025-12-01T08:03:42+00:00'\n  model: claude-opus-4-5\n  action: CREATED\n--&gt;\n</code></pre>"},{"location":"how-to/file-types/#documentation-files","title":"Documentation Files","text":""},{"location":"how-to/file-types/#markdown","title":"Markdown","text":"<p>Markdown files are often regenerated or are documentation that shouldn't include audit trails:</p> <pre><code>rules:\n  - pattern: \"*.md\"\n    policy: skip\n  - pattern: \"docs/**\"\n    policy: skip\n</code></pre> <p>Or use sidecar if you want to track them:</p> <pre><code>rules:\n  - pattern: \"*.md\"\n    policy: sidecar\n</code></pre>"},{"location":"how-to/file-types/#configuration-files","title":"Configuration Files","text":""},{"location":"how-to/file-types/#skip-generatedlock-files","title":"Skip Generated/Lock Files","text":"<pre><code>rules:\n  - pattern: \"*.lock\"\n    policy: skip\n  - pattern: \"package-lock.json\"\n    policy: skip\n</code></pre>"},{"location":"how-to/file-types/#related-topics","title":"Related Topics","text":"<ul> <li>Setup &amp; Configuration \u2014 How to initialize and configure <code>.ai-blame.yaml</code></li> <li>Configuration Guide \u2014 Detailed configuration options</li> <li>Provenance Annotation \u2014 How different output policies work</li> <li>CLI Reference \u2014 Command syntax for all commands</li> </ul>"},{"location":"how-to/performance-and-caching/","title":"Performance and Caching","text":"<p>This guide explains how to use ai-blame's DuckDB caching system to speed up repeated analysis runs.</p>"},{"location":"how-to/performance-and-caching/#the-problem-slow-re-runs","title":"The Problem: Slow Re-runs","text":"<p>The initial <code>ai-blame stats</code> run parses hundreds of trace files, which can take 30-60 seconds depending on your trace history size. However, if the traces haven't changed, subsequent runs do the exact same parsing work and take just as long.</p> <p>Example: <pre><code># First run: 53 seconds\nai-blame stats\n\n# Second run (no changes): still 53 seconds \u274c\nai-blame stats\n</code></pre></p>"},{"location":"how-to/performance-and-caching/#the-solution-trace-caching","title":"The Solution: Trace Caching","text":"<p>ai-blame can cache parsed trace data in a DuckDB database (<code>.ai-blame.ddb</code>) stored alongside your traces. On subsequent runs, unchanged traces are loaded from the cache instead of re-parsed.</p> <p>With caching: <pre><code># First run: ~55 seconds (builds cache)\nAI_BLAME_ENABLE_CACHE=1 ai-blame stats\n\n# Second run (no changes): ~3-5 seconds \u2705\nAI_BLAME_ENABLE_CACHE=1 ai-blame stats\n\n# Cache hit: 90% speedup!\n</code></pre></p>"},{"location":"how-to/performance-and-caching/#current-status","title":"Current Status","text":"<p>\u2705 Enabled by Default</p> <p>Caching is now enabled by default with full support for cross-file UUID resolution in Claude traces. The fix for the duplicate edits bug is implemented in #36 and #37.</p>"},{"location":"how-to/performance-and-caching/#using-the-cache","title":"Using the Cache","text":""},{"location":"how-to/performance-and-caching/#default-behavior-cache-enabled","title":"Default Behavior (Cache Enabled)","text":"<p>Caching is enabled by default. No configuration needed:</p> <pre><code>ai-blame stats\nai-blame report\nai-blame annotate\n</code></pre> <p>The cache is automatically created and used on subsequent runs.</p>"},{"location":"how-to/performance-and-caching/#disable-cache-for-specific-run","title":"Disable Cache for Specific Run","text":"<p>If caching is enabled globally but you want to skip it for one run:</p> <pre><code>ai-blame stats --no-cache\n</code></pre>"},{"location":"how-to/performance-and-caching/#rebuild-the-cache","title":"Rebuild the Cache","text":"<p>To delete and rebuild the cache (forces re-parsing of all traces):</p> <pre><code>ai-blame stats --rebuild-cache\n</code></pre> <p>Or to rebuild while keeping cache enabled:</p> <pre><code>AI_BLAME_ENABLE_CACHE=1 ai-blame stats --rebuild-cache\n</code></pre>"},{"location":"how-to/performance-and-caching/#how-caching-works","title":"How Caching Works","text":""},{"location":"how-to/performance-and-caching/#cache-location","title":"Cache Location","text":"<p>The cache is stored in <code>.ai-blame.ddb</code> in your trace directory (first trace directory if multiple are provided):</p> <pre><code>your-project/\n\u251c\u2500\u2500 .claude/\n\u2502   \u2514\u2500\u2500 traces/\n\u2502       \u251c\u2500\u2500 session-1.jsonl\n\u2502       \u251c\u2500\u2500 session-2.jsonl\n\u2502       \u2514\u2500\u2500 .ai-blame.ddb        \u2190 Cache file (auto-created)\n\u251c\u2500\u2500 .ai-blame.yaml\n\u2514\u2500\u2500 src/\n</code></pre>"},{"location":"how-to/performance-and-caching/#staleness-detection","title":"Staleness Detection","text":"<p>The cache automatically detects when traces have changed:</p> Property Tracked Used For Modification time \u2705 Nanosecond precision Detect file changes File size \u2705 Bytes Quick change detection Parser version \u2705 Version 1 schema Detect schema changes Record count \u2705 Stored count Statistics"},{"location":"how-to/performance-and-caching/#provider-specific-behavior","title":"Provider-Specific Behavior","text":""},{"location":"how-to/performance-and-caching/#claude-traces-all-or-nothing-invalidation","title":"Claude Traces: All-or-Nothing Invalidation","text":"<p>Claude traces use cross-file UUID resolution to link edits across sessions. Due to this dependency:</p> <ul> <li>If ANY trace file changes, ALL files in that directory are re-parsed</li> <li>This ensures UUID references remain correct</li> <li>Cost: ~1-2 seconds per directory for small trace sets</li> </ul> <p>Example: <pre><code># 5 trace files cached\n# Edit 1 file \u2192 all 5 are re-parsed\n# This is correct, but not optimal (see issue #38 for improvements)\n</code></pre></p>"},{"location":"how-to/performance-and-caching/#codex-traces-per-file-invalidation","title":"Codex Traces: Per-File Invalidation","text":"<p>Codex/Copilot traces are independent (no cross-file dependencies):</p> <ul> <li>Each trace file is checked independently</li> <li>Only changed files are re-parsed</li> <li>Optimal cache behavior \u2705</li> </ul>"},{"location":"how-to/performance-and-caching/#cache-schema","title":"Cache Schema","text":"<p>The cache stores: - trace_files table: Metadata about each trace file (mtime, size, record count) - edit_records table: Fully parsed edits with all fields (file path, timestamp, model, etc.) - Indexes: On file path, timestamp, and session ID for fast queries</p>"},{"location":"how-to/performance-and-caching/#cleaning-up","title":"Cleaning Up","text":"<p>To remove the cache manually:</p> <pre><code># Delete single cache\nrm .ai-blame.ddb\n\n# Delete caches in all trace directories\nfind ~/.claude -name \".ai-blame.ddb\" -delete\n</code></pre> <p>Cache files are automatically added to <code>.gitignore</code> and won't be committed to version control.</p>"},{"location":"how-to/performance-and-caching/#performance-impact","title":"Performance Impact","text":""},{"location":"how-to/performance-and-caching/#first-run-cache-enabled","title":"First Run (Cache Enabled)","text":"<ul> <li>Expected: ~1-2 seconds slower than without caching</li> <li>Reason: Writing to DuckDB has overhead</li> <li>Trade-off: Worth it for future runs</li> </ul>"},{"location":"how-to/performance-and-caching/#subsequent-runs-unchanged-traces","title":"Subsequent Runs (Unchanged Traces)","text":"<ul> <li>Expected: ~90% speedup</li> <li>Example: 53 seconds \u2192 3-5 seconds</li> <li>Scaling: Linear with trace count (faster with more traces)</li> </ul>"},{"location":"how-to/performance-and-caching/#incremental-updates-some-traces-changed","title":"Incremental Updates (Some Traces Changed)","text":"<ul> <li>Expected: Proportional to changed files</li> <li>Example: 10% of traces changed \u2192 ~10% of re-parsing cost + cache queries</li> <li>Best case: Single file changed, rest from cache \u2192 5-10 seconds total</li> </ul>"},{"location":"how-to/performance-and-caching/#troubleshooting","title":"Troubleshooting","text":""},{"location":"how-to/performance-and-caching/#cache-not-created","title":"Cache Not Created","text":"<p>Symptoms: Run <code>AI_BLAME_ENABLE_CACHE=1 ai-blame stats</code> but no <code>.ai-blame.ddb</code> file appears.</p> <p>Solutions: 1. Verify caching is enabled: <code>echo $AI_BLAME_ENABLE_CACHE</code> (should output <code>1</code>) 2. Check trace directory is writable: <code>touch /path/to/traces/.test</code> 3. Ensure traces contain edits (empty traces may not create cache entries)</p>"},{"location":"how-to/performance-and-caching/#cache-corruption","title":"Cache Corruption","text":"<p>Symptoms: <code>Error: Failed to open cache: Constraint violation</code> or similar DuckDB errors.</p> <p>Solutions: <pre><code># Rebuild the cache\nai-blame stats --rebuild-cache\n\n# Or manually delete it\nrm .ai-blame.ddb\n</code></pre></p>"},{"location":"how-to/performance-and-caching/#future-improvements","title":"Future Improvements","text":"<ul> <li>#38: Incremental cache invalidation for Claude traces (smart UUID dependency tracking to reduce re-parsing on partial changes)</li> </ul>"},{"location":"how-to/performance-and-caching/#see-also","title":"See Also","text":"<ul> <li>Performance &amp; Optimization \u2014 Caching and filtering strategies</li> <li>CLI Reference: Cache Flags</li> <li>Configuration File</li> <li>FAQ: Performance</li> </ul>"},{"location":"how-to/shell-completions/","title":"Shell Completions","text":"<p>Enable tab completion for <code>ai-blame</code> commands, options, and file paths in your shell.</p>"},{"location":"how-to/shell-completions/#generating-completion-scripts","title":"Generating Completion Scripts","text":"<p>Use the <code>completions</code> subcommand to generate a completion script for your shell:</p> <pre><code>ai-blame completions &lt;SHELL&gt;\n</code></pre> <p>Supported shells: <code>bash</code>, <code>zsh</code>, <code>fish</code>, <code>elvish</code>, <code>powershell</code></p>"},{"location":"how-to/shell-completions/#installation-by-shell","title":"Installation by Shell","text":""},{"location":"how-to/shell-completions/#zsh-with-oh-my-zsh","title":"Zsh (with Oh My Zsh)","text":"<p>Oh My Zsh uses a custom completions directory:</p> <pre><code># Create completions directory if it doesn't exist\nmkdir -p ~/.oh-my-zsh/completions\n\n# Generate and install the completion script\nai-blame completions zsh &gt; ~/.oh-my-zsh/completions/_ai-blame\n\n# Reload your shell\nexec zsh\n</code></pre> <p>Alternatively, add to Oh My Zsh's custom directory:</p> <pre><code>mkdir -p ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/completions\nai-blame completions zsh &gt; ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/completions/_ai-blame\nexec zsh\n</code></pre>"},{"location":"how-to/shell-completions/#zsh-without-oh-my-zsh","title":"Zsh (without Oh My Zsh)","text":"<pre><code># Create a completions directory\nmkdir -p ~/.zfunc\n\n# Generate and install the completion script\nai-blame completions zsh &gt; ~/.zfunc/_ai-blame\n\n# Add to ~/.zshrc (if not already present):\necho 'fpath=(~/.zfunc $fpath)' &gt;&gt; ~/.zshrc\necho 'autoload -Uz compinit &amp;&amp; compinit' &gt;&gt; ~/.zshrc\n\n# Reload your shell\nsource ~/.zshrc\n</code></pre>"},{"location":"how-to/shell-completions/#bash","title":"Bash","text":"<p>On macOS with Homebrew:</p> <pre><code># Install bash-completion if not already installed\nbrew install bash-completion@2\n\n# Generate and install the completion script\nai-blame completions bash &gt; $(brew --prefix)/etc/bash_completion.d/ai-blame\n\n# Add to ~/.bash_profile (if not already present):\necho '[[ -r \"$(brew --prefix)/etc/profile.d/bash_completion.sh\" ]] &amp;&amp; . \"$(brew --prefix)/etc/profile.d/bash_completion.sh\"' &gt;&gt; ~/.bash_profile\n\n# Reload your shell\nsource ~/.bash_profile\n</code></pre> <p>On Linux:</p> <pre><code># System-wide installation (requires sudo)\nai-blame completions bash | sudo tee /etc/bash_completion.d/ai-blame &gt; /dev/null\n\n# Or user-local installation\nmkdir -p ~/.local/share/bash-completion/completions\nai-blame completions bash &gt; ~/.local/share/bash-completion/completions/ai-blame\n\n# Reload your shell\nsource ~/.bashrc\n</code></pre>"},{"location":"how-to/shell-completions/#fish","title":"Fish","text":"<pre><code># Generate and install the completion script\nai-blame completions fish &gt; ~/.config/fish/completions/ai-blame.fish\n\n# Fish picks this up automatically, or reload with:\nsource ~/.config/fish/completions/ai-blame.fish\n</code></pre>"},{"location":"how-to/shell-completions/#powershell","title":"PowerShell","text":"<pre><code># Generate the completion script\nai-blame completions powershell &gt; ai-blame.ps1\n\n# Add to your PowerShell profile\n# First, find your profile path:\necho $PROFILE\n\n# Then add the completion script to your profile:\nAdd-Content $PROFILE \"`n. path\\to\\ai-blame.ps1\"\n\n# Reload PowerShell\n</code></pre>"},{"location":"how-to/shell-completions/#elvish","title":"Elvish","text":"<pre><code>ai-blame completions elvish &gt; ~/.elvish/lib/ai-blame.elv\n# Then add: use ai-blame to ~/.elvish/rc.elv\n</code></pre>"},{"location":"how-to/shell-completions/#what-gets-completed","title":"What Gets Completed","text":"<p>Once installed, tab completion provides:</p> Context Completion <code>ai-blame &lt;TAB&gt;</code> Subcommands: <code>init</code>, <code>report</code>, <code>annotate</code>, <code>stats</code>, <code>blame</code>, <code>timeline</code>, <code>transcript</code>, <code>completions</code> <code>ai-blame blame &lt;TAB&gt;</code> File paths <code>ai-blame report --&lt;TAB&gt;</code> Options: <code>--trace-dir</code>, <code>--config</code>, <code>--pattern</code>, etc. <code>ai-blame transcript &lt;TAB&gt;</code> Sub-subcommands: <code>list</code>, <code>view</code> <code>ai-blame init --flavor &lt;TAB&gt;</code> Values: <code>sidecar</code>, <code>in-place</code> <code>ai-blame completions &lt;TAB&gt;</code> Shells: <code>bash</code>, <code>zsh</code>, <code>fish</code>, <code>elvish</code>, <code>powershell</code>"},{"location":"how-to/shell-completions/#troubleshooting","title":"Troubleshooting","text":""},{"location":"how-to/shell-completions/#completions-not-working-after-installation","title":"Completions not working after installation","text":"<ol> <li>Make sure you've reloaded your shell (<code>exec zsh</code>, <code>source ~/.bashrc</code>, etc.)</li> <li>For zsh, ensure <code>compinit</code> is called after updating <code>fpath</code></li> <li>Check that the completion file was written correctly:    <pre><code># Should show completion function definition\nhead -20 ~/.zfunc/_ai-blame  # or wherever you installed it\n</code></pre></li> </ol>"},{"location":"how-to/shell-completions/#oh-my-zsh-completions-directory-doesnt-exist","title":"Oh My Zsh: completions directory doesn't exist","text":"<p>Oh My Zsh may not create the completions directory by default. Create it manually:</p> <pre><code>mkdir -p ~/.oh-my-zsh/completions\n</code></pre>"},{"location":"how-to/shell-completions/#completions-outdated-after-upgrade","title":"Completions outdated after upgrade","text":"<p>Regenerate the completion script after upgrading <code>ai-blame</code>:</p> <pre><code>ai-blame completions zsh &gt; ~/.oh-my-zsh/completions/_ai-blame\nexec zsh\n</code></pre>"},{"location":"how-to/shell-completions/#permission-denied-errors","title":"Permission denied errors","text":"<p>For system-wide installation on Linux, use <code>sudo</code>:</p> <pre><code>ai-blame completions bash | sudo tee /etc/bash_completion.d/ai-blame &gt; /dev/null\n</code></pre>"},{"location":"how-to/shell-completions/#updating-completions","title":"Updating Completions","text":"<p>When <code>ai-blame</code> adds new commands or options, regenerate your completion script:</p> <pre><code># For zsh/Oh My Zsh:\nai-blame completions zsh &gt; ~/.oh-my-zsh/completions/_ai-blame &amp;&amp; exec zsh\n\n# For bash:\nai-blame completions bash &gt; $(brew --prefix)/etc/bash_completion.d/ai-blame &amp;&amp; source ~/.bash_profile\n\n# For fish:\nai-blame completions fish &gt; ~/.config/fish/completions/ai-blame.fish\n</code></pre>"},{"location":"how-to/tauri-app/","title":"Tauri Desktop App","text":""},{"location":"how-to/tauri-app/#overview","title":"Overview","text":"<p>The AI Blame Tauri app provides a modern, cross-platform desktop interface for visualizing and exploring AI-assisted code edits. Built with Tauri, the app offers a fast, native experience with a responsive web-based UI that connects directly to the ai-blame Rust library.</p> <p></p> <p>The desktop app complements the CLI by providing visual exploration of AI-assisted edits with interactive navigation between views.</p>"},{"location":"how-to/tauri-app/#why-use-the-desktop-app","title":"Why Use the Desktop App?","text":"<p>The Tauri app complements the CLI by providing:</p> <ul> <li>Visual blame viewer \u2014 Inspect file-level attribution with edit history and session details</li> <li>Timeline view \u2014 Chronological list of all AI edits with direct navigation to files</li> <li>Transcript search \u2014 Search across all AI sessions to find specific conversations</li> <li>Cross-view navigation \u2014 Jump from timeline \u2192 blame \u2192 transcript and back</li> <li>Configuration studio \u2014 Edit <code>.ai-blame.yaml</code> visually with live preview (planned)</li> <li>Real-time monitoring \u2014 Watch for new traces (planned)</li> </ul> <p>For comprehensive CLI functionality, see the CLI documentation.</p>"},{"location":"how-to/tauri-app/#user-interface","title":"User Interface","text":"<p>The app features a modern, responsive interface with four main views accessible from the sidebar navigation. Each view is fully functional and connected to the backend.</p>"},{"location":"how-to/tauri-app/#blame-viewer","title":"Blame Viewer","text":"<p>View file-level attribution showing which AI models edited specific lines of code.</p> <p>Features:</p> <ul> <li>Three-panel layout:<ul> <li>Files panel (left): Browse project files with search and \"AI-touched only\" filter</li> <li>Code panel (center): View file content with line numbers and attribution</li> <li>Details panel (right): Show model, timestamp, and session info for selected lines</li> </ul> </li> <li>Interactive elements:<ul> <li>Click a line to see who edited it, when, and via which session</li> <li>Click the session ID in details to jump to the transcript</li> <li>Clickable file names for quick selection</li> <li>Search files by name pattern</li> </ul> </li> <li>Filtering:<ul> <li>Toggle \"AI-touched only\" to see only files edited by AI</li> <li>Search for specific files</li> </ul> </li> </ul> <p>Planned improvements:</p> <ul> <li>Syntax highlighting for all file types</li> <li>Color-coded lines by AI model</li> <li>Filter by model, date range, or file pattern</li> <li>Export to HTML</li> </ul>"},{"location":"how-to/tauri-app/#timeline","title":"Timeline","text":"<p>Chronological list of all AI edits in your project with direct navigation to source files.</p> <p>Features:</p> <ul> <li>Timeline table with columns:<ul> <li>Timestamp (formatted local time)</li> <li>Action (CREATED or EDITED)</li> <li>File (clickable to jump to blame viewer)</li> <li>Model (AI model used)</li> <li>Agent (agent tool and version, e.g., claude-code@2.0)</li> </ul> </li> <li>Controls:<ul> <li>Limit: Configure how many recent edits to show (default 50)</li> <li>Skip Codex: Exclude GitHub Copilot/Codex traces</li> </ul> </li> <li>Navigation:<ul> <li>Click any file name to jump to Blame Viewer with that file loaded</li> <li>See agent version alongside agent name for context</li> </ul> </li> </ul> <p>Planned improvements:</p> <ul> <li>Filter by model, date range, or file pattern</li> <li>Heatmap showing peak editing times</li> <li>Aggregate statistics (most-edited files, most-active models)</li> </ul>"},{"location":"how-to/tauri-app/#transcripts","title":"Transcripts","text":"<p>Search and explore AI conversation sessions with full message content.</p> <p>Features:</p> <ul> <li>Session list (left side):<ul> <li>Browse all AI sessions discovered in your project</li> <li>Shows session date, message count, and agent type</li> <li>Clickable sessions to view full conversation</li> </ul> </li> <li>Search within transcript:<ul> <li>Real-time search across message content (case-insensitive)</li> <li>Filters messages as you type</li> <li>Shows \"no matches\" when search returns empty</li> </ul> </li> <li>Transcript viewer (right side):<ul> <li>Full conversation history with user and assistant messages</li> <li>Message metadata: timestamp, model, token usage</li> <li>Content blocks: text, thinking, code, tool use, commands</li> <li>Formatted output for all content types</li> </ul> </li> <li>Navigation:<ul> <li>Click session ID from Blame Details to jump here</li> <li>Automatically loads the session transcript</li> </ul> </li> </ul> <p>Planned improvements:</p> <ul> <li>Cross-transcript search (find text across all sessions)</li> <li>Filter sessions by agent tool, model, date range</li> <li>Export transcripts to markdown or PDF</li> <li>Syntax highlighting for code blocks</li> </ul>"},{"location":"how-to/tauri-app/#settings","title":"Settings","text":"<p>Configure AI Blame behavior and manage project settings.</p> <p>Features:</p> <ul> <li>General settings:<ul> <li>Project path selection via file picker</li> <li>Home directory override for trace discovery</li> <li>Enable/disable DuckDB caching</li> </ul> </li> <li>Cache management:<ul> <li>Clear cache button to reset cached trace data</li> <li>Toggle caching on/off</li> </ul> </li> <li>Future options:<ul> <li>Default policy (Sidecar, Append, Comment, Skip)</li> <li>Configuration file editor</li> </ul> </li> </ul>"},{"location":"how-to/tauri-app/#installation-setup","title":"Installation &amp; Setup","text":""},{"location":"how-to/tauri-app/#prerequisites","title":"Prerequisites","text":"<p>To build or run the Tauri app, you need:</p> <ul> <li>Rust toolchain (latest stable)</li> <li>Tauri prerequisites for your platform:<ul> <li>Linux: <code>webkit2gtk</code>, <code>libgtk-3</code>, <code>libayatana-appindicator3</code></li> <li>macOS: Xcode Command Line Tools</li> <li>Windows: Microsoft Visual Studio C++ Build Tools</li> </ul> </li> </ul> <p>Check your setup:</p> <pre><code>cargo tauri info  # Verify prerequisites are installed\n</code></pre>"},{"location":"how-to/tauri-app/#running-the-app","title":"Running the App","text":""},{"location":"how-to/tauri-app/#option-1-desktop-app-recommended","title":"Option 1: Desktop App (Recommended)","text":"<p>Build and run the Tauri desktop application:</p> <pre><code># From repo root\ncd src-tauri\ncargo run --release\n</code></pre> <p>This launches the native desktop app with the UI loaded from the <code>../ui/</code> directory.</p>"},{"location":"how-to/tauri-app/#option-2-development-mode","title":"Option 2: Development Mode","text":"<p>For UI development with hot reload (requires Tauri CLI):</p> <pre><code># Install Tauri CLI\ncargo install tauri-cli\n\n# Run in dev mode (from repo root)\ncargo tauri dev\n</code></pre> <p>Changes to <code>ui/</code> files will automatically refresh the app.</p>"},{"location":"how-to/tauri-app/#option-3-static-web-view-no-backend","title":"Option 3: Static Web View (No Backend)","text":"<p>For quick UI prototyping without Tauri:</p> <pre><code># From repo root, serve the static UI\npython3 -m http.server -d ui 8000\n\n# Visit http://localhost:8000 in your browser\n</code></pre> <p>Note: The browser version has no backend access, so Tauri-specific features (file picker, trace scanning) won't work.</p>"},{"location":"how-to/tauri-app/#building-release-binaries","title":"Building Release Binaries","text":"<p>To create distributable binaries for your platform:</p> <pre><code># From repo root\ncargo tauri build\n</code></pre> <p>This generates platform-specific installers in <code>src-tauri/target/release/bundle/</code>:</p> <ul> <li>Windows: <code>.msi</code> and <code>.exe</code> installers</li> <li>macOS: <code>.dmg</code> and <code>.app</code> bundle</li> <li>Linux: <code>.AppImage</code>, <code>.deb</code>, and <code>.rpm</code> packages</li> </ul>"},{"location":"how-to/tauri-app/#architecture","title":"Architecture","text":"<p>The Tauri app consists of two main parts:</p>"},{"location":"how-to/tauri-app/#frontend-ui","title":"Frontend (UI)","text":"<p>Located in the <code>ui/</code> directory:</p> <ul> <li><code>index.html</code> \u2014 Page structure and layout</li> <li><code>styles.css</code> \u2014 Responsive design and theming</li> <li><code>app.js</code> \u2014 Navigation logic and mock data</li> </ul> <p>The frontend is a simple HTML/CSS/JavaScript application without external dependencies.</p>"},{"location":"how-to/tauri-app/#backend-rust","title":"Backend (Rust)","text":"<p>Located in <code>src-tauri/src/main.rs</code>, the Tauri backend calls the core <code>ai-blame</code> library with no code duplication.</p> <p>Current backend commands:</p> <ul> <li><code>app_info</code> \u2014 Application name and version</li> <li><code>pick_project_dir</code> \u2014 File picker for project selection</li> <li><code>list_project_files</code> \u2014 List files in project with filtering</li> <li><code>list_agent_touched_files</code> \u2014 Get files edited by AI agents</li> <li><code>blame_file</code> \u2014 Generate line-level attribution for a file</li> <li><code>list_timeline</code> \u2014 Get chronological list of all edits with filtering</li> <li><code>list_transcripts</code> \u2014 Discover all AI conversation sessions</li> <li><code>get_transcript</code> \u2014 Load full transcript by session ID</li> <li><code>search_transcripts</code> \u2014 Search transcripts by query, agent, model, date range</li> </ul> <p>Planned backend commands:</p> <ul> <li><code>load_config</code> \u2014 Load <code>.ai-blame.yaml</code> configuration</li> <li><code>save_config</code> \u2014 Save configuration to file</li> <li>Advanced trace statistics and analytics</li> </ul>"},{"location":"how-to/tauri-app/#communication","title":"Communication","text":"<p>The frontend and backend communicate via Tauri's IPC (Inter-Process Communication):</p> <ul> <li>Commands: Frontend calls Rust functions (async RPC)</li> <li>Events: Backend pushes updates to frontend (pub/sub)</li> </ul>"},{"location":"how-to/tauri-app/#known-limitations","title":"Known Limitations","text":"<ul> <li>No file operations \u2014 Cannot read or write files from the UI (CLI recommended for annotate)</li> <li>Limited state persistence \u2014 Selected project is remembered, but other settings reset on restart</li> <li>No syntax highlighting \u2014 Code blocks display as plain text</li> <li>No color-coding \u2014 Lines not yet color-coded by AI model</li> <li>Search limitations \u2014 In-transcript search is JavaScript-based (frontend-only); cross-transcript search available via backend but not yet exposed in UI</li> <li>No keyboard shortcuts \u2014 Navigation is primarily mouse/click-based</li> </ul>"},{"location":"how-to/tauri-app/#development-roadmap","title":"Development Roadmap","text":""},{"location":"how-to/tauri-app/#planned-enhancements","title":"Planned Enhancements","text":"<p>Search &amp; Discovery:</p> <ul> <li>Expose cross-transcript search in UI</li> <li>Add filters: by model, agent, date range</li> <li>Session search by metadata</li> </ul> <p>Blame Viewer:</p> <ul> <li>Syntax highlighting for code files</li> <li>Color-code lines by AI model</li> <li>Edit history timeline for selected lines</li> <li>Export blame view to HTML or markdown</li> </ul> <p>Configuration UI:</p> <ul> <li>Load and validate <code>.ai-blame.yaml</code> files</li> <li>Visual rule builder</li> <li>Real-time configuration preview</li> </ul> <p>Polish &amp; Advanced Features:</p> <ul> <li>Persistent state (selected project, view preferences)</li> <li>Dark mode support with persistence</li> <li>Real-time file system watching</li> <li>Advanced analytics: heatmaps, statistics</li> <li>Keyboard shortcuts and accessibility</li> </ul>"},{"location":"how-to/tauri-app/#troubleshooting","title":"Troubleshooting","text":""},{"location":"how-to/tauri-app/#no-traces-found-or-timelinetranscripts-are-empty","title":"\"No traces found\" or Timeline/Transcripts are empty","text":"<p>This can happen if: 1. Project not set \u2014 Click \"\ud83d\udcc1 Open Project\" in the header and select your project directory 2. No traces discovered \u2014 Check that your project has Claude Code traces in <code>~/.claude/projects/</code> 3. Home directory path \u2014 If traces are in a custom location, set it in Settings \u2192 Home Directory</p> <p>For debugging, use the CLI: <pre><code>ai-blame stats  # Check what traces were found\nai-blame timeline  # See all timeline events\n</code></pre></p>"},{"location":"how-to/tauri-app/#tauri-app-wont-build","title":"Tauri app won't build","text":"<p>Ensure you have all Tauri prerequisites installed:</p> <pre><code>cargo tauri info  # Check your setup\n</code></pre> <p>Common issues:</p> <ul> <li>Linux: Missing webkit2gtk or GTK development libraries</li> <li>macOS: Xcode Command Line Tools not installed</li> <li>Windows: Missing Visual Studio C++ Build Tools</li> </ul> <p>See the Tauri prerequisites guide for platform-specific instructions.</p>"},{"location":"how-to/tauri-app/#ui-looks-broken","title":"UI looks broken","text":"<p>Try clearing the cache or rebuilding:</p> <pre><code>cd src-tauri\ncargo clean\ncargo build --release\n</code></pre>"},{"location":"how-to/tauri-app/#blocked-by-csp-errors-in-console","title":"\"Blocked by CSP\" errors in console","text":"<p>The Content Security Policy in <code>tauri.conf.json</code> restricts resource loading for security. This is normal \u2014 the app is designed to work within these constraints.</p>"},{"location":"how-to/tauri-app/#contributing-to-the-ui","title":"Contributing to the UI","text":"<p>We welcome contributions! Here are ways you can help:</p> <ol> <li>UI/UX improvements \u2014 Suggest layout changes or new features</li> <li>Frontend development \u2014 Improve HTML/CSS/JS in <code>ui/</code></li> <li>Backend commands \u2014 Implement Tauri commands in <code>src-tauri/src/main.rs</code></li> <li>Testing \u2014 Test the UI and report issues</li> <li>Documentation \u2014 Improve this guide or add tutorials</li> </ol> <p>See CONTRIBUTING.md for development setup and guidelines.</p>"},{"location":"how-to/tauri-app/#cli-vs-desktop-app","title":"CLI vs. Desktop App","text":"<p>Both the CLI and desktop app are now functional for exploring AI-assisted edits:</p> <p>Use the Desktop App for: - Visual blame exploration with details panel - Timeline view of all edits - Searching and exploring transcripts - Cross-view navigation (jump between timeline, blame, and transcripts) - Interactive exploration of AI sessions</p> <p>Use the CLI for: - Bulk operations and automation - Annotating files with provenance data - Advanced filtering and reporting - Scripting and integration with other tools - Production workflows</p> <p>Example CLI commands: <pre><code>ai-blame stats              # See available traces\nai-blame blame src/main.rs  # Show line-level blame\nai-blame timeline           # Chronological timeline\nai-blame report             # Generate a provenance report\nai-blame annotate           # Embed provenance in files\n</code></pre></p>"},{"location":"how-to/tauri-app/#see-also","title":"See Also","text":"<ul> <li>UI Prototype TODO \u2014 Detailed implementation roadmap</li> <li>UI Implementation Plan \u2014 Full architecture and design doc</li> <li>Tauri Documentation \u2014 Tauri framework documentation</li> <li>CLI Reference \u2014 Full CLI command documentation</li> <li>Configuration Guide \u2014 How to configure AI Blame behavior</li> </ul>"},{"location":"how-to/test-data/","title":"Work with Test Data","text":"<p>This guide shows how to use <code>ai-blame</code> with trace data from different locations, useful for testing or working with multiple projects.</p>"},{"location":"how-to/test-data/#the-problem","title":"The Problem","text":"<p>By default, <code>ai-blame</code> looks for traces based on your current working directory:</p> <pre><code>~/.claude/projects/-Users-you-current-project/\n</code></pre> <p>But sometimes you need to:</p> <ul> <li>Test with sample trace data</li> <li>Process traces from a different machine</li> <li>Work with traces stored in a non-standard location</li> </ul>"},{"location":"how-to/test-data/#using-dir-and-home","title":"Using <code>--dir</code> and <code>--home</code>","text":"<p>The <code>--dir</code> and <code>--home</code> options let you specify where to look for traces:</p> <pre><code># Look for traces as if you were in a different directory\nai-blame stats --dir /path/to/project\n\n# Look for traces in a different home directory\nai-blame stats --dir /path/to/project --home /other/home\n</code></pre>"},{"location":"how-to/test-data/#how-it-works","title":"How It Works","text":"<p>The trace directory is computed as:</p> <pre><code>$home/.claude/projects/&lt;encoded-dir&gt;/\n</code></pre> <p>Where <code>&lt;encoded-dir&gt;</code> is a filesystem-safe encoding of the absolute path (path separators become <code>-</code>, and punctuation like <code>.</code> may also be normalized to <code>-</code>).</p>"},{"location":"how-to/test-data/#testing-with-sample-data","title":"Testing with Sample Data","text":""},{"location":"how-to/test-data/#project-structure","title":"Project Structure","text":"<p>Set up test data like this:</p> <pre><code>tests/data/\n\u251c\u2500\u2500 .claude/\n\u2502   \u2514\u2500\u2500 projects/\n\u2502       \u2514\u2500\u2500 -Users-me-tests-data/\n\u2502           \u251c\u2500\u2500 session1.jsonl\n\u2502           \u2514\u2500\u2500 session2.jsonl\n\u251c\u2500\u2500 testdir1/\n\u2502   \u251c\u2500\u2500 foo.yaml\n\u2502   \u2514\u2500\u2500 bar.txt\n\u2514\u2500\u2500 testdir2/\n    \u2514\u2500\u2500 config.yaml\n</code></pre> <p>Note</p> <p>The encoded folder name must match the absolute path of your test data directory.</p>"},{"location":"how-to/test-data/#running-against-test-data","title":"Running Against Test Data","text":"<pre><code># From the project root\nai-blame stats --dir tests/data --home tests/data\n\n# Or with absolute paths\nai-blame stats \\\n  --dir /Users/me/project/tests/data \\\n  --home /Users/me/project/tests/data\n</code></pre>"},{"location":"how-to/test-data/#repo-local-fixtures-recommended-for-reproducible-tests","title":"Repo-local fixtures (recommended for reproducible tests)","text":"<p>If you keep synthetic/redacted fixture traces in the repo (for example under <code>tests/data/traces/</code>), prefer <code>--trace-dir</code> directly. This avoids the <code>&lt;encoded-dir&gt;</code> naming requirement (which depends on absolute paths and varies across machines):</p> <pre><code>ai-blame stats --trace-dir tests/data/traces\nai-blame report --trace-dir tests/data/traces --pattern \"src/main.rs\"\n</code></pre>"},{"location":"how-to/test-data/#repo-local-example-project-fixture-home-good-for-manual-cli-testing","title":"Repo-local example project + fixture home (good for manual CLI testing)","text":"<p>This repository also includes a small example project plus a matching \u201cfixture home\u201d that contains trace JSONLs under a <code>.claude/projects/&lt;encoded-path&gt;/</code> directory. This is useful when you want to test the real CLI path resolution logic (<code>--home</code>) without relying on your actual <code>~/.claude</code>.</p> <p>Layout:</p> <pre><code>tests/examples/\n\u251c\u2500\u2500 simple/                # Example project files\n\u2514\u2500\u2500 simple-home/           # Fixture HOME directory (contains .claude/)\n    \u2514\u2500\u2500 .claude/\n        \u2514\u2500\u2500 projects/\n            \u2514\u2500\u2500 &lt;encoded-path-for-tests/examples/simple&gt;/\n                \u251c\u2500\u2500 &lt;session&gt;.jsonl\n                \u251c\u2500\u2500 agent-&lt;...&gt;.jsonl\n                \u2514\u2500\u2500 ...\n</code></pre> <p>Run it:</p> <pre><code>cd tests/examples/simple\n\nai-blame stats --home ../simple-home\nai-blame blame main.py --home ../simple-home\nai-blame blame main.py --home ../simple-home --show-agent\nai-blame blame main.py --home ../simple-home --blocks --show-agent\n</code></pre> <p>If you need to recreate/update this fixture from a local project, you generally:</p> <ul> <li>Copy project files into <code>tests/examples/simple/</code></li> <li>Copy matching <code>~/.claude/projects/&lt;encoded-project&gt;/</code> JSONLs into   <code>tests/examples/simple-home/.claude/projects/&lt;encoded-simple&gt;/</code></li> <li>Rewrite <code>toolUseResult.filePath</code> entries so they point at the repo-local example path</li> </ul>"},{"location":"how-to/test-data/#using-trace-dir-directly","title":"Using <code>--trace-dir</code> Directly","text":"<p>If you know the exact trace directory, use <code>--trace-dir</code>:</p> <pre><code>ai-blame stats --trace-dir ~/.claude/projects/-Users-alice-other-project/\n</code></pre> <p>This overrides <code>--dir</code> and <code>--home</code>.</p>"},{"location":"reference/","title":"Command Index","text":"<p>Quick visual guide to all <code>ai-blame</code> commands. Choose your starting point below.</p>"},{"location":"reference/#command-tree","title":"Command Tree","text":"<pre><code>ai-blame\n\u251c\u2500\u2500 Setup Commands\n\u2502   \u251c\u2500\u2500 init          \u2014 Create starter configuration\n\u2502   \u2514\u2500\u2500 completions   \u2014 Generate shell tab-completion scripts\n\u2502\n\u251c\u2500\u2500 Discovery Commands\n\u2502   \u251c\u2500\u2500 stats         \u2014 Quick statistics on available traces\n\u2502   \u251c\u2500\u2500 timeline      \u2014 Chronological history of all edits\n\u2502   \u2514\u2500\u2500 transcript    \u2014 Explore AI agent sessions\n\u2502       \u251c\u2500\u2500 list      \u2014 List all transcripts\n\u2502       \u2514\u2500\u2500 view      \u2014 Display detailed transcript\n\u2502\n\u251c\u2500\u2500 Analysis Commands\n\u2502   \u2514\u2500\u2500 blame         \u2014 Line-by-line attribution\n\u2502\n\u2514\u2500\u2500 Provenance Commands\n    \u251c\u2500\u2500 report        \u2014 Preview what would be added (dry-run)\n    \u2514\u2500\u2500 annotate      \u2014 Apply provenance to files\n</code></pre>"},{"location":"reference/#task-to-command-mapping","title":"Task-to-Command Mapping","text":"<p>Find the right command for what you need to do:</p> What You Want to Do Command Documentation Set up a new project <code>init</code> Setup &amp; Configuration Enable tab completion <code>completions</code> Shell Completions Know what traces exist <code>stats</code> Trace Exploration See timeline of changes <code>timeline</code> Trace Exploration List AI sessions <code>transcript list</code> Trace Exploration Review AI conversation <code>transcript view</code> Trace Exploration Find who edited each line <code>blame</code> Line-Level Analysis Preview provenance additions <code>report</code> Provenance Annotation Add provenance to files <code>annotate</code> Provenance Annotation Speed up processing <code>--no-cache</code> or <code>--rebuild-cache</code> Performance Filter by file type <code>--pattern</code> Trace Exploration"},{"location":"reference/#common-command-workflows","title":"Common Command Workflows","text":""},{"location":"reference/#workflow-1-quick-project-overview-5-minutes","title":"Workflow 1: Quick Project Overview (5 minutes)","text":"<pre><code># Step 1: See what traces exist\nai-blame stats\n\n# Step 2: Understand project history\nai-blame timeline\n\n# Step 3: Spot-check a specific file\nai-blame blame src/main.rs --lines 1-20\n</code></pre> <p>When to use: New project, initial discovery, understanding scope Documentation: Trace Exploration</p>"},{"location":"reference/#workflow-2-explore-a-session-10-minutes","title":"Workflow 2: Explore a Session (10 minutes)","text":"<pre><code># Step 1: List all transcripts with models\nai-blame transcript list --columns SATMO\n\n# Step 2: View a specific session\nai-blame transcript view &lt;session-id&gt; --full --show-thinking\n</code></pre> <p>When to use: Understanding why specific decisions were made, reviewing AI work Documentation: Understanding Subagents</p>"},{"location":"reference/#workflow-3-annotate-your-project-15-minutes","title":"Workflow 3: Annotate Your Project (15 minutes)","text":"<pre><code># Step 1: Initialize config (first time only)\nai-blame init\n\n# Step 2: Preview what will be added\nai-blame report --initial-and-recent\n\n# Step 3: Dry-run the annotation\nai-blame annotate --initial-and-recent --dry-run\n\n# Step 4: Apply to files\nai-blame annotate --initial-and-recent\n</code></pre> <p>When to use: Ready to embed provenance history in your codebase Documentation: Provenance Annotation</p>"},{"location":"reference/#workflow-4-analyze-specific-file-5-minutes","title":"Workflow 4: Analyze Specific File (5 minutes)","text":"<pre><code># Step 1: See who edited what\nai-blame blame docs/config.yaml\n\n# Step 2: Group by model\nai-blame blame docs/config.yaml --blocks\n\n# Step 3: Focus on line range\nai-blame blame docs/config.yaml --lines 10-40\n</code></pre> <p>When to use: Debugging, code review, understanding specific changes Documentation: Line-Level Analysis</p>"},{"location":"reference/#global-options","title":"Global Options","text":"<p>These work with all commands:</p> Option Description <code>--help</code> Show help for any command <code>--version</code> Show version information <code>-d, --dir &lt;DIR&gt;</code> Target project directory (default: current directory) <code>-t, --trace-dir &lt;TRACE_DIR&gt;</code> Claude trace directory (auto-detected by default) <code>--home &lt;HOME&gt;</code> Home directory for trace lookup (default: <code>~</code>)"},{"location":"reference/#reference-documentation","title":"Reference Documentation","text":"<p>Each command has detailed documentation organized by functionality:</p> Functionality Commands When Used Setup &amp; Configuration <code>init</code> First-time project setup Trace Exploration <code>stats</code>, <code>timeline</code>, <code>transcript</code> Discovering and understanding traces Provenance Annotation <code>report</code>, <code>annotate</code> Embedding provenance in files Line-Level Analysis <code>blame</code> Understanding line-by-line attribution Performance Cache &amp; filter flags Optimizing command execution CLI Syntax Reference All commands Complete syntax and option details"},{"location":"reference/#learning-paths","title":"Learning Paths","text":""},{"location":"reference/#path-1-im-brand-new","title":"Path 1: \"I'm brand new\"","text":"<ol> <li>Read: What is ai-blame?</li> <li>Do: Quickstart</li> <li>Learn: Trace Exploration</li> </ol>"},{"location":"reference/#path-2-i-want-to-explore-traces","title":"Path 2: \"I want to explore traces\"","text":"<ol> <li>Start: Trace Exploration</li> <li>Deep dive: Understanding Subagents</li> <li>Advanced: Trace Format</li> </ol>"},{"location":"reference/#path-3-i-want-to-annotate-my-project","title":"Path 3: \"I want to annotate my project\"","text":"<ol> <li>Start: Provenance Annotation</li> <li>Configure: Configuration Guide</li> <li>Advanced: Performance</li> </ol>"},{"location":"reference/#path-4-i-want-to-analyze-changes","title":"Path 4: \"I want to analyze changes\"","text":"<ol> <li>Start: Line-Level Analysis</li> <li>Learn: How It Works</li> <li>Reference: CLI Syntax</li> </ol>"},{"location":"reference/#need-help","title":"Need Help?","text":"<ul> <li>Questions? Check FAQs</li> <li>Lost? Start with the Quickstart</li> <li>Technical details? See How It Works</li> <li>Want to contribute? See Contributing</li> </ul>"},{"location":"reference/annotation/","title":"Provenance Annotation","text":"<p>Extract provenance from AI traces and embed it in your project files.</p>"},{"location":"reference/annotation/#conceptual-model","title":"Conceptual Model","text":"<p>Provenance annotation answers the question: \"Which AI model/agent made this change, and when?\"</p> <p>The workflow has two phases:</p> <ol> <li>Preview (<code>report</code>) \u2014 See what would be added without modifying files</li> <li>Apply (<code>annotate</code>) \u2014 Actually write provenance to files (with <code>--dry-run</code> option to preview first)</li> </ol> <p>The two-step pattern lets you: - Review changes before committing - Understand filtering and output options - Dry-run with <code>--dry-run</code> flag before final application</p>"},{"location":"reference/annotation/#the-report-command-preview-only","title":"The <code>report</code> Command (Preview Only)","text":""},{"location":"reference/annotation/#what-it-does","title":"What It Does","text":"<p>Shows a stdout report summarizing what edits would be written to each file. Does not modify files.</p> <p>Perfect for exploring what provenance exists without making changes.</p>"},{"location":"reference/annotation/#command-syntax","title":"Command Syntax","text":"<pre><code>ai-blame report [OPTIONS] [TARGET]\n</code></pre>"},{"location":"reference/annotation/#basic-usage","title":"Basic Usage","text":"<p>Show all edits for all files:</p> <pre><code>ai-blame report\n</code></pre> <p>Focus on specific file:</p> <pre><code>ai-blame report config.yaml\n</code></pre> <p>Substring match on filename. Example: <code>report Asthma</code> finds <code>disease_definitions/Asthma.yaml</code>.</p>"},{"location":"reference/annotation/#options","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory for trace lookup <code>--config &lt;CONFIG&gt;</code> <code>-c</code> Auto Config file path (auto-find <code>.ai-blame.yaml</code>) <code>--initial-and-recent</code> False Only keep first and last edit per file <code>--min-change-size &lt;N&gt;</code> <code>-m</code> 0 Skip edits smaller than N characters <code>--show-all</code> False Show all YAML previews (not just first 5) <code>--pattern &lt;PATTERN&gt;</code> <code>-p</code> <code>\"\"</code> Filter files by path pattern"},{"location":"reference/annotation/#example-report-output","title":"Example: Report Output","text":"<pre><code>$ ai-blame report --initial-and-recent\n\nProcessing: disease_definitions.yaml\n\nEdits for disease_definitions.yaml:\n  [CREATED] 2025-12-01 08:03:42 UTC\n    Model: claude-opus-4-5-20251101\n    Agent: claude-code (v2.0.75)\n    Session ID: 483c7d95-6b9c-46db-afd4-3ecb6257781a\n    Files touched: 5\n\n  [EDITED] 2025-12-15 20:34:29 UTC\n    Model: claude-opus-4-5-20251101\n    Agent: claude-code (v2.1.0)\n    Session ID: 483c7d95-6b9c-46db-afd4-3ecb6257781a\n    Files touched: 3\n\nTotal edits: 2 (filtered from 8)\n</code></pre>"},{"location":"reference/annotation/#common-filtering-strategies","title":"Common Filtering Strategies","text":""},{"location":"reference/annotation/#strategy-1-keep-all-edits","title":"Strategy 1: Keep All Edits","text":"<pre><code># Default: show everything\nai-blame report\n\n# Good for: Complete audit trail\n</code></pre>"},{"location":"reference/annotation/#strategy-2-keep-only-first-and-last","title":"Strategy 2: Keep Only First and Last","text":"<pre><code>ai-blame report --initial-and-recent\n\n# Good for: High-level history, reduces clutter\n</code></pre>"},{"location":"reference/annotation/#strategy-3-skip-small-changes","title":"Strategy 3: Skip Small Changes","text":"<pre><code>ai-blame report --min-change-size 100\n\n# Good for: Ignoring typo fixes, focusing on substantial changes\n</code></pre>"},{"location":"reference/annotation/#strategy-4-combine-filters","title":"Strategy 4: Combine Filters","text":"<pre><code>ai-blame report --initial-and-recent --min-change-size 100\n\n# Good for: Minimal history with only substantial changes\n</code></pre>"},{"location":"reference/annotation/#strategy-5-focus-on-file-type","title":"Strategy 5: Focus on File Type","text":"<pre><code># Only YAML files\nai-blame report --pattern \".yaml\"\n\n# Only documentation\nai-blame report --pattern \"docs/\"\n</code></pre>"},{"location":"reference/annotation/#the-annotate-command-apply","title":"The <code>annotate</code> Command (Apply)","text":""},{"location":"reference/annotation/#what-it-does_1","title":"What It Does","text":"<p>Applies provenance to your project files according to your <code>.ai-blame.yaml</code> config:</p> <ul> <li>Sidecar mode: Creates <code>.edit_history.*</code> files alongside originals</li> <li>In-place mode: Appends <code>edit_history</code> section to YAML/JSON files</li> </ul> <p>Note: Always use <code>--dry-run</code> first to preview changes.</p>"},{"location":"reference/annotation/#command-syntax_1","title":"Command Syntax","text":"<pre><code>ai-blame annotate [OPTIONS] [TARGET]\n</code></pre>"},{"location":"reference/annotation/#basic-usage-with-preview","title":"Basic Usage (with Preview)","text":"<p>Recommended pattern:</p> <pre><code># Step 1: Preview\nai-blame annotate --dry-run\n\n# Step 2: Review output\n# (verify it looks correct)\n\n# Step 3: Apply\nai-blame annotate\n</code></pre>"},{"location":"reference/annotation/#options_1","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory for trace lookup <code>--config &lt;CONFIG&gt;</code> <code>-c</code> Auto Config file path <code>--dry-run</code> False Don't write; show what would happen <code>--initial-and-recent</code> False Only keep first and last edit <code>--min-change-size &lt;N&gt;</code> <code>-m</code> 0 Skip edits smaller than N characters <code>--pattern &lt;PATTERN&gt;</code> <code>-p</code> <code>\"\"</code> Filter files by pattern"},{"location":"reference/annotation/#example-dry-run-output","title":"Example: Dry-Run Output","text":"<pre><code>$ ai-blame annotate --dry-run\n\n[DRY RUN] Would create: disease_definitions.edit_history.yaml\n[DRY RUN] Would create: phenotypes.edit_history.yaml\n[DRY RUN] Would append to: config.yaml\n\nTotal: 3 files modified (dry-run only)\n</code></pre>"},{"location":"reference/annotation/#example-actual-output","title":"Example: Actual Output","text":"<pre><code>$ ai-blame annotate\n\n\u2713 Created: disease_definitions.edit_history.yaml\n\u2713 Created: phenotypes.edit_history.yaml\n\u2713 Appended to: config.yaml\n\nTotal: 3 files modified\n</code></pre>"},{"location":"reference/annotation/#common-workflows","title":"Common Workflows","text":""},{"location":"reference/annotation/#workflow-1-first-time-annotation","title":"Workflow 1: First-Time Annotation","text":"<p>You just ran <code>ai-blame init</code> and want to annotate your project:</p> <pre><code># Step 1: Verify config\ncat .ai-blame.yaml\n\n# Step 2: Preview all changes\nai-blame report\n\n# Step 3: Dry-run annotation\nai-blame annotate --dry-run\n\n# Step 4: Review output carefully\n\n# Step 5: Apply\nai-blame annotate\n\n# Step 6: Verify files were created/modified\nls -la\ngit status\n</code></pre>"},{"location":"reference/annotation/#workflow-2-selective-annotation-yaml-only","title":"Workflow 2: Selective Annotation (YAML Only)","text":"<p>You only want to annotate YAML files:</p> <pre><code># Preview YAML annotations only\nai-blame report --pattern \".yaml\"\n\n# Dry-run for YAML\nai-blame annotate --pattern \".yaml\" --dry-run\n\n# Apply to YAML\nai-blame annotate --pattern \".yaml\"\n</code></pre>"},{"location":"reference/annotation/#workflow-3-minimal-history-first-last-only","title":"Workflow 3: Minimal History (First &amp; Last Only)","text":"<p>You want only the creation and most recent edit:</p> <pre><code># Preview minimal history\nai-blame report --initial-and-recent\n\n# Dry-run\nai-blame annotate --initial-and-recent --dry-run\n\n# Apply\nai-blame annotate --initial-and-recent\n</code></pre>"},{"location":"reference/annotation/#workflow-4-incremental-updates","title":"Workflow 4: Incremental Updates","text":"<p>You've already annotated once and ran more sessions:</p> <pre><code># See new/updated edits\nai-blame report\n\n# Preview changes only\nai-blame annotate --dry-run\n\n# Apply updates\nai-blame annotate\n</code></pre>"},{"location":"reference/annotation/#understanding-output-modes","title":"Understanding Output Modes","text":""},{"location":"reference/annotation/#sidecar-mode","title":"Sidecar Mode","text":"<p>Configuration: <pre><code>output:\n  mode: sidecar\n</code></pre></p> <p>What happens:</p> <p>For each file <code>document.yaml</code>:</p> <ul> <li>Original stays: <code>document.yaml</code> (unchanged)</li> <li>History added: <code>document.edit_history.yaml</code> (NEW)</li> </ul> <p>Content of <code>document.edit_history.yaml</code>:</p> <pre><code># Provenance history for document.yaml\nedits:\n  - timestamp: 2025-12-01 08:03:42 UTC\n    action: CREATED\n    model: claude-opus-4-5-20251101\n    agent: claude-code (v2.0.75)\n    session_id: 483c7d95-6b9c-46db-afd4-3ecb6257781a\n\n  - timestamp: 2025-12-15 20:34:29 UTC\n    action: EDITED\n    model: claude-opus-4-5-20251101\n    agent: claude-code (v2.1.0)\n    session_id: 483c7d95-6b9c-46db-afd4-3ecb6257781a\n</code></pre> <p>Pros: - Original files untouched - Works with any file type - Easy to review separately</p> <p>Cons: - Creates extra files - Requires custom viewer to see history alongside data</p>"},{"location":"reference/annotation/#in-place-mode","title":"In-Place Mode","text":"<p>Configuration: <pre><code>output:\n  mode: in-place\n</code></pre></p> <p>What happens:</p> <p>For YAML/JSON files, appends <code>edit_history</code> section directly.</p> <p>Before: <pre><code>name: Disease Definitions\nversion: 1.0.0\ndefinitions:\n  - name: Asthma\n    code: J45.9\n</code></pre></p> <p>After: <pre><code>name: Disease Definitions\nversion: 1.0.0\ndefinitions:\n  - name: Asthma\n    code: J45.9\n\nedit_history:\n  - timestamp: 2025-12-01 08:03:42 UTC\n    action: CREATED\n    model: claude-opus-4-5-20251101\n    agent: claude-code (v2.0.75)\n\n  - timestamp: 2025-12-15 20:34:29 UTC\n    action: EDITED\n    model: claude-opus-4-5-20251101\n    agent: claude-code (v2.1.0)\n</code></pre></p> <p>Pros: - All info in one file - Self-documenting - No extra files</p> <p>Cons: - Modifies data files - Only works for YAML/JSON - History is part of data</p>"},{"location":"reference/annotation/#edge-cases-tips","title":"Edge Cases &amp; Tips","text":""},{"location":"reference/annotation/#case-1-file-not-found","title":"Case 1: File Not Found","text":"<p>If <code>ai-blame report file.yaml</code> finds nothing:</p> <pre><code># Verify file exists\nls file.yaml\n\n# Check if traces mention this file\nai-blame stats\n\n# Try with full pattern\nai-blame report --pattern \"file.yaml\"\n</code></pre>"},{"location":"reference/annotation/#case-2-no-edits-for-file","title":"Case 2: No Edits for File","text":"<p>If a file doesn't appear in report output:</p> <ul> <li>No traces mention this file, OR</li> <li>Traces reference file but didn't modify it (e.g., only read)</li> </ul> <p>This is normal\u2014files are only annotated if there are edits.</p>"},{"location":"reference/annotation/#case-3-dry-run-shows-nothing-but-report-shows-edits","title":"Case 3: Dry-Run Shows Nothing but report Shows Edits","text":"<pre><code># This shouldn't happen, but if it does:\n# Check that .ai-blame.yaml exists and is readable\n\ncat .ai-blame.yaml\n\n# Verify patterns include your files\nai-blame report --pattern \".yaml\"\n\n# Force rebuild cache\nai-blame report --rebuild-cache\n</code></pre>"},{"location":"reference/annotation/#case-4-want-to-re-annotate","title":"Case 4: Want to Re-Annotate","text":"<p>If you run <code>annotate</code> twice:</p> <pre><code># First run\nai-blame annotate\n\n# Second run (re-runs same annotations)\nai-blame annotate\n</code></pre> <p>Behavior depends on mode:</p> <ul> <li>Sidecar mode: Overwrites existing <code>.edit_history.*</code> files</li> <li>In-place mode: Appends again (may create duplicates)</li> </ul> <p>To avoid duplicates in in-place mode, don't re-run on the same data.</p>"},{"location":"reference/annotation/#common-mistakes","title":"Common Mistakes","text":""},{"location":"reference/annotation/#mistake-1-running-annotate-without-dry-run-first","title":"\u274c Mistake 1: Running <code>annotate</code> without <code>--dry-run</code> first","text":"<p>Problem: Unexpected changes to files</p> <p>Solution: <pre><code># Always preview first\nai-blame annotate --dry-run\n\n# Review output\n\n# Then apply\nai-blame annotate\n</code></pre></p>"},{"location":"reference/annotation/#mistake-2-forgetting-to-configure-ai-blameyaml","title":"\u274c Mistake 2: Forgetting to configure <code>.ai-blame.yaml</code>","text":"<p>Problem: Wrong files annotated, or files skipped</p> <p>Solution: <pre><code># After init, review and edit config\ncat .ai-blame.yaml\n\n# Verify patterns match your project\nai-blame report\n</code></pre></p>"},{"location":"reference/annotation/#mistake-3-annotating-before-traces-are-discovered","title":"\u274c Mistake 3: Annotating before traces are discovered","text":"<p>Problem: Empty reports, nothing annotated</p> <p>Solution: <pre><code># First verify traces exist\nai-blame stats\n\n# Then annotate\nai-blame report\n</code></pre></p>"},{"location":"reference/annotation/#mistake-4-using-wrong-trace-directory","title":"\u274c Mistake 4: Using wrong trace directory","text":"<p>Problem: Reports show no edits or wrong edits</p> <p>Solution: <pre><code># Specify trace directory explicitly\nai-blame report --trace-dir ~/.claude/projects/-Users-alice-project/\n\n# Or verify default location\nls ~/.claude/projects/\n</code></pre></p>"},{"location":"reference/annotation/#integration-with-git","title":"Integration with Git","text":""},{"location":"reference/annotation/#commit-provenance-files","title":"Commit Provenance Files","text":"<p>After annotation, commit the new files:</p> <pre><code>git add .ai-blame.yaml\ngit add *.edit_history.*  # sidecar mode\ngit add .                # or in-place mode (modifies files)\ngit commit -m \"Add provenance annotation\"\ngit push\n</code></pre>"},{"location":"reference/annotation/#review-in-pr","title":"Review in PR","text":"<p>If adding provenance in a PR:</p> <pre><code># Preview changes\nai-blame annotate --dry-run\n\n# Commit\nai-blame annotate\ngit add .\ngit commit\n\n# Push PR\n</code></pre> <p>Reviewers can see exactly what was added.</p>"},{"location":"reference/annotation/#performance-notes","title":"Performance Notes","text":"<ul> <li><code>report</code> is fast\u2014just reads metadata, doesn't process full traces</li> <li><code>annotate --dry-run</code> is fast\u2014no file writes</li> <li><code>annotate</code> (actual application) is fast\u2014trace parsing is cached</li> </ul> <p>For large projects with many traces:</p> <pre><code># Speed up by using --min-change-size to filter\nai-blame report --min-change-size 100\n\n# Or focus on specific files\nai-blame report --pattern \"docs/\"\n</code></pre>"},{"location":"reference/annotation/#related-topics","title":"Related Topics","text":"<ul> <li>Setup &amp; Configuration \u2014 Creating and configuring <code>.ai-blame.yaml</code></li> <li>Trace Exploration \u2014 Understanding what traces are available</li> <li>Configuration Guide \u2014 Deep config option reference</li> <li>Performance \u2014 Optimizing annotation runs</li> <li>CLI Reference: report \u2014 Complete syntax</li> <li>CLI Reference: annotate \u2014 Complete syntax</li> </ul>"},{"location":"reference/annotation/#next-steps","title":"Next Steps","text":"<p>After annotation, you can:</p> <ol> <li>Review what was added: <code>git diff</code> or view <code>.edit_history.*</code> files</li> <li>Commit: <code>git add</code> and <code>git commit</code></li> <li>Explore in detail: Trace Exploration for specific session details</li> <li>Analyze blame: Line-Level Analysis for per-line attribution</li> </ol> <p>Start with Trace Exploration to understand what traces are available before annotating.</p>"},{"location":"reference/blame-analysis/","title":"Line-Level Analysis","text":"<p>Understand which AI model contributed each line of a file using line-by-line blame.</p>"},{"location":"reference/blame-analysis/#conceptual-model","title":"Conceptual Model","text":"<p>The <code>blame</code> command answers: \"Who wrote this line? Which model/agent?\"</p> <p>Like <code>git blame</code>, but for AI-assisted edits:</p> <pre><code>     1  claude-opus-4-5    def process_data(input: str):\n     2  claude-opus-4-5        items = parse_input(input)\n     3  claude-opus-4-5\n     4  claude-3-5-sonnet      return items\n</code></pre> <p>Each line shows which AI model created or last modified it.</p>"},{"location":"reference/blame-analysis/#the-blame-command","title":"The <code>blame</code> Command","text":""},{"location":"reference/blame-analysis/#what-it-does","title":"What It Does","text":"<p>Shows git-blame-style line-by-line attribution for a file. Each line displays:</p> <ul> <li>Line number</li> <li>Model that created/last-edited this line</li> <li>Line content</li> </ul>"},{"location":"reference/blame-analysis/#command-syntax","title":"Command Syntax","text":"<pre><code>ai-blame blame [OPTIONS] &lt;FILE&gt;\n</code></pre>"},{"location":"reference/blame-analysis/#basic-usage","title":"Basic Usage","text":"<p>Blame an entire file:</p> <pre><code>ai-blame blame src/main.rs\n</code></pre> <p>Focus on specific lines:</p> <pre><code>ai-blame blame src/main.rs --lines 10-20\n</code></pre> <p>Group by model (blocks):</p> <pre><code>ai-blame blame src/main.rs --blocks\n</code></pre>"},{"location":"reference/blame-analysis/#arguments","title":"Arguments","text":"Argument Description <code>FILE</code> File to show blame for (path relative to cwd, or absolute)"},{"location":"reference/blame-analysis/#options","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory for trace lookup <code>--lines &lt;N-M&gt;</code> Restrict output to a line range like <code>\"10-20\"</code> <code>--blocks</code> False Show block boundaries (consecutive same-model lines)"},{"location":"reference/blame-analysis/#understanding-blame-output","title":"Understanding Blame Output","text":""},{"location":"reference/blame-analysis/#default-output-line-by-line","title":"Default Output (Line-by-Line)","text":"<pre><code>$ ai-blame blame src/main.rs\n\n     1  claude-opus-4-5    fn process_data(input: &amp;str) -&gt; Result&lt;Vec&lt;Item&gt;&gt; {\n     2  claude-opus-4-5        let items = parse_input(input)?;\n     3  claude-opus-4-5\n     4  claude-opus-4-5        items.iter()\n     5  claude-opus-4-5            .filter(|item| item.is_valid())\n     6  claude-3-5-sonnet       .map(|item| transform(item))\n     7  claude-3-5-sonnet       .collect()\n     8  claude-opus-4-5    }\n</code></pre> <p>Interpretation: - Lines 1-5: Created by <code>claude-opus-4-5</code> - Lines 6-7: Last modified by <code>claude-3-5-sonnet</code> - Line 8: <code>claude-opus-4-5</code></p> <p>Why line 6 is different: Maybe <code>claude-3-5-sonnet</code> optimized the <code>.map()</code> in a later session.</p>"},{"location":"reference/blame-analysis/#block-mode-output","title":"Block Mode Output","text":"<p>Group consecutive lines from the same model:</p> <pre><code>$ ai-blame blame src/main.rs --blocks\n\nBlock 1: claude-opus-4-5 (lines 1-5)\n     1  fn process_data(input: &amp;str) -&gt; Result&lt;Vec&lt;Item&gt;&gt; {\n     2      let items = parse_input(input)?;\n     3\n     4      items.iter()\n     5          .filter(|item| item.is_valid())\n\nBlock 2: claude-3-5-sonnet (lines 6-7)\n     6          .map(|item| transform(item))\n     7          .collect()\n\nBlock 3: claude-opus-4-5 (line 8)\n     8  }\n</code></pre> <p>Better for: Seeing at a glance which models worked on different sections.</p>"},{"location":"reference/blame-analysis/#common-patterns-interpretation","title":"Common Patterns &amp; Interpretation","text":""},{"location":"reference/blame-analysis/#pattern-1-single-model-throughout","title":"Pattern 1: Single Model Throughout","text":"<pre><code>     1  claude-opus-4-5    def function():\n     2  claude-opus-4-5        result = calculate()\n     3  claude-opus-4-5        return result\n</code></pre> <p>Interpretation: One session, one model created entire function.</p>"},{"location":"reference/blame-analysis/#pattern-2-mixed-models-edits","title":"Pattern 2: Mixed Models (Edits)","text":"<pre><code>     1  claude-opus-4-5    def function():\n     2  claude-3-5-sonnet      result = calculate()\n     3  claude-opus-4-5        return result\n</code></pre> <p>Interpretation: Opus created it, Sonnet optimized line 2 later, Opus added return.</p> <p>Why? Different sessions, different models. Maybe one session was exploratory (Opus), another optimized (Sonnet).</p>"},{"location":"reference/blame-analysis/#pattern-3-blank-lines","title":"Pattern 3: Blank Lines","text":"<pre><code>     5  claude-opus-4-5\n     6  claude-opus-4-5\n     7  claude-3-5-sonnet\n</code></pre> <p>Blank lines are attributed to whoever created them.</p>"},{"location":"reference/blame-analysis/#pattern-4-comments-vs-code","title":"Pattern 4: Comments vs Code","text":"<pre><code>    20  claude-opus-4-5    # This function processes data\n    21  claude-opus-4-5    def process(data):\n    22  claude-3-5-sonnet      return data * 2\n</code></pre> <p>Interpretation: Opus wrote comment + function signature, Sonnet optimized implementation.</p>"},{"location":"reference/blame-analysis/#blame-workflows","title":"Blame Workflows","text":""},{"location":"reference/blame-analysis/#workflow-1-understand-a-file-2-minutes","title":"Workflow 1: Understand a File (2 minutes)","text":"<p>Quick overview of who did what:</p> <pre><code># See who touched which parts\nai-blame blame config.yaml --blocks\n\n# Output shows: blocks of contributions by model\n# Tells you: \"Opus created structure, Sonnet tweaked values\"\n</code></pre>"},{"location":"reference/blame-analysis/#workflow-2-investigate-specific-lines-1-minute","title":"Workflow 2: Investigate Specific Lines (1 minute)","text":"<p>Focus on a problem area:</p> <pre><code># Line 42 looks wrong. Who wrote it?\nai-blame blame src/main.rs --lines 40-45\n\n# Output shows model that created line 42\n# Follow up: `ai-blame transcript view &lt;session-id&gt;`\n</code></pre>"},{"location":"reference/blame-analysis/#workflow-3-code-review-preparation","title":"Workflow 3: Code Review Preparation","text":"<p>Before reviewing AI-contributed code:</p> <pre><code># Understand contribution distribution\nai-blame blame docs/config.yaml --blocks\n\n# See which models contributed\n# Plan review: \"Sonnet handled structure, Opus handled values\"\n</code></pre>"},{"location":"reference/blame-analysis/#workflow-4-debugging-mixed-model-files","title":"Workflow 4: Debugging Mixed-Model Files","text":"<p>When multiple models edited the same file:</p> <pre><code># Show all contributions\nai-blame blame src/script.py\n\n# Identify sections to review\n# Think: \"Why did Sonnet change lines 15-20 after Opus created 1-14?\"\n\n# For details, explore transcript\nai-blame transcript list --columns SATMO\nai-blame transcript view &lt;session-that-modified-15-20&gt;\n</code></pre>"},{"location":"reference/blame-analysis/#advanced-usage","title":"Advanced Usage","text":""},{"location":"reference/blame-analysis/#focus-on-line-range","title":"Focus on Line Range","text":"<p>Show only lines 10-40:</p> <pre><code>ai-blame blame src/main.rs --lines 10-40\n</code></pre> <p>Useful for: - Large files (focus on problem area) - Code review (check specific function) - Debugging (investigate specific lines)</p>"},{"location":"reference/blame-analysis/#range-syntax","title":"Range Syntax","text":"<pre><code># Single line\nai-blame blame file.py --lines 5-5\n\n# Range\nai-blame blame file.py --lines 1-50\n\n# From start to line\nai-blame blame file.py --lines 1-100\n\n# Invalid (shows error)\nai-blame blame file.py --lines 20-10  # Error: end &lt; start\n</code></pre>"},{"location":"reference/blame-analysis/#interpret-model-names","title":"Interpret Model Names","text":"<p>Model names in blame output follow this pattern:</p> <ul> <li><code>claude-opus-4-5-20251101</code> \u2192 claude-opus-4-5 (displayed short)</li> <li><code>claude-3-5-sonnet-20241022</code> \u2192 claude-3-5-sonnet (short form)</li> <li><code>claude-haiku-3-20240307</code> \u2192 claude-haiku (short form)</li> <li><code>gpt-4-turbo-20240409</code> \u2192 gpt-4-turbo (Copilot/Codex)</li> </ul> <p>Display shows the short form for readability.</p>"},{"location":"reference/blame-analysis/#combining-blame-with-other-commands","title":"Combining Blame with Other Commands","text":""},{"location":"reference/blame-analysis/#find-who-edited-a-line-then-explore","title":"Find Who Edited a Line, Then Explore","text":"<pre><code># Step 1: See line 42 is by claude-3-5-sonnet\nai-blame blame src/main.rs --lines 42-42\n\n# Step 2: List sessions that used that model\nai-blame transcript list --columns SATMO\n\n# Step 3: View specific session for context\nai-blame transcript view &lt;session-id&gt; --full --show-thinking\n</code></pre>"},{"location":"reference/blame-analysis/#timeline-blame-multi-step-story","title":"Timeline + Blame (Multi-Step Story)","text":"<pre><code># Step 1: See when file was created/edited\nai-blame timeline --pattern \"config.yaml\"\n# Output: Created Dec 1 by claude-opus-4-5\n#         Edited Dec 15 by claude-3-5-sonnet\n\n# Step 2: Check blame to see which lines changed\nai-blame blame config.yaml --blocks\n# Output: Shows lines edited in Dec 15 session\n\n# Step 3: View Dec 15 session for context\nai-blame transcript list --columns SATMO\nai-blame transcript view &lt;dec-15-session&gt;\n</code></pre>"},{"location":"reference/blame-analysis/#report-blame-full-provenance","title":"Report + Blame (Full Provenance)","text":"<pre><code># Step 1: See edit summary\nai-blame report config.yaml\n# Output: Created Dec 1, Edited Dec 15\n\n# Step 2: See line-level details\nai-blame blame config.yaml\n# Output: Which lines by which model\n\n# Step 3: Annotate (embed provenance)\nai-blame annotate config.yaml\n# Creates: config.edit_history.yaml\n</code></pre>"},{"location":"reference/blame-analysis/#edge-cases","title":"Edge Cases","text":""},{"location":"reference/blame-analysis/#case-1-file-not-in-traces","title":"Case 1: File Not in Traces","text":"<pre><code>$ ai-blame blame unknown.py\n\nError: File 'unknown.py' not found in traces.\n</code></pre> <p>Solution: Verify file was actually edited by Claude: <pre><code>ai-blame timeline --pattern \"unknown\"\nai-blame stats --pattern \"unknown\"\n</code></pre></p>"},{"location":"reference/blame-analysis/#case-2-entirely-unmodified-file","title":"Case 2: Entirely Unmodified File","text":"<p>If a file appears in project but no traces mention it:</p> <pre><code># File exists but blame finds nothing\nai-blame blame docs/README.md\n\nError: No edit history found for docs/README.md\n</code></pre> <p>Why? Traces don't mention this file (maybe only created manually, not via Claude).</p>"},{"location":"reference/blame-analysis/#case-3-large-file-with-many-models","title":"Case 3: Large File with Many Models","text":"<p>For files with complex history:</p> <pre><code># First: see block structure\nai-blame blame app.py --blocks\n\n# Then: focus on one section\nai-blame blame app.py --lines 100-150\n</code></pre>"},{"location":"reference/blame-analysis/#case-4-single-line-range","title":"Case 4: Single-Line Range","text":"<pre><code># Check who created line 42\nai-blame blame config.yaml --lines 42-42\n\n# Output: Shows only line 42 with model\n</code></pre>"},{"location":"reference/blame-analysis/#interpreting-models-in-blame","title":"Interpreting Models in Blame","text":""},{"location":"reference/blame-analysis/#why-different-models","title":"Why Different Models?","text":"<p>Files can have multiple models when:</p> <ol> <li>Multiple sessions: First session used Opus, second used Sonnet</li> <li>Edits across time: Early versions Opus, later optimizations Sonnet</li> <li>Subagents: Main session Opus, subagent optimization Haiku</li> <li>Copilot integration: GitHub Copilot uses different models than Claude</li> </ol>"},{"location":"reference/blame-analysis/#what-to-look-for","title":"What to Look For","text":"<p>Consistent single model: Likely single session, iterative refinement.</p> <p>Multiple models: Different sessions, different agents, or tools. Review sessions to understand context.</p> <p>Model downgrade (Opus\u2192Haiku): Likely subagent work (fast tasks) vs main session (complex planning).</p> <p>Model upgrade (Haiku\u2192Opus): Unlikely but indicates intervention for difficult section.</p>"},{"location":"reference/blame-analysis/#blame-limitations","title":"Blame Limitations","text":""},{"location":"reference/blame-analysis/#what-blame-cant-tell-you","title":"What Blame Can't Tell You","text":"<ul> <li>Why a line was written (context is in transcript)</li> <li>When exactly (only which session, not timestamp)</li> <li>What was changed in later edits (shows current version)</li> <li>Previous versions (only shows current file state)</li> </ul>"},{"location":"reference/blame-analysis/#for-these-use-other-commands","title":"For These, Use Other Commands","text":"<pre><code># For context/reasoning: transcript view\nai-blame transcript view &lt;session-id&gt; --show-thinking\n\n# For timestamps: timeline\nai-blame timeline\n\n# For edit history: report\nai-blame report &lt;file&gt;\n\n# For previous versions: git log (if version-controlled)\ngit log &lt;file&gt;\n</code></pre>"},{"location":"reference/blame-analysis/#tips-best-practices","title":"Tips &amp; Best Practices","text":""},{"location":"reference/blame-analysis/#tip-1-use-blocks-for-overview","title":"Tip 1: Use Blocks for Overview","text":"<p>Always start with <code>--blocks</code> for large files:</p> <pre><code>ai-blame blame large_file.py --blocks\n# Easier to see: \"First half Opus, second half Sonnet\"\n</code></pre>"},{"location":"reference/blame-analysis/#tip-2-combine-with-transcript","title":"Tip 2: Combine with Transcript","text":"<p>When you see unexpected model:</p> <pre><code>ai-blame blame config.yaml\n# Notice: line 15 is claude-3-5-sonnet (unexpected)\n\nai-blame transcript list --columns SATMO\n# Find session that used Sonnet\n\nai-blame transcript view &lt;session-id&gt; --full\n# Understand: why Sonnet? What was the task?\n</code></pre>"},{"location":"reference/blame-analysis/#tip-3-focus-on-lines-before-review","title":"Tip 3: Focus on Lines Before Review","text":"<p>Don't blame entire file if it's huge:</p> <pre><code># Bad: huge output\nai-blame blame app.py\n\n# Good: focused\nai-blame blame app.py --lines 100-150\nai-blame blame app.py --blocks\n</code></pre>"},{"location":"reference/blame-analysis/#tip-4-verify-models-match-expectations","title":"Tip 4: Verify Models Match Expectations","text":"<p>Before trusting blame output:</p> <pre><code># Check if expected models created traces\nai-blame transcript list --columns SATMO\n\n# Verify models match your expectation\n# (e.g., \"Claude Code should use claude-opus-4-5\")\n</code></pre>"},{"location":"reference/blame-analysis/#troubleshooting","title":"Troubleshooting","text":""},{"location":"reference/blame-analysis/#file-not-found-in-traces","title":"\"File not found in traces\"","text":"<pre><code># Verify file exists locally\nls config.yaml\n\n# Check if traces mention it\nai-blame timeline --pattern \"config.yaml\"\n\n# Verify correct directory\nai-blame stats\n</code></pre>"},{"location":"reference/blame-analysis/#no-edit-history-found","title":"\"No edit history found\"","text":"<p>File exists locally but wasn't edited in traces:</p> <pre><code># Was it created before traces started?\ngit log config.yaml  # Check git history\n\n# Was it edited by Claude?\nai-blame timeline\nai-blame stats\n</code></pre>"},{"location":"reference/blame-analysis/#output-looks-truncated","title":"Output looks truncated","text":"<p>Shouldn't happen, but if it does:</p> <pre><code># Try with explicit line range\nai-blame blame config.yaml --lines 1-100\n\n# Force rebuild\nai-blame blame config.yaml --rebuild-cache\n</code></pre>"},{"location":"reference/blame-analysis/#related-topics","title":"Related Topics","text":"<ul> <li>Trace Exploration \u2014 Understanding available traces and sessions</li> <li>Provenance Annotation \u2014 Embedding blame info in your files</li> <li>How It Works \u2014 How blame is computed</li> <li>CLI Reference: blame \u2014 Complete syntax reference</li> </ul>"},{"location":"reference/blame-analysis/#next-steps","title":"Next Steps","text":"<p>After analyzing blame:</p> <ol> <li>Annotate: Embed findings in files with Provenance Annotation</li> <li>Explore: Understand context with Trace Exploration</li> <li>Understand: Learn the system with How It Works</li> </ol> <p>For specific session details, use <code>ai-blame transcript view &lt;session-id&gt;</code> to see reasoning and decisions.</p>"},{"location":"reference/cli/","title":"CLI Syntax Reference","text":"<p>Complete command syntax and options reference for <code>ai-blame</code>.</p> <p>Note: This is a syntax reference. For conceptual guides and workflows, see:</p> <ul> <li>Command Index \u2014 Visual overview of all commands</li> <li>Setup &amp; Configuration \u2014 <code>init</code> command deep-dive</li> <li>Provenance Annotation \u2014 <code>report</code> and <code>annotate</code> workflow</li> <li>Trace Exploration \u2014 <code>stats</code>, <code>timeline</code>, and <code>transcript</code> commands</li> <li>Line-Level Analysis \u2014 <code>blame</code> command details</li> <li>Performance \u2014 Caching and optimization strategies</li> </ul>"},{"location":"reference/cli/#global-options","title":"Global Options","text":"<p>These options are available for all commands:</p> Option Description <code>--help</code> Show help message and exit <code>--version</code> Show version and exit"},{"location":"reference/cli/#commands","title":"Commands","text":""},{"location":"reference/cli/#ai-blame-init","title":"<code>ai-blame init</code>","text":"<p>Create a starter <code>.ai-blame.yaml</code> config file.</p> <p>\u2192 Full Guide \u2014 Configuration options, flavors, setup workflows</p> <pre><code>ai-blame init [OPTIONS]\n</code></pre>"},{"location":"reference/cli/#options","title":"Options","text":"Option Short Default Description <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Directory to write <code>.ai-blame.yaml</code> into <code>--flavor &lt;sidecar\\|in-place&gt;</code> <code>sidecar</code> Config template flavor <code>--force</code> False Overwrite an existing <code>.ai-blame.yaml</code>"},{"location":"reference/cli/#examples","title":"Examples","text":"<pre><code># Create a starter config (sidecar mode: minimizes edits to existing files)\nai-blame init\n\n# Prefer in-place annotations when possible\nai-blame init --flavor in-place\n\n# Overwrite an existing config\nai-blame init --force\n</code></pre> <p>File writes</p> <p><code>ai-blame init</code> writes only <code>.ai-blame.yaml</code>. <code>ai-blame annotate</code> will write to project files unless you pass <code>--dry-run</code>.</p>"},{"location":"reference/cli/#ai-blame-report","title":"<code>ai-blame report</code>","text":"<p>Write a stdout report summarizing curation history (no filesystem changes).</p> <p>\u2192 Full Guide \u2014 Filtering strategies, interpreting output, workflows</p> <pre><code>ai-blame report [OPTIONS] [TARGET]\n</code></pre>"},{"location":"reference/cli/#arguments","title":"Arguments","text":"Argument Description <code>TARGET</code> Optional. Filter results to files matching this name (e.g., <code>Asthma.yaml</code>)"},{"location":"reference/cli/#options_1","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory (overrides <code>--dir</code> and <code>--home</code>) <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory where <code>.claude/</code> lives <code>--config &lt;CONFIG&gt;</code> <code>-c</code> Auto Config file path (auto-find <code>.ai-blame.yaml</code> if present) <code>--initial-and-recent</code> False Only keep first and last edit per file <code>--min-change-size &lt;N&gt;</code> <code>-m</code> 0 Skip intermediate edits smaller than N chars <code>--show-all</code> False Show all YAML previews (not just first 5) <code>--pattern &lt;PATTERN&gt;</code> <code>-p</code> <code>\"\"</code> Filter files by path pattern"},{"location":"reference/cli/#examples_1","title":"Examples","text":"<pre><code># Report for current directory\nai-blame report\n\n# Report with initial+recent filter\nai-blame report --initial-and-recent\n\n# Filter to YAML files only\nai-blame report --pattern \".yaml\"\n\n# Process specific file (substring match on path)\nai-blame report config.yaml\n\n# Use explicit trace directory\nai-blame report -t ~/.claude/projects/-Users-me-other-project/\n\n# Use different project directory\nai-blame report --dir /path/to/project\n\n# Use custom config\nai-blame report --config /path/to/.ai-blame.yaml\n</code></pre>"},{"location":"reference/cli/#ai-blame-annotate","title":"<code>ai-blame annotate</code>","text":"<p>Annotate files or write sidecars/comments using output rules (writes by default).</p> <p>\u2192 Full Guide \u2014 Workflows, modes, best practices, common mistakes</p> <pre><code>ai-blame annotate [OPTIONS] [TARGET]\n</code></pre>"},{"location":"reference/cli/#arguments_1","title":"Arguments","text":"Argument Description <code>TARGET</code> Optional. Filter results to files matching this name (e.g., <code>Asthma.yaml</code>)"},{"location":"reference/cli/#options_2","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory (overrides <code>--dir</code> and <code>--home</code>) <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory where <code>.claude/</code> lives <code>--config &lt;CONFIG&gt;</code> <code>-c</code> Auto Config file path (auto-find <code>.ai-blame.yaml</code> if present) <code>--dry-run</code> False Don't write anything; print what would happen <code>--initial-and-recent</code> False Only keep first and last edit per file <code>--min-change-size &lt;N&gt;</code> <code>-m</code> 0 Skip intermediate edits smaller than N chars <code>--pattern &lt;PATTERN&gt;</code> <code>-p</code> <code>\"\"</code> Filter files by path pattern"},{"location":"reference/cli/#examples_2","title":"Examples","text":"<pre><code># Apply annotations for current directory\nai-blame annotate\n\n# Dry run (no writes)\nai-blame annotate --dry-run --initial-and-recent\n\n# Filter to YAML files only\nai-blame annotate --pattern \".yaml\"\n\n# Process specific file (substring match on path)\nai-blame annotate config.yaml\n\n# Use custom config\nai-blame annotate --config /path/to/.ai-blame.yaml\n</code></pre>"},{"location":"reference/cli/#ai-blame-stats","title":"<code>ai-blame stats</code>","text":"<p>Show statistics about available traces.</p> <p>\u2192 Full Guide \u2014 Interpreting statistics, common patterns</p> <pre><code>ai-blame stats [OPTIONS]\n</code></pre>"},{"location":"reference/cli/#options_3","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory where <code>.claude/</code> lives <code>--pattern &lt;PATTERN&gt;</code> <code>-p</code> <code>\"\"</code> Filter files by path pattern"},{"location":"reference/cli/#examples_3","title":"Examples","text":"<pre><code># Stats for current directory\nai-blame stats\n\n# Stats for specific project\nai-blame stats --dir /path/to/project\n\n# Stats for YAML files only\nai-blame stats --pattern \".yaml\"\n</code></pre>"},{"location":"reference/cli/#ai-blame-timeline","title":"<code>ai-blame timeline</code>","text":"<p>Show a chronological timeline of all file modifications from AI traces.</p> <p>\u2192 Full Guide \u2014 Understanding timeline, filtering strategies</p> <pre><code>ai-blame timeline [OPTIONS]\n</code></pre>"},{"location":"reference/cli/#options_4","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory where <code>.claude/</code> lives <code>--pattern &lt;PATTERN&gt;</code> <code>-p</code> <code>\"\"</code> Filter files by path pattern"},{"location":"reference/cli/#examples_4","title":"Examples","text":"<pre><code># Show timeline for current directory\nai-blame timeline\n\n# Timeline for YAML files only\nai-blame timeline --pattern \".yaml\"\n\n# Timeline for specific project\nai-blame timeline --dir /path/to/project\n</code></pre>"},{"location":"reference/cli/#output","title":"Output","text":"<p>Timeline displays all file modifications in chronological order with: - Timestamp (UTC) - Action (CREATED, EDITED, DELETED) - File path - Model used - Session/agent information</p>"},{"location":"reference/cli/#ai-blame-blame","title":"<code>ai-blame blame</code>","text":"<p>Show git-blame-like line (and optional block) attribution for a file in the current working tree.</p> <p>\u2192 Full Guide \u2014 Interpreting output, combining with other commands, edge cases</p> <pre><code>ai-blame blame [OPTIONS] &lt;FILE&gt;\n</code></pre>"},{"location":"reference/cli/#arguments_2","title":"Arguments","text":"Argument Description <code>FILE</code> File to show blame for (path relative to cwd, or absolute)"},{"location":"reference/cli/#options_5","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory (overrides <code>--dir</code> and <code>--home</code>) <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory where <code>.claude/</code> lives <code>--lines &lt;N-M&gt;</code> Restrict output to a line range like <code>\"10-20\"</code> <code>--blocks</code> False Show block boundaries (consecutive lines attributed to the same event)"},{"location":"reference/cli/#examples_5","title":"Examples","text":"<pre><code>ai-blame blame src/main.rs\nai-blame blame src/main.rs --lines 10-40\nai-blame blame src/main.rs --blocks\n</code></pre>"},{"location":"reference/cli/#ai-blame-transcript-list","title":"<code>ai-blame transcript list</code>","text":"<p>List all transcripts from Claude Code and Codex sessions in the trace directory.</p> <p>\u2192 Full Guide \u2014 Column layouts, filtering, understanding session IDs</p> <pre><code>ai-blame transcript list [OPTIONS]\n</code></pre>"},{"location":"reference/cli/#options_6","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory (overrides <code>--dir</code> and <code>--home</code>) <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory where <code>.claude/</code> lives <code>--limit &lt;N&gt;</code> <code>-n</code> 20 Show N most recent transcripts (0 for all) <code>--format &lt;table\\|json&gt;</code> <code>table</code> Output format <code>--columns &lt;SPEC&gt;</code> SATM Column layout (see below)"},{"location":"reference/cli/#column-layout-specification","title":"Column Layout Specification","text":"<p>Use <code>--columns</code> to customize which columns appear in the table. Each letter represents a column:</p> Letter Column Width <code>S</code> Session ID 40 <code>A</code> Agent (claude-code, codex-cli, etc.) 15 <code>T</code> Start Time 20 <code>M</code> Message Count 8 <code>F</code> Files Touched 8 <code>O</code> Models Used 30 <code>L</code> Last Message (preview) 50 <p>Example column specs: - <code>SATM</code> (default): Session ID, Agent, Timestamp, Messages - <code>SATMO</code>: Add Models column - <code>SATMOL</code>: Add both Models and Last Message preview - <code>ATOM</code>: Agent, Timestamp, Messages, Models (skip Session ID)</p>"},{"location":"reference/cli/#examples_6","title":"Examples","text":"<pre><code># List 20 most recent transcripts (default)\nai-blame transcript list\n\n# Show all transcripts with models column\nai-blame transcript list -n 0 --columns SATMO\n\n# Show last message preview for each transcript\nai-blame transcript list --columns SATMOL\n\n# List as JSON (all fields included)\nai-blame transcript list --format json\n\n# Show only agent, time, and model\nai-blame transcript list --columns ATO\n</code></pre>"},{"location":"reference/cli/#understanding-session-id-duplication","title":"Understanding Session ID Duplication","text":"<p>You may notice the same Session ID appearing multiple times in the list. This is normal and occurs in these scenarios:</p> <ol> <li>Multi-agent sessions: Claude Code may spawn subagents (Task, Explore, Plan agents, etc.) that share the same parent session ID. Each subagent interaction gets its own trace file.</li> <li>Session spanning multiple files: Long sessions may be split across multiple trace files, each with the same session ID.</li> <li>Session file organization: The system captures relationships between files\u2014each row represents a distinct trace file, not a distinct session.</li> </ol> <p>The <code>--columns SATMO</code> layout makes this relationship clearer by showing which models were used in each trace file.</p>"},{"location":"reference/cli/#ai-blame-transcript-view","title":"<code>ai-blame transcript view</code>","text":"<p>Display a detailed transcript of a Claude Code or Codex session.</p> <p>\u2192 Full Guide \u2014 Output formats, workflows, advanced patterns</p> <pre><code>ai-blame transcript view [OPTIONS] &lt;SESSION&gt;\n</code></pre>"},{"location":"reference/cli/#arguments_3","title":"Arguments","text":"Argument Description <code>SESSION</code> Session ID (substring match), file path, or slug to view"},{"location":"reference/cli/#options_7","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory (overrides <code>--dir</code> and <code>--home</code>) <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory where <code>.claude/</code> lives <code>--format &lt;text\\|markdown\\|json&gt;</code> <code>text</code> Output format <code>--full</code> False Show full content (don't truncate long messages) <code>--show-thinking</code> False Display thinking/chain-of-thought blocks <code>--show-tools</code> False Display tool use and tool result details"},{"location":"reference/cli/#examples_7","title":"Examples","text":"<pre><code># View transcript by session ID (substring match)\nai-blame transcript view 483c7d95\n\n# View transcript by file path\nai-blame transcript view ~/.claude/projects/-Users-alice-project/483c7d95.jsonl\n\n# View with all details visible\nai-blame transcript view 483c7d95 --full --show-thinking --show-tools\n\n# Export as markdown for documentation\nai-blame transcript view 483c7d95 --format markdown &gt; session.md\n\n# Export as JSON for programmatic access\nai-blame transcript view 483c7d95 --format json | jq .\n</code></pre>"},{"location":"reference/cli/#output-formats","title":"Output Formats","text":"<p>Text format (default): Clean, terminal-friendly display with section separators and controlled truncation.</p> <p>Markdown format: GitHub-flavored markdown suitable for documentation, blogs, or GitHub issues. Includes proper code fencing and formatting.</p> <p>JSON format: Machine-readable output with full transcript structure (all fields, no truncation).</p>"},{"location":"reference/cli/#header-information","title":"Header Information","text":"<p>The view header includes: - Session ID: Unique identifier for the interaction - Slug (if available): Feature flag or task identifier from Claude Code - Agent: Tool used (claude-code, codex-cli, etc.) - Version: Agent version that created the trace - Working Directory: Directory where the agent was running - Trace File: Path to the source trace file - Start/End: Timestamps of the session - Messages: Total message count - Files Touched: Number of files modified</p>"},{"location":"reference/cli/#trace-directory-resolution","title":"Trace Directory Resolution","text":"<p>The trace directory is determined by (in order of priority):</p> <ol> <li><code>--trace-dir</code>: Use this exact path</li> <li><code>--dir</code> + <code>--home</code>: Compute as <code>$home/.claude/projects/&lt;encoded-dir&gt;/</code></li> <li>Default: <code>~/.claude/projects/&lt;encoded-cwd&gt;/</code></li> </ol> <p>The <code>&lt;encoded-dir&gt;</code> is a filesystem-safe encoding of the absolute path (at minimum, path separators like <code>/</code> become <code>-</code>, and punctuation like <code>.</code> is also normalized to <code>-</code> in practice).</p> <p>Example:</p> Directory Encoded <code>/Users/alice/project</code> <code>-Users-alice-project</code> <code>/home/bob/work/repo</code> <code>-home-bob-work-repo</code>"},{"location":"reference/cli/#ai-blame-completions","title":"<code>ai-blame completions</code>","text":"<p>Generate shell completion scripts for tab completion support.</p> <p>\u2192 Full Guide \u2014 Installation instructions for all shells</p> <pre><code>ai-blame completions &lt;SHELL&gt;\n</code></pre>"},{"location":"reference/cli/#arguments_4","title":"Arguments","text":"Argument Description <code>SHELL</code> Shell to generate completions for: <code>bash</code>, <code>zsh</code>, <code>fish</code>, <code>elvish</code>, <code>powershell</code>"},{"location":"reference/cli/#examples_8","title":"Examples","text":"<pre><code># Generate zsh completions (for Oh My Zsh)\nai-blame completions zsh &gt; ~/.oh-my-zsh/completions/_ai-blame\n\n# Generate bash completions\nai-blame completions bash &gt; /etc/bash_completion.d/ai-blame\n\n# Generate fish completions\nai-blame completions fish &gt; ~/.config/fish/completions/ai-blame.fish\n</code></pre>"},{"location":"reference/cli/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 Success 1 Error (e.g., trace directory not found, file not found) 2 CLI usage error (e.g., invalid <code>--lines</code> range)"},{"location":"reference/config-file/","title":"Configuration File Reference","text":"<p>Complete reference for the <code>.ai-blame.yaml</code> configuration file.</p>"},{"location":"reference/config-file/#file-location","title":"File Location","text":"<p>The configuration file should be named <code>.ai-blame.yaml</code> and placed in your project root. <code>ai-blame</code> searches upward from the current directory to find it.</p> <p>You can also specify a config file explicitly:</p> <pre><code>ai-blame annotate --config /path/to/.ai-blame.yaml --dry-run\n</code></pre>"},{"location":"reference/config-file/#schema","title":"Schema","text":"<pre><code># .ai-blame.yaml\n\ndefaults:\n  policy: &lt;policy&gt;\n  format: &lt;format&gt;\n  sidecar_pattern: &lt;pattern&gt;\n  comment_syntax: &lt;syntax&gt;\n\nrules:\n  - pattern: &lt;glob&gt;\n    policy: &lt;policy&gt;\n    format: &lt;format&gt;\n    sidecar_pattern: &lt;pattern&gt;\n    comment_syntax: &lt;syntax&gt;\n</code></pre>"},{"location":"reference/config-file/#top-level-fields","title":"Top-Level Fields","text":""},{"location":"reference/config-file/#defaults","title":"<code>defaults</code>","text":"<p>Default rule applied when no other rule matches.</p> Field Type Default Description <code>policy</code> string <code>sidecar</code> Output policy <code>format</code> string <code>yaml</code> Output format for <code>append</code> policy <code>sidecar_pattern</code> string <code>{stem}.history.yaml</code> Pattern for sidecar filenames <code>comment_syntax</code> string Comment syntax for <code>comment</code> policy"},{"location":"reference/config-file/#rules","title":"<code>rules</code>","text":"<p>List of rules evaluated in order. First match wins.</p>"},{"location":"reference/config-file/#rule-fields","title":"Rule Fields","text":""},{"location":"reference/config-file/#pattern","title":"<code>pattern</code>","text":"<p>Required. Glob pattern to match files.</p> Pattern Type Example Matches Extension <code>*.yaml</code> Any YAML file Filename <code>config.yaml</code> Specific file Directory <code>kb/*.yaml</code> YAML files in <code>kb/</code> Recursive <code>src/**/*.py</code> Python files anywhere in <code>src/</code> <p>For patterns without <code>/</code>, only the filename is matched. For patterns with <code>/</code> or <code>**</code>, the full relative path is matched.</p>"},{"location":"reference/config-file/#policy","title":"<code>policy</code>","text":"<p>Required. How to write curation history.</p> Value Description <code>append</code> Add <code>edit_history</code> key directly to the file <code>sidecar</code> Write to a companion file <code>comment</code> Embed as comment block at end of file <code>skip</code> Don't process matching files"},{"location":"reference/config-file/#format","title":"<code>format</code>","text":"<p>Format for <code>append</code> policy output.</p> Value Description <code>yaml</code> YAML format (default) <code>json</code> JSON format"},{"location":"reference/config-file/#sidecar_pattern","title":"<code>sidecar_pattern</code>","text":"<p>Pattern for generating sidecar filenames. Only used with <code>sidecar</code> policy.</p> Variable Description Example Input Example Value <code>{name}</code> Full filename <code>main.py</code> <code>main.py</code> <code>{stem}</code> Filename without extension <code>main.py</code> <code>main</code> <code>{ext}</code> Extension (without dot) <code>main.py</code> <code>py</code> <code>{dir}</code> Parent directory <code>src/main.py</code> <code>src</code>"},{"location":"reference/config-file/#comment_syntax","title":"<code>comment_syntax</code>","text":"<p>Comment syntax for <code>comment</code> policy.</p> Value Format Languages <code>hash</code> <code># comment</code> Python, Ruby, Shell, YAML <code>slash</code> <code>// comment</code> JavaScript, TypeScript, Go, Rust <code>html</code> <code>&lt;!-- comment --&gt;</code> HTML, XML, Markdown"},{"location":"reference/exploration/","title":"Trace Exploration","text":"<p>Discover, understand, and explore AI agent execution traces in your project.</p>"},{"location":"reference/exploration/#conceptual-model","title":"Conceptual Model","text":"<p>Trace exploration answers: \"What traces exist? What changed? What did the AI do?\"</p> <p>Four commands work together in a discovery workflow:</p> <ol> <li><code>stats</code> \u2014 Quick overview: How many traces? How many edits?</li> <li><code>timeline</code> \u2014 Chronological history: What changed when?</li> <li><code>transcript list</code> \u2014 See all AI sessions: Who worked on this?</li> <li><code>transcript view</code> \u2014 Deep dive: What did a specific session do?</li> </ol> <p>Each answers progressively more detailed questions.</p>"},{"location":"reference/exploration/#the-stats-command","title":"The <code>stats</code> Command","text":""},{"location":"reference/exploration/#what-it-does","title":"What It Does","text":"<p>Shows statistics about available traces and edits. Answers: \"What do I have to work with?\"</p>"},{"location":"reference/exploration/#command-syntax","title":"Command Syntax","text":"<pre><code>ai-blame stats [OPTIONS]\n</code></pre>"},{"location":"reference/exploration/#basic-usage","title":"Basic Usage","text":"<p>Show all traces:</p> <pre><code>ai-blame stats\n</code></pre> <p>For a specific project:</p> <pre><code>ai-blame stats --dir /path/to/project\n</code></pre>"},{"location":"reference/exploration/#options","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory for trace lookup <code>--pattern &lt;PATTERN&gt;</code> <code>-p</code> <code>\"\"</code> Filter files by path pattern"},{"location":"reference/exploration/#example-output","title":"Example Output","text":"<pre><code>$ ai-blame stats\n\nTrace directory: /Users/alice/.claude/projects/-Users-alice-myproject/\nTrace files: 5\n  Session traces: 3\n  Agent traces: 2\n\nFiles with edits (all files): 23\nTotal successful edits: 47\n\nTop edited files:\n  1. disease_definitions.yaml (8 edits)\n  2. phenotypes.yaml (6 edits)\n  3. config.yaml (5 edits)\n</code></pre>"},{"location":"reference/exploration/#interpreting-stats","title":"Interpreting Stats","text":"<ul> <li>Trace files: Number of recorded sessions (.jsonl files)</li> <li>Session traces: Parent Claude Code/Codex sessions</li> <li>Agent traces: Subagent sessions (spawned by parent)</li> <li>Files with edits: How many unique files were modified</li> <li>Total edits: Sum of all CREATE/EDIT/DELETE operations</li> </ul>"},{"location":"reference/exploration/#the-timeline-command","title":"The <code>timeline</code> Command","text":""},{"location":"reference/exploration/#what-it-does_1","title":"What It Does","text":"<p>Shows a chronological timeline of all file modifications from traces. Answers: \"What changed when?\"</p>"},{"location":"reference/exploration/#command-syntax_1","title":"Command Syntax","text":"<pre><code>ai-blame timeline [OPTIONS]\n</code></pre>"},{"location":"reference/exploration/#basic-usage_1","title":"Basic Usage","text":"<p>Show complete timeline:</p> <pre><code>ai-blame timeline\n</code></pre> <p>Filter by file type:</p> <pre><code>ai-blame timeline --pattern \".yaml\"\n</code></pre>"},{"location":"reference/exploration/#options_1","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory for trace lookup <code>--pattern &lt;PATTERN&gt;</code> <code>-p</code> <code>\"\"</code> Filter files by path pattern"},{"location":"reference/exploration/#example-output_1","title":"Example Output","text":"<pre><code>$ ai-blame timeline\n\n=== Timeline of Actions ===\n\n2025-12-01 08:03:42 UTC  [CREATED]  disease_definitions.yaml (claude-opus-4-5)\n2025-12-01 08:05:18 UTC  [EDITED]   disease_definitions.yaml (claude-opus-4-5)\n2025-12-02 14:12:15 UTC  [CREATED]  phenotypes.yaml (gpt-4)\n2025-12-02 14:15:30 UTC  [EDITED]   config.yaml (claude-opus-4-5)\n2025-12-05 10:22:05 UTC  [EDITED]   disease_definitions.yaml (claude-3-5-sonnet)\n</code></pre>"},{"location":"reference/exploration/#understanding-timeline","title":"Understanding Timeline","text":"<ul> <li>Timestamp (UTC) \u2014 When the edit occurred</li> <li>Action \u2014 CREATED, EDITED, or DELETED</li> <li>File \u2014 Which file was affected</li> <li>Model \u2014 Which AI model made the change</li> </ul> <p>Use timeline to: - See project evolution chronologically - Identify when each file was first created - Spot patterns (which files change together?) - Check if models changed over time</p>"},{"location":"reference/exploration/#the-transcript-list-command","title":"The <code>transcript list</code> Command","text":""},{"location":"reference/exploration/#what-it-does_2","title":"What It Does","text":"<p>Lists all AI sessions (Claude Code, Codex, subagents). Answers: \"Which sessions touched this project?\"</p>"},{"location":"reference/exploration/#command-syntax_2","title":"Command Syntax","text":"<pre><code>ai-blame transcript list [OPTIONS]\n</code></pre>"},{"location":"reference/exploration/#basic-usage_2","title":"Basic Usage","text":"<p>List 20 most recent sessions (default):</p> <pre><code>ai-blame transcript list\n</code></pre> <p>List ALL sessions:</p> <pre><code>ai-blame transcript list -n 0\n</code></pre> <p>Show models used in each session:</p> <pre><code>ai-blame transcript list --columns SATMO\n</code></pre>"},{"location":"reference/exploration/#options_2","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory for trace lookup <code>--limit &lt;N&gt;</code> <code>-n</code> 20 Show N most recent (0 for all) <code>--format &lt;table\\|json&gt;</code> <code>table</code> Output format <code>--columns &lt;SPEC&gt;</code> SATM Column specification"},{"location":"reference/exploration/#example-default-output-satm","title":"Example: Default Output (SATM)","text":"<pre><code>$ ai-blame transcript list\n\nSession ID                                  Agent          Start Time              Msgs\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n483c7d95-6b9c-46db-afd4-3ecb6257781a       claude-code    2025-12-01 08:03        53\n7f2d4e91-8a5c-4e1b-9c6e-2f8d4a3b9c5e       claude-code    2025-11-30 14:22        28\nb1e5f9c3-6d2a-4f8e-9a1c-3e7b8f2d5a9c       codex-cli      2025-11-28 10:15        12\n</code></pre>"},{"location":"reference/exploration/#example-with-models-satmo","title":"Example: With Models (SATMO)","text":"<pre><code>$ ai-blame transcript list --columns SATMO\n\nSession ID                                  Agent          Start Time              Msgs  Models\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n483c7d95-6b9c-46db-afd4-3ecb6257781a       claude-code    2025-12-01 08:03        53    claude-opus-4-5\n7f2d4e91-8a5c-4e1b-9c6e-2f8d4a3b9c5e       claude-code    2025-11-30 14:22        28    claude-haiku\n</code></pre>"},{"location":"reference/exploration/#column-layout-specification","title":"Column Layout Specification","text":"<p>Use <code>--columns</code> to customize which columns appear:</p> Letter Column Description <code>S</code> Session ID Unique identifier (40 chars) <code>A</code> Agent Tool used (claude-code, codex-cli, etc.) <code>T</code> Start Time Session start timestamp <code>M</code> Message Count Number of messages in session <code>F</code> Files Touched Number of files modified <code>O</code> Models Used Models used in this trace <code>L</code> Last Message Preview of last assistant message (50 chars) <p>Example layouts:</p> <ul> <li><code>SATM</code> (default) \u2014 Session, Agent, Time, Messages</li> <li><code>SATMO</code> \u2014 Add Models column (helps identify subagents)</li> <li><code>ATOM</code> \u2014 Skip Session ID, focus on Agent/Time/Messages/Models</li> <li><code>SATMOL</code> \u2014 Everything</li> </ul>"},{"location":"reference/exploration/#understanding-session-id-duplication","title":"Understanding Session ID Duplication","text":"<p>You may see the same Session ID multiple times in <code>transcript list</code>. This is normal and happens when:</p> <ol> <li>Multi-agent sessions: Claude Code spawns subagents (Explore, Task, Plan) that share parent Session ID</li> <li>Session spanning files: Long sessions split across multiple trace files</li> <li>Agent differentiation: Using <code>--columns SATMO</code> shows which models were used</li> </ol> <p>Example:</p> <pre><code>Session ID                                  Agent          Models\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n483c7d95-6b9c-46db-afd4-3ecb6257781a       claude-code    claude-opus-4-5      (main session)\n483c7d95-6b9c-46db-afd4-3ecb6257781a       claude-code    claude-haiku         (subagent 1)\n483c7d95-6b9c-46db-afd4-3ecb6257781a       claude-code    claude-haiku         (subagent 2)\n</code></pre> <p>All three share the same Session ID but used different models. The main session typically uses more powerful model (Opus), subagents use faster model (Haiku).</p> <p>\u2192 Learn more: Transcripts &amp; Subagents</p>"},{"location":"reference/exploration/#the-transcript-view-command","title":"The <code>transcript view</code> Command","text":""},{"location":"reference/exploration/#what-it-does_3","title":"What It Does","text":"<p>Displays a detailed transcript of a specific Claude Code or Codex session. Answers: \"What exactly did this session do?\"</p>"},{"location":"reference/exploration/#command-syntax_3","title":"Command Syntax","text":"<pre><code>ai-blame transcript view [OPTIONS] &lt;SESSION&gt;\n</code></pre>"},{"location":"reference/exploration/#basic-usage_3","title":"Basic Usage","text":"<p>View by Session ID (substring match):</p> <pre><code>ai-blame transcript view 483c7d95\n</code></pre> <p>View with full details:</p> <pre><code>ai-blame transcript view 483c7d95 --full\n</code></pre> <p>Show AI reasoning (thinking blocks):</p> <pre><code>ai-blame transcript view 483c7d95 --show-thinking\n</code></pre> <p>Show tool usage details:</p> <pre><code>ai-blame transcript view 483c7d95 --show-tools\n</code></pre>"},{"location":"reference/exploration/#options_3","title":"Options","text":"Option Short Default Description <code>--trace-dir &lt;TRACE_DIR&gt;</code> <code>-t</code> Auto Claude trace directory <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Target project directory <code>--home &lt;HOME&gt;</code> <code>~</code> Home directory for trace lookup <code>--format &lt;text\\|markdown\\|json&gt;</code> <code>text</code> Output format <code>--full</code> False Show full content (don't truncate) <code>--show-thinking</code> False Display thinking/chain-of-thought <code>--show-tools</code> False Display tool use and results"},{"location":"reference/exploration/#example-output_2","title":"Example Output","text":"<p>Default (text, truncated):</p> <pre><code>Session: 483c7d95-6b9c-46db-afd4-3ecb6257781a\nAgent: claude-code\nStart: 2025-12-01 08:03:42 UTC\nMessages: 53\nFiles Touched: 5\nModels: claude-opus-4-5-20251101\nWorking Directory: /Users/alice/myproject\nTrace File: ~/.claude/projects/-Users-alice-myproject/483c7d95.jsonl\n\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nUser Message 1:\n  Help me create a disease definitions schema\n\nClaude Response 1:\n  I'll create a LinkML schema for disease definitions. [creates file]...\n\nUser Message 2:\n  Add phenotypes section\n\nClaude Response 2:\n  I'll extend the schema with phenotype associations... [truncated]\n</code></pre>"},{"location":"reference/exploration/#output-formats","title":"Output Formats","text":"<p>Text (default):</p> <p>Clean, terminal-friendly display with section breaks and controlled truncation. Good for interactive exploration.</p> <p>Markdown:</p> <p>GitHub-flavored markdown suitable for documentation or GitHub issues:</p> <pre><code>ai-blame transcript view 483c7d95 --format markdown &gt; session.md\n</code></pre> <p>JSON:</p> <p>Complete machine-readable transcript with all fields:</p> <pre><code>ai-blame transcript view 483c7d95 --format json | jq .\n</code></pre> <p>Good for programmatic processing or archiving.</p>"},{"location":"reference/exploration/#common-exploration-workflows","title":"Common Exploration Workflows","text":""},{"location":"reference/exploration/#workflow-1-project-overview-5-minutes","title":"Workflow 1: Project Overview (5 minutes)","text":"<p>Understanding what you're working with:</p> <pre><code># Step 1: See overall statistics\nai-blame stats\n\n# Step 2: View timeline of changes\nai-blame timeline\n\n# Output shows: how many traces, what changed, what changed when\n</code></pre>"},{"location":"reference/exploration/#workflow-2-session-discovery-10-minutes","title":"Workflow 2: Session Discovery (10 minutes)","text":"<p>Finding specific sessions:</p> <pre><code># Step 1: List all sessions\nai-blame transcript list -n 0 --columns SATMO\n\n# Step 2: View a specific session\nai-blame transcript view 483c7d95\n\n# Step 3: For more detail\nai-blame transcript view 483c7d95 --full --show-thinking\n</code></pre>"},{"location":"reference/exploration/#workflow-3-understanding-subagents-5-minutes","title":"Workflow 3: Understanding Subagents (5 minutes)","text":"<p>When Claude spawned helper agents:</p> <pre><code># Step 1: Look for repeated Session IDs with different models\nai-blame transcript list --columns SATMO\n\n# Step 2: View the main session\nai-blame transcript view 483c7d95 --full\n\n# Step 3: Learn about subagent architecture\n# (See: Understanding Subagents documentation)\n</code></pre>"},{"location":"reference/exploration/#workflow-4-file-history-3-minutes","title":"Workflow 4: File History (3 minutes)","text":"<p>What happened to a specific file:</p> <pre><code># See when it was created/modified\nai-blame timeline --pattern \"config.yaml\"\n\n# See all sessions that touched it\nai-blame stats --pattern \"config.yaml\"\n\n# Line-by-line attribution\nai-blame blame config.yaml\n</code></pre>"},{"location":"reference/exploration/#filtering-and-searching","title":"Filtering and Searching","text":""},{"location":"reference/exploration/#filter-by-file-pattern","title":"Filter by File Pattern","text":"<p>Show only changes to YAML files:</p> <pre><code>ai-blame timeline --pattern \".yaml\"\nai-blame stats --pattern \".yaml\"\n</code></pre> <p>Filter by directory:</p> <pre><code>ai-blame timeline --pattern \"docs/\"\n</code></pre>"},{"location":"reference/exploration/#find-sessions-with-specific-models","title":"Find Sessions with Specific Models","text":"<p>Use <code>--columns SATMO</code> to show models:</p> <pre><code>ai-blame transcript list --columns SATMO\n\n# Then identify sessions that used specific model (e.g., claude-opus-4-5)\n</code></pre>"},{"location":"reference/exploration/#show-latest-n-sessions","title":"Show Latest N Sessions","text":"<pre><code># Show last 5\nai-blame transcript list -n 5\n\n# Show last 50\nai-blame transcript list -n 50\n\n# Show all\nai-blame transcript list -n 0\n</code></pre>"},{"location":"reference/exploration/#advanced-patterns","title":"Advanced Patterns","text":""},{"location":"reference/exploration/#export-session-as-documentation","title":"Export Session as Documentation","text":"<p>Create a markdown record of what was done:</p> <pre><code>ai-blame transcript view 483c7d95 --format markdown --full &gt; session-doc.md\n\n# Share with team or archive\n</code></pre>"},{"location":"reference/exploration/#programmatic-access","title":"Programmatic Access","text":"<p>Extract data as JSON for tooling:</p> <pre><code>ai-blame transcript list --format json | jq '.[0].session_id'\n\nai-blame transcript view 483c7d95 --format json | jq '.messages[0]'\n</code></pre>"},{"location":"reference/exploration/#compare-sessions","title":"Compare Sessions","text":"<pre><code># List all with models\nai-blame transcript list -n 0 --columns SATMO\n\n# View specific sessions to compare\nai-blame transcript view &lt;session-1&gt; --format markdown &gt; s1.md\nai-blame transcript view &lt;session-2&gt; --format markdown &gt; s2.md\n\n# Diff\ndiff s1.md s2.md\n</code></pre>"},{"location":"reference/exploration/#interpreting-session-information","title":"Interpreting Session Information","text":""},{"location":"reference/exploration/#session-id","title":"Session ID","text":"<p>Unique identifier for the user-initiated session. Multiple trace files can share the same Session ID (subagents).</p>"},{"location":"reference/exploration/#agent","title":"Agent","text":"<p>The tool that ran: <code>claude-code</code>, <code>codex-cli</code>, etc.</p>"},{"location":"reference/exploration/#start-time","title":"Start Time","text":"<p>When the session started (UTC).</p>"},{"location":"reference/exploration/#messages","title":"Messages","text":"<p>Total messages exchanged (user prompts + Claude responses).</p>"},{"location":"reference/exploration/#files-touched","title":"Files Touched","text":"<p>Number of files modified. Note: Subagent sessions may show 0 if they only read files.</p>"},{"location":"reference/exploration/#models","title":"Models","text":"<p>AI models used. Helps distinguish: - claude-opus-4-5 \u2014 Main session (powerful model) - claude-haiku \u2014 Subagent (faster, lighter) - gpt-4 \u2014 Copilot/Codex sessions</p>"},{"location":"reference/exploration/#tips-best-practices","title":"Tips &amp; Best Practices","text":""},{"location":"reference/exploration/#tip-1-start-with-stats","title":"Tip 1: Start with Stats","text":"<p>Always begin with <code>ai-blame stats</code> to understand scope:</p> <pre><code>ai-blame stats\n# Good: \"Ah, 47 edits across 23 files\"\n\nai-blame timeline\n# Now: \"Timeline shows creation on Dec 1, major edit Dec 15\"\n\nai-blame transcript list\n# Find: \"3 sessions, mostly claude-code\"\n</code></pre>"},{"location":"reference/exploration/#tip-2-use-models-to-identify-subagents","title":"Tip 2: Use Models to Identify Subagents","text":"<p>Subagents typically use different (faster) models:</p> <pre><code>ai-blame transcript list --columns SATMO\n# Look for: Same Session ID, different models\n# Opus = main, Haiku = subagents\n</code></pre>"},{"location":"reference/exploration/#tip-3-export-before-archiving","title":"Tip 3: Export Before Archiving","text":"<p>Keep historical records:</p> <pre><code>ai-blame transcript view 483c7d95 --format markdown &gt; archive/session-483c7d95.md\n</code></pre>"},{"location":"reference/exploration/#tip-4-combine-filters","title":"Tip 4: Combine Filters","text":"<p>Get exactly what you need:</p> <pre><code># YAML files only\nai-blame timeline --pattern \".yaml\"\n\n# Recent sessions only\nai-blame transcript list -n 5 --columns SATMO\n\n# Specific directory\nai-blame stats --pattern \"docs/\"\n</code></pre>"},{"location":"reference/exploration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"reference/exploration/#no-traces-found","title":"No traces found","text":"<pre><code># Verify trace directory exists\nls ~/.claude/projects/\n\n# Use explicit path\nai-blame stats --trace-dir /path/to/traces\n</code></pre>"},{"location":"reference/exploration/#session-id-not-found","title":"Session ID not found","text":"<pre><code># Try listing first\nai-blame transcript list\n\n# Use more characters of ID\nai-blame transcript view 483c7d95-6b9c-46db\n\n# Use full path\nai-blame transcript view ~/.claude/projects/.../483c7d95.jsonl\n</code></pre>"},{"location":"reference/exploration/#output-truncated","title":"Output truncated","text":"<pre><code># Use --full to see everything\nai-blame transcript view 483c7d95 --full\n\n# Or export as markdown\nai-blame transcript view 483c7d95 --format markdown &gt; full.md\n</code></pre>"},{"location":"reference/exploration/#related-topics","title":"Related Topics","text":"<ul> <li>Line-Level Analysis \u2014 Line-by-line attribution in files</li> <li>Understanding Subagents \u2014 Deep dive into multi-agent sessions</li> <li>Provenance Annotation \u2014 Embedding what you discover</li> <li>Performance \u2014 Optimizing trace exploration</li> <li>CLI Reference: stats \u2014 Syntax reference</li> <li>CLI Reference: timeline \u2014 Syntax reference</li> <li>CLI Reference: transcript \u2014 Syntax reference</li> </ul>"},{"location":"reference/exploration/#next-steps","title":"Next Steps","text":"<p>After exploring traces, you can:</p> <ol> <li>Annotate: Use what you learned to add provenance with Provenance Annotation</li> <li>Analyze: Dive deeper with Line-Level Analysis</li> <li>Optimize: Speed up with Performance</li> <li>Understand: Learn the system with How It Works</li> </ol> <p>Start with Provenance Annotation to take action on what you discovered.</p>"},{"location":"reference/models/","title":"Data Models Reference","text":"<p>Reference documentation for the core data models in the Rust <code>ai-blame</code> crate.</p>"},{"location":"reference/models/#curation-models","title":"Curation Models","text":""},{"location":"reference/models/#curationaction","title":"<code>CurationAction</code>","text":"<p>Action type for a curation event.</p> Value Meaning <code>CREATED</code> File was created (first event came from a create operation) <code>EDITED</code> File was edited"},{"location":"reference/models/#curationevent","title":"<code>CurationEvent</code>","text":"<p>A single event in the audit trail.</p> Field Type Description <code>timestamp</code> <code>chrono::DateTime&lt;chrono::Utc&gt;</code> When the edit occurred <code>model</code> <code>Option&lt;String&gt;</code> Model identifier <code>action</code> <code>Option&lt;CurationAction&gt;</code> <code>CREATED</code> or <code>EDITED</code> <code>description</code> <code>Option&lt;String&gt;</code> Optional description <code>agent_tool</code> <code>Option&lt;String&gt;</code> Tool that made the edit (e.g., <code>claude-code</code>) <code>agent_version</code> <code>Option&lt;String&gt;</code> Version of the agent tool"},{"location":"reference/models/#filehistory","title":"<code>FileHistory</code>","text":"<p>Aggregated edit history for a single file.</p> Field Type Description <code>file_path</code> <code>String</code> Path to the file (typically relative) <code>events</code> <code>Vec&lt;CurationEvent&gt;</code> List of events"},{"location":"reference/models/#extraction-models","title":"Extraction Models","text":""},{"location":"reference/models/#editrecord","title":"<code>EditRecord</code>","text":"<p>A record of a successful file edit extracted from traces (internal extraction representation).</p> Field Type Description <code>file_path</code> <code>String</code> Absolute file path found in traces <code>timestamp</code> <code>DateTime&lt;Utc&gt;</code> When the operation occurred <code>model</code> <code>String</code> Model identifier <code>session_id</code> <code>String</code> Claude Code session ID <code>is_create</code> <code>bool</code> True if this was a file creation <code>change_size</code> <code>usize</code> Approximate size of change in characters <code>agent_tool</code> <code>String</code> Tool identifier <code>agent_version</code> <code>Option&lt;String&gt;</code> Agent version (if present) <code>old_string</code> <code>Option&lt;String&gt;</code> For edits: exact replaced string (if present) <code>new_string</code> <code>Option&lt;String&gt;</code> For edits: replacement string (if present) <code>structured_patch</code> <code>Option&lt;String&gt;</code> Structured patch data (often unified-diff-like) <code>create_content</code> <code>Option&lt;String&gt;</code> For creates: file content at creation time (if present)"},{"location":"reference/models/#filterconfig","title":"<code>FilterConfig</code>","text":"<p>Configuration for filtering edit records.</p> Field Type Default Description <code>initial_and_recent_only</code> <code>bool</code> <code>false</code> Keep only first and last edit per file <code>min_change_size</code> <code>usize</code> <code>0</code> Minimum change size (chars) <code>since</code> <code>Option&lt;DateTime&lt;Utc&gt;&gt;</code> <code>None</code> Only include edits after this time <code>until</code> <code>Option&lt;DateTime&lt;Utc&gt;&gt;</code> <code>None</code> Only include edits before this time <code>file_pattern</code> <code>Option&lt;String&gt;</code> <code>None</code> Filter by path substring"},{"location":"reference/models/#output-configuration-models","title":"Output Configuration Models","text":""},{"location":"reference/models/#outputpolicy","title":"<code>OutputPolicy</code>","text":"Value Meaning <code>append</code> Add <code>edit_history</code> directly to the file (YAML/JSON) <code>sidecar</code> Write a companion history file <code>comment</code> Embed history as comments <code>skip</code> Do not process matching files"},{"location":"reference/models/#commentsyntax","title":"<code>CommentSyntax</code>","text":"Value Meaning <code>hash</code> <code># comment</code> <code>slash</code> <code>// comment</code> <code>html</code> <code>&lt;!-- comment --&gt;</code>"},{"location":"reference/models/#filerule","title":"<code>FileRule</code>","text":"Field Type Description <code>pattern</code> <code>String</code> Glob pattern <code>policy</code> <code>OutputPolicy</code> Output policy <code>format</code> <code>String</code> Output format (e.g., <code>yaml</code> or <code>json</code>) <code>comment_syntax</code> <code>Option&lt;CommentSyntax&gt;</code> Comment syntax for <code>comment</code> policy <code>sidecar_pattern</code> <code>Option&lt;String&gt;</code> Sidecar filename pattern"},{"location":"reference/models/#outputconfig","title":"<code>OutputConfig</code>","text":"Field Type Description <code>defaults</code> <code>Option&lt;FileRule&gt;</code> Default rule when no rules match <code>rules</code> <code>Vec&lt;FileRule&gt;</code> Rules evaluated in order (first match wins)"},{"location":"reference/performance/","title":"Performance &amp; Optimization","text":"<p>Speed up <code>ai-blame</code> command execution with caching and filtering strategies.</p>"},{"location":"reference/performance/#conceptual-model","title":"Conceptual Model","text":"<p>Performance optimization works on two levels:</p> <ol> <li>Caching \u2014 Avoid re-parsing traces. <code>ai-blame</code> uses DuckDB caching per trace directory.</li> <li>Filtering \u2014 Process only what you need. Use <code>--pattern</code> and other filters to reduce scope.</li> </ol> <p>Most commands are already fast. Use these techniques when:</p> <ul> <li>Processing large projects with many traces</li> <li>Running <code>ai-blame</code> repeatedly (scripts, CI/CD)</li> <li>Exploring different filter combinations</li> <li>Debugging cache issues</li> </ul>"},{"location":"reference/performance/#understanding-caching","title":"Understanding Caching","text":""},{"location":"reference/performance/#how-caching-works","title":"How Caching Works","text":"<p><code>ai-blame</code> caches parsed trace data in DuckDB format:</p> <p>Cache location: <code>.ai-blame.ddb</code> in each trace directory</p> <pre><code>~/.claude/projects/-Users-alice-myproject/\n\u251c\u2500\u2500 483c7d95.jsonl              (trace file)\n\u251c\u2500\u2500 7f2d4e91.jsonl              (trace file)\n\u2514\u2500\u2500 .ai-blame.ddb               (cache database)\n</code></pre> <p>Cache contents: - Parsed messages, tool uses, file operations - Metadata (timestamps, models, session IDs) - File edit boundaries (what changed when)</p> <p>Cache benefits: - First run: Parse full traces (seconds) - Subsequent runs: Use cache (milliseconds) - Automatic invalidation: When traces change, cache rebuilds</p>"},{"location":"reference/performance/#cache-invalidation-strategy","title":"Cache Invalidation Strategy","text":"<p>Different trace types use different invalidation approaches:</p> <p>Claude Code traces: - All-or-nothing invalidation - If ANY trace file in directory changes, entire cache rebuilds - Reason: Subagent traces reference each other</p> <p>Codex/Copilot traces: - Per-file invalidation - Only changed files are re-parsed - Unchanged files reuse cached data - Reason: Traces are independent</p>"},{"location":"reference/performance/#cache-control-options","title":"Cache Control Options","text":""},{"location":"reference/performance/#option-1-default-use-cache-automatically","title":"Option 1: Default (Use Cache Automatically)","text":"<pre><code>ai-blame stats\nai-blame report\nai-blame blame src/main.rs\n</code></pre> <p>Cache is checked automatically: - If cache exists and is valid: Use it (fast) - If cache missing or invalid: Rebuild (slower, one-time)</p> <p>When to use: Always, unless troubleshooting.</p>"},{"location":"reference/performance/#option-2-rebuild-cache-explicitly","title":"Option 2: Rebuild Cache Explicitly","text":"<pre><code>ai-blame report --rebuild-cache\n</code></pre> <p>Forces rebuild of <code>.ai-blame.ddb</code> even if it exists:</p> <ul> <li>Slow: Must re-parse all traces</li> <li>Useful: Cache corruption, trace updates not detected</li> </ul>"},{"location":"reference/performance/#option-3-skip-cache","title":"Option 3: Skip Cache","text":"<pre><code>ai-blame report --no-cache\n</code></pre> <p>Parses traces without using or saving cache:</p> <ul> <li>Slowest: Re-parses every time</li> <li>Useful: Troubleshooting, testing, one-off commands</li> </ul> <p>Tradeoff: Accuracy vs speed for debugging.</p>"},{"location":"reference/performance/#caching-in-action","title":"Caching in Action","text":""},{"location":"reference/performance/#scenario-1-first-run-no-cache","title":"Scenario 1: First Run (No Cache)","text":"<pre><code>$ time ai-blame stats\n\nTrace directory: ~/.claude/projects/-Users-alice-myproject/\nTrace files: 15\n...\n\nreal    2.3s        # Slower: building cache\n</code></pre>"},{"location":"reference/performance/#scenario-2-subsequent-run-with-cache","title":"Scenario 2: Subsequent Run (With Cache)","text":"<pre><code>$ time ai-blame stats\n\nTrace directory: ~/.claude/projects/-Users-alice-myproject/\nTrace files: 15\n...\n\nreal    0.1s        # Fast: using cache\n</code></pre>"},{"location":"reference/performance/#scenario-3-after-adding-new-trace","title":"Scenario 3: After Adding New Trace","text":"<pre><code># Add new session (new .jsonl file)\n\n$ time ai-blame stats\n\nTrace directory: ~/.claude/projects/-Users-alice-myproject/\nTrace files: 16\n...\n\nreal    2.8s        # Slower: rebuilding cache (all-or-nothing)\n</code></pre>"},{"location":"reference/performance/#filtering-strategies","title":"Filtering Strategies","text":"<p>Filters reduce the scope of processing. Use when:</p> <ul> <li>Exploring specific file types</li> <li>Interested in particular directory</li> <li>Want to skip trivial edits</li> <li>Need focused analysis</li> </ul>"},{"location":"reference/performance/#strategy-1-filter-by-file-pattern","title":"Strategy 1: Filter by File Pattern","text":"<p>Show only files matching pattern:</p> <pre><code># YAML files only\nai-blame report --pattern \".yaml\"\n\n# JSON files\nai-blame report --pattern \".json\"\n\n# Python files\nai-blame blame --pattern \".py\"\n\n# Specific directory\nai-blame timeline --pattern \"docs/\"\n\n# Multiple patterns (glob)\nai-blame stats --pattern \"src/**/*.rs\"\n</code></pre> <p>Speed improvement: Skips non-matching files entirely.</p>"},{"location":"reference/performance/#strategy-2-filter-by-edit-size","title":"Strategy 2: Filter by Edit Size","text":"<p>Skip small edits (typo fixes, whitespace):</p> <pre><code># Only edits \u2265 100 characters\nai-blame report --min-change-size 100\n\n# Combine with pattern\nai-blame report --pattern \".yaml\" --min-change-size 100\n</code></pre> <p>Benefit: Cleaner output, focus on substantial changes.</p>"},{"location":"reference/performance/#strategy-3-filter-by-time-first-last","title":"Strategy 3: Filter by Time (First &amp; Last)","text":"<p>Keep only first and last edit per file:</p> <pre><code>ai-blame report --initial-and-recent\nai-blame annotate --initial-and-recent\n</code></pre> <p>Use case: - High-level history - Reduce noise from intermediate edits - Focus on creation and final version</p>"},{"location":"reference/performance/#strategy-4-combine-multiple-filters","title":"Strategy 4: Combine Multiple Filters","text":"<pre><code># YAML files only, min 100 char changes, first/last only\nai-blame report \\\n  --pattern \".yaml\" \\\n  --min-change-size 100 \\\n  --initial-and-recent\n</code></pre> <p>Result: Most focused, minimal output.</p>"},{"location":"reference/performance/#common-performance-scenarios","title":"Common Performance Scenarios","text":""},{"location":"reference/performance/#scenario-1-large-project-exploration","title":"Scenario 1: Large Project Exploration","text":"<p>Quick overview of a large project:</p> <pre><code># Step 1: Fast stats\ntime ai-blame stats --pattern \"docs/\"\n# Output: fast, limited to docs/\n\n# Step 2: Focused timeline\ntime ai-blame timeline --pattern \".yaml\"\n# Output: only YAML changes\n\n# Total: seconds instead of minutes\n</code></pre>"},{"location":"reference/performance/#scenario-2-cicd-integration","title":"Scenario 2: CI/CD Integration","text":"<p>Repeated runs in automation:</p> <pre><code># First run (builds cache)\nai-blame report --pattern \"docs/\" &gt; report.txt\n# Slow (seconds)\n\n# Subsequent runs (uses cache)\nai-blame report --pattern \"docs/\" &gt; report.txt\n# Fast (milliseconds)\n\n# When adding new traces, cache rebuilds automatically\n</code></pre>"},{"location":"reference/performance/#scenario-3-code-review-preparation","title":"Scenario 3: Code Review Preparation","text":"<p>Before reviewing specific files:</p> <pre><code># Fast: focus on file(s) being reviewed\ntime ai-blame blame src/config.rs --blocks\n# Output: who edited what in config.rs\n</code></pre>"},{"location":"reference/performance/#scenario-4-troubleshooting-cache-issues","title":"Scenario 4: Troubleshooting Cache Issues","text":"<pre><code># Suspect cache is stale?\nai-blame stats --no-cache\n# Slow but fresh\n\n# Compare with cached version\nai-blame stats\n# Should match\n\n# If different: rebuild\nai-blame stats --rebuild-cache\n</code></pre>"},{"location":"reference/performance/#optimization-tips","title":"Optimization Tips","text":""},{"location":"reference/performance/#tip-1-use-filters-first","title":"Tip 1: Use Filters First","text":"<pre><code># Bad: Process all 1000 files\nai-blame report\n\n# Good: Process only YAML\nai-blame report --pattern \".yaml\"\n\n# Better: YAML in docs/ only\nai-blame report --pattern \"docs/**/*.yaml\"\n</code></pre>"},{"location":"reference/performance/#tip-2-leverage-cache-in-scripts","title":"Tip 2: Leverage Cache in Scripts","text":"<pre><code>#!/bin/bash\n# Script that runs multiple commands\n\n# First run caches results\nai-blame stats\nai-blame timeline\nai-blame transcript list\n\n# All subsequent commands are fast (cached)\nai-blame blame src/main.rs\nai-blame report\n</code></pre>"},{"location":"reference/performance/#tip-3-combine-filters-for-focused-analysis","title":"Tip 3: Combine Filters for Focused Analysis","text":"<pre><code># Speed and clarity\nai-blame report \\\n  --pattern \".yaml\" \\\n  --min-change-size 50 \\\n  --initial-and-recent\n</code></pre>"},{"location":"reference/performance/#tip-4-use-dry-run-before-committing","title":"Tip 4: Use --dry-run Before Committing","text":"<pre><code># Preview is fast (no writes, uses cache)\nai-blame annotate --dry-run --pattern \"docs/\"\n\n# If satisfied, apply\nai-blame annotate --pattern \"docs/\"\n</code></pre>"},{"location":"reference/performance/#batch-processing","title":"Batch Processing","text":""},{"location":"reference/performance/#process-multiple-directories","title":"Process Multiple Directories","text":"<pre><code># Script to process several projects\nfor project in ~/projects/*; do\n  echo \"Processing $project...\"\n  time ai-blame stats --dir \"$project\"\ndone\n\n# Cache is per-directory, so each builds once\n</code></pre>"},{"location":"reference/performance/#export-results","title":"Export Results","text":"<pre><code># Save timeline for later analysis\nai-blame timeline &gt; timeline.txt\n\n# Export transcripts as markdown (one-time)\nai-blame transcript view session-1 --format markdown &gt; s1.md\nai-blame transcript view session-2 --format markdown &gt; s2.md\n\n# Archives are static (no re-parsing)\n</code></pre>"},{"location":"reference/performance/#when-to-optimize","title":"When to Optimize","text":""},{"location":"reference/performance/#when-performance-matters","title":"When Performance Matters","text":"<ul> <li>Scripts/CI: Running repeatedly</li> <li>Large projects: 100+ traces, 1000+ files</li> <li>Interactive: Exploring in real-time</li> <li>Slow systems: Older hardware, network-mounted dirs</li> </ul>"},{"location":"reference/performance/#when-you-can-ignore-performance","title":"When You Can Ignore Performance","text":"<ul> <li>One-off commands: Not performance-sensitive</li> <li>Small projects: &lt; 10 traces, &lt; 100 files</li> <li>Offline processing: Run once, use results</li> </ul>"},{"location":"reference/performance/#cache-troubleshooting","title":"Cache Troubleshooting","text":""},{"location":"reference/performance/#problem-cache-seems-stale","title":"Problem: Cache Seems Stale","text":"<pre><code># Check if new traces were added\nls ~/.claude/projects/.../\n\n# Verify cache rebuilds\nai-blame stats --rebuild-cache\n\n# Check output matches\nai-blame stats\n</code></pre>"},{"location":"reference/performance/#problem-command-slower-than-expected","title":"Problem: Command Slower Than Expected","text":"<pre><code># Check if cache exists\nls -la ~/.claude/projects/.../.ai-blame.ddb\n\n# Try with explicit skip to measure\ntime ai-blame stats --no-cache   # Slow\ntime ai-blame stats               # Fast (should use cache)\n\n# If no improvement, check filters\nai-blame stats --pattern \"docs/\"  # Should be faster\n</code></pre>"},{"location":"reference/performance/#problem-corrupted-cache","title":"Problem: Corrupted Cache","text":"<pre><code># Rebuild from scratch\nrm ~/.claude/projects/.../.ai-blame.ddb\n\n# Rerun command (will rebuild cache)\nai-blame stats\n</code></pre>"},{"location":"reference/performance/#advanced-understanding-cache-behavior","title":"Advanced: Understanding Cache Behavior","text":""},{"location":"reference/performance/#cache-metadata","title":"Cache Metadata","text":"<p>Cache stores:</p> <pre><code>.ai-blame.ddb\n\u251c\u2500\u2500 traces (parsed trace data)\n\u251c\u2500\u2500 messages (user/assistant exchanges)\n\u251c\u2500\u2500 tool_uses (file operations)\n\u251c\u2500\u2500 metadata (models, timestamps, session IDs)\n\u2514\u2500\u2500 file_edits (edit boundaries, attribution)\n</code></pre>"},{"location":"reference/performance/#cache-invalidation-details","title":"Cache Invalidation Details","text":"<p>Claude Code (all-or-nothing): - Subagent traces reference parent session - Caching tracks relationships - Any change \u2192 full rebuild</p> <p>Codex (per-file): - Traces are independent - Caching tracks per-file timestamps - Changed file \u2192 rebuild only that file</p>"},{"location":"reference/performance/#manual-cache-management","title":"Manual Cache Management","text":"<pre><code># List cache info\nls -lh ~/.claude/projects/.../.ai-blame.ddb\n\n# Check cache age\nstat ~/.claude/projects/.../.ai-blame.ddb\n\n# Force clean rebuild\nrm ~/.claude/projects/.../.ai-blame.ddb\nai-blame stats  # Rebuilds\n</code></pre>"},{"location":"reference/performance/#related-topics","title":"Related Topics","text":"<ul> <li>Trace Exploration \u2014 Commands that benefit from caching</li> <li>Provenance Annotation \u2014 Filtering strategies for annotation</li> <li>How It Works \u2014 Cache architecture details</li> </ul>"},{"location":"reference/performance/#summary-performance-checklist","title":"Summary: Performance Checklist","text":"Goal Technique Speed First run Use cache (auto) Seconds Subsequent runs Cache hit Milliseconds Multiple projects Per-directory cache Seconds each Large projects Use <code>--pattern</code> Fast Focused analysis Filter files + size Fast Automation Cache + scripts Milliseconds Troubleshooting <code>--rebuild-cache</code> Seconds Testing <code>--no-cache</code> Slow (but fresh)"},{"location":"reference/performance/#next-steps","title":"Next Steps","text":"<p>After optimizing:</p> <ol> <li>Explore: Use filters with Trace Exploration</li> <li>Annotate: Apply filters to Provenance Annotation</li> <li>Script: Use caching in automation workflows</li> </ol>"},{"location":"reference/setup/","title":"Setup &amp; Configuration","text":"<p>Getting <code>ai-blame</code> ready to track provenance in your project.</p>"},{"location":"reference/setup/#conceptual-model","title":"Conceptual Model","text":"<p>Setup is a one-time operation to initialize <code>ai-blame</code> for your project. The <code>init</code> command creates a configuration file (<code>.ai-blame.yaml</code>) that defines:</p> <ul> <li>Which output policy to use (sidecar, in-place, or comments)</li> <li>Which file types to process</li> <li>How to handle different formats (YAML, JSON, Python, etc.)</li> </ul> <p>Once configured, you can run other commands (<code>stats</code>, <code>blame</code>, <code>report</code>, <code>annotate</code>) without additional setup.</p>"},{"location":"reference/setup/#the-init-command","title":"The <code>init</code> Command","text":""},{"location":"reference/setup/#what-it-does","title":"What It Does","text":"<p>Creates a starter <code>.ai-blame.yaml</code> configuration file in your project directory. This file controls how <code>ai-blame</code> processes and annotates your files.</p>"},{"location":"reference/setup/#basic-usage","title":"Basic Usage","text":"<p>Simplest form (current directory):</p> <pre><code>ai-blame init\n</code></pre> <p>Creates <code>.ai-blame.yaml</code> in your current working directory with default settings (sidecar mode).</p>"},{"location":"reference/setup/#command-syntax","title":"Command Syntax","text":"<pre><code>ai-blame init [OPTIONS]\n</code></pre>"},{"location":"reference/setup/#options","title":"Options","text":"Option Short Default Description <code>--dir &lt;DIR&gt;</code> <code>-d</code> cwd Directory to write <code>.ai-blame.yaml</code> into <code>--flavor &lt;sidecar\\|in-place&gt;</code> <code>sidecar</code> Config template flavor <code>--force</code> False Overwrite an existing <code>.ai-blame.yaml</code>"},{"location":"reference/setup/#configuration-flavors","title":"Configuration Flavors","text":""},{"location":"reference/setup/#sidecar-mode-default","title":"Sidecar Mode (Default)","text":"<p>Best for: Projects where you want to minimize edits to existing files.</p> <pre><code>ai-blame init --flavor sidecar\n</code></pre> <p>What it does: Writes provenance to separate files named <code>&lt;filename&gt;.edit_history.yaml</code> for YAML files, <code>&lt;filename&gt;.edit_history.json</code> for JSON files, etc.</p> <p>Example: <pre><code>Before: disease_definitions.yaml\nAfter:  disease_definitions.yaml (unchanged)\n        disease_definitions.edit_history.yaml (NEW - sidecar)\n</code></pre></p> <p>Pros: - Non-invasive (original files untouched) - Works with any file type - Easy to review before committing</p> <p>Cons: - Creates additional files - Requires separate viewer to see history</p>"},{"location":"reference/setup/#in-place-mode","title":"In-Place Mode","text":"<p>Best for: Projects where you prefer history embedded directly in files.</p> <pre><code>ai-blame init --flavor in-place\n</code></pre> <p>What it does: Appends <code>edit_history</code> section directly to YAML/JSON files.</p> <p>Example YAML: <pre><code># Original content\nname: Disease Definitions\ndefinitions:\n  - name: Asthma\n    code: J45\n\n# Added by ai-blame\nedit_history:\n  - timestamp: 2025-12-01 08:03:42 UTC\n    model: claude-opus-4-5-20251101\n    agent: claude-code (v2.0.75)\n    action: CREATED\n</code></pre></p> <p>Pros: - All information in one file - Self-documenting - No extra files to manage</p> <p>Cons: - Modifies existing files - Only works for YAML/JSON - History embedded in data</p>"},{"location":"reference/setup/#configuration-file-structure","title":"Configuration File Structure","text":"<p>Once created, <code>.ai-blame.yaml</code> looks like this:</p> <pre><code># Output policy: how to write provenance\noutput:\n  # Sidecar mode: write to separate files\n  mode: sidecar\n\n  # File patterns to process\n  patterns:\n    - \"*.yaml\"\n    - \"*.json\"\n    - \"*.md\"\n\n  # Format-specific settings\n  formats:\n    yaml:\n      sidecar_suffix: .edit_history.yaml\n    json:\n      sidecar_suffix: .edit_history.json\n    python:\n      sidecar_suffix: .edit_history.txt\n\n# Filtering\nfilters:\n  # Only include edits larger than N characters\n  min_change_size: 0\n\n  # Skip intermediate edits (keep only first and last)\n  # initial_and_recent: true\n</code></pre>"},{"location":"reference/setup/#understanding-configuration-options","title":"Understanding Configuration Options","text":"<p><code>output.mode</code>: - <code>sidecar</code> \u2014 Write to separate <code>.edit_history.*</code> files - <code>in-place</code> \u2014 Append to YAML/JSON files directly</p> <p><code>output.patterns</code>: - List of glob patterns for files to process - Supports wildcards: <code>*.yaml</code>, <code>docs/**/*.md</code></p> <p><code>output.formats[format].sidecar_suffix</code>: - File extension for sidecar files - Example: <code>.edit_history.yaml</code> means <code>config.yaml</code> \u2192 <code>config.edit_history.yaml</code></p> <p><code>filters.min_change_size</code>: - Minimum number of characters changed to include an edit - Use to skip trivial edits (whitespace, single chars)</p>"},{"location":"reference/setup/#common-setup-scenarios","title":"Common Setup Scenarios","text":""},{"location":"reference/setup/#scenario-1-yaml-only-project","title":"Scenario 1: YAML-Only Project","text":"<p>You're tracking a YAML knowledge base (like LinkML schemas):</p> <pre><code># Initialize in sidecar mode (good for YAML)\nai-blame init\n\n# Edit .ai-blame.yaml to remove unwanted patterns\n# Keep only: *.yaml\n</code></pre> <p>Then run:</p> <pre><code>ai-blame stats\nai-blame blame schema.yaml\nai-blame report\n</code></pre>"},{"location":"reference/setup/#scenario-2-code-project-python","title":"Scenario 2: Code Project (Python)","text":"<p>You're tracking a Python project with comments:</p> <pre><code># Use in-place mode for code comments\nai-blame init --flavor in-place\n\n# Edit .ai-blame.yaml to include Python patterns\n# Add: *.py to patterns\n</code></pre> <p>Then run:</p> <pre><code>ai-blame report\nai-blame annotate --dry-run\n</code></pre>"},{"location":"reference/setup/#scenario-3-mixed-documentation-markdown-yaml","title":"Scenario 3: Mixed Documentation (Markdown + YAML)","text":"<p>You have docs in multiple formats:</p> <pre><code># Initialize with defaults\nai-blame init\n\n# Configuration already includes *.md, *.yaml, *.json\n# Just verify patterns in .ai-blame.yaml\n\nai-blame stats\nai-blame timeline\n</code></pre>"},{"location":"reference/setup/#scenario-4-different-project-different-home","title":"Scenario 4: Different Project, Different Home","text":"<pre><code># Initialize in a specific directory\nai-blame init --dir /path/to/other/project\n\n# Use that config when running commands\nai-blame report --dir /path/to/other/project\n</code></pre>"},{"location":"reference/setup/#workflow-setup-to-first-report","title":"Workflow Setup to First Report","text":"<p>Step 1: Initialize (2 minutes)</p> <pre><code>cd /path/to/your/project\nai-blame init\n</code></pre> <p>This creates <code>.ai-blame.yaml</code>.</p> <p>Step 2: Review (1 minute)</p> <pre><code>cat .ai-blame.yaml\n</code></pre> <p>Verify the patterns match your project structure. Edit if needed.</p> <p>Step 3: Verify Traces Exist (1 minute)</p> <pre><code>ai-blame stats\n</code></pre> <p>Shows available traces and number of edits found.</p> <p>Step 4: Preview Report (2 minutes)</p> <pre><code>ai-blame report\n</code></pre> <p>Shows what <code>ai-blame</code> would add to each file.</p> <p>Step 5: (Optional) Create Sidecar Files</p> <pre><code>ai-blame annotate --dry-run\n</code></pre> <p>Preview the actual changes.</p> <p>Step 6: (Optional) Apply</p> <pre><code>ai-blame annotate\n</code></pre> <p>Actually writes provenance to files.</p> <p>Total time: ~10 minutes</p>"},{"location":"reference/setup/#advanced-topics","title":"Advanced Topics","text":""},{"location":"reference/setup/#custom-config-location","title":"Custom Config Location","text":"<p>By default, <code>ai-blame</code> looks for <code>.ai-blame.yaml</code> in your project root. To use a different location:</p> <pre><code>ai-blame report --config /path/to/config.yaml\nai-blame annotate --config /path/to/config.yaml\n</code></pre>"},{"location":"reference/setup/#overwriting-existing-config","title":"Overwriting Existing Config","text":"<p>If <code>.ai-blame.yaml</code> already exists:</p> <pre><code># Without --force: skipped (no-op)\nai-blame init\n\n# With --force: overwrite\nai-blame init --force\n</code></pre> <p>Use <code>--force</code> to reset to defaults if your config got corrupted or outdated.</p>"},{"location":"reference/setup/#why-separate-ai-blameyaml","title":"Why Separate <code>.ai-blame.yaml</code>?","text":"<p>The configuration is kept separate from other project files because:</p> <ol> <li>Flexibility \u2014 Change output mode without re-running trace parsing</li> <li>Version control \u2014 Commit <code>.ai-blame.yaml</code> to track your preferences</li> <li>Sharing \u2014 Other team members can use the same config</li> <li>Non-invasive \u2014 Init doesn't modify your actual project files</li> </ol>"},{"location":"reference/setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"reference/setup/#ai-blame-init-did-nothing","title":"\"ai-blame init\" did nothing","text":"<p>This is normal behavior\u2014if <code>.ai-blame.yaml</code> already exists, <code>init</code> skips it to avoid overwrites. Use <code>--force</code> to recreate:</p> <pre><code>ai-blame init --force\n</code></pre>"},{"location":"reference/setup/#error-no-traces-found","title":"\"Error: no traces found\"","text":"<p>Setup is fine, but there are no Claude Code/Codex traces in the standard location. Check:</p> <pre><code># Verify trace directory location\nls ~/.claude/projects/\n\n# Or use explicit trace directory\nai-blame stats --trace-dir /explicit/path/to/traces\n</code></pre>"},{"location":"reference/setup/#config-doesnt-seem-to-apply","title":"Config doesn't seem to apply","text":"<p>Verify the path:</p> <pre><code># Check if .ai-blame.yaml exists and is readable\ncat .ai-blame.yaml\n\n# Commands use this config automatically (if in project root)\nai-blame report\n\n# Or specify explicitly\nai-blame report --config /path/to/.ai-blame.yaml\n</code></pre>"},{"location":"reference/setup/#related-topics","title":"Related Topics","text":"<ul> <li>Provenance Annotation \u2014 Next step after setup: using <code>report</code> and <code>annotate</code></li> <li>Configuration Guide \u2014 Deep dive into all config options</li> <li>File Types \u2014 How different file formats are handled</li> <li>CLI Reference: init \u2014 Complete syntax reference</li> </ul>"},{"location":"reference/setup/#next-steps","title":"Next Steps","text":"<p>Once <code>init</code> is complete, you're ready to:</p> <ol> <li>Explore traces: <code>ai-blame stats</code>, <code>ai-blame timeline</code>, <code>ai-blame transcript list</code></li> <li>Analyze blame: <code>ai-blame blame &lt;file&gt;</code></li> <li>Preview &amp; apply: <code>ai-blame report</code> \u2192 <code>ai-blame annotate</code></li> </ol> <p>Start with Trace Exploration to understand what traces are available.</p>"},{"location":"tutorials/getting-started/","title":"Getting Started","text":"<p>This tutorial walks you through using <code>ai-blame</code> to extract curation history from Claude Code traces and add it to your files.</p>"},{"location":"tutorials/getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>Rust (edition 2021) + Cargo</li> <li>Claude Code installed and used on a project</li> </ul>"},{"location":"tutorials/getting-started/#installation","title":"Installation","text":"<pre><code>git clone https://github.com/ai4curation/ai-blame\ncd ai-blame\n\ncargo build --release\ncargo install --path .\n</code></pre>"},{"location":"tutorials/getting-started/#step-1-check-your-traces","title":"Step 1: Check Your Traces","text":"<p>First, navigate to a project where you've used Claude Code:</p> <pre><code>cd /path/to/your/project\n</code></pre>"},{"location":"tutorials/getting-started/#step-15-create-a-starter-config-recommended","title":"Step 1.5: Create a starter config (recommended)","text":"<p>If your project doesn't already have a <code>.ai-blame.yaml</code>, generate a starter config:</p> <pre><code># Safe default: write provenance to sidecar files\nai-blame init --flavor sidecar\n\n# Or: prefer in-place annotations when possible (YAML/JSON append; code/docs comment blocks)\nai-blame init --flavor in-place\n</code></pre> <p>File writes</p> <p><code>ai-blame init</code> writes only <code>.ai-blame.yaml</code>. <code>ai-blame annotate</code> will write to project files unless you pass <code>--dry-run</code>.</p> <p>Then check what traces are available:</p> <pre><code>ai-blame stats\n</code></pre> <p>You should see output like:</p> <pre><code>Trace directory: /Users/you/.claude/projects/-Users-you-path-to-your-project\nTrace files: 12\n  Session traces: 8\n  Agent traces: 4\n\nFiles with edits (all files): 23\nTotal successful edits: 47\n</code></pre> <p>Where are traces stored?</p> <p>Claude Code stores execution traces in <code>~/.claude/projects/</code>. Each project has its own directory, named by encoding the project path (replacing <code>/</code> with <code>-</code>).</p>"},{"location":"tutorials/getting-started/#step-2-preview-changes-dry-run","title":"Step 2: Preview Changes (Dry Run)","text":"<p>Use <code>report</code> to preview what would happen without modifying files:</p> <pre><code>ai-blame report\n</code></pre> <p>This displays:</p> <ol> <li>A summary table of all files with edit history</li> <li>YAML previews of the <code>edit_history</code> that would be added</li> </ol> <pre><code>=== Summary ===\nFile                                               | Edits | First Edit           | Last Edit\n--------------------------------------------------|-------|----------------------|--------------------\nconfig.yaml                                        |     3 | 2025-12-01 08:03     | 2025-12-15 20:34\ndata/entities.json                                 |     5 | 2025-12-02 14:22     | 2025-12-14 11:15\n\n=== YAML Preview: config.yaml ===\nedit_history:\n- timestamp: '2025-12-01T08:03:42+00:00'\n  model: claude-opus-4-5-20251101\n  agent_tool: claude-code\n  agent_version: '2.0.75'\n  action: CREATED\n...\n\nNo files modified. Use `ai-blame annotate` to write annotations/sidecars.\n</code></pre>"},{"location":"tutorials/getting-started/#step-3-filter-the-results","title":"Step 3: Filter the Results","text":"<p>Often you'll want to reduce the verbosity. The <code>--initial-and-recent</code> flag keeps only the first and last edit per file:</p> <pre><code>ai-blame report --initial-and-recent\n</code></pre> <p>You can also filter by file pattern:</p> <pre><code># Only YAML files\nai-blame report --pattern \".yaml\"\n\n# Only files in a specific directory\nai-blame report --pattern \"kb/\"\n\n# A specific file\nai-blame report config.yaml\n</code></pre>"},{"location":"tutorials/getting-started/#step-4-apply-changes","title":"Step 4: Apply Changes","text":"<p>Once you're happy with the preview, apply the changes:</p> <pre><code>ai-blame annotate --initial-and-recent\n</code></pre> <p>Output:</p> <pre><code>Scanning traces in: /Users/you/.claude/projects/-Users-you-path-to-project\nUsing config: .ai-blame.yaml\n\n=== Summary ===\n...\n\nApplying changes...\n  Updated: config.yaml\n  Updated: data/entities.json\n</code></pre>"},{"location":"tutorials/getting-started/#step-5-verify-the-results","title":"Step 5: Verify the Results","text":"<p>Open one of the modified files. You should see a new <code>edit_history</code> section at the end:</p> <pre><code># config.yaml\nname: my-project\nversion: 1.0.0\n\nedit_history:\n  - timestamp: \"2025-12-01T08:03:42+00:00\"\n    model: claude-opus-4-5-20251101\n    agent_tool: claude-code\n    agent_version: \"2.0.75\"\n    action: CREATED\n  - timestamp: \"2025-12-15T20:34:29+00:00\"\n    model: claude-opus-4-5-20251101\n    agent_tool: claude-code\n    agent_version: \"2.1.0\"\n    action: EDITED\n</code></pre>"},{"location":"tutorials/getting-started/#bonus-explore-your-sessions","title":"Bonus: Explore Your Sessions","text":"<p>Before annotating, you can review the sessions and interactions that created the edits:</p> <pre><code># List all sessions with models used\nai-blame transcript list --columns SATMO\n\n# View a specific session (shows all messages and tool use)\nai-blame transcript view &lt;session-id&gt;\n\n# Export a session as markdown for documentation\nai-blame transcript view &lt;session-id&gt; --format markdown &gt; session-notes.md\n</code></pre> <p>This is useful for understanding the context behind edits and learning how the AI approached the task. See Transcripts &amp; Subagents for more details.</p>"},{"location":"tutorials/getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Learn how to configure output policies for different file types</li> <li>Explore transcripts and subagents to understand multi-agent sessions</li> <li>Understand the CLI reference for all available options and commands</li> <li>Read about how the extraction works</li> <li>Check the FAQs for answers to common questions</li> </ul>"},{"location":"tutorials/python-api/","title":"Python API","text":"<p>Warning</p> <p>The Rust version of ai-blame does not provide a Python API. It is a CLI-only tool distributed via PyPI for easy installation.</p>"},{"location":"tutorials/python-api/#installation","title":"Installation","text":"<p>The Rust version can be installed using Python package managers:</p> <pre><code># Using pip\npip install ai-blame\n\n# Using uv\nuv add --dev ai-blame\n\n# Using pipx (global install)\npipx install ai-blame\n</code></pre> <p>This installs the <code>ai-blame</code> CLI binary. No Rust toolchain required!</p>"},{"location":"tutorials/python-api/#using-the-cli-from-python","title":"Using the CLI from Python","text":"<p>If you need to use ai-blame from Python scripts, you can call the CLI using subprocess:</p> <pre><code>import subprocess\nimport json\nfrom pathlib import Path\n\n# Run ai-blame report and capture JSON output\nresult = subprocess.run(\n    [\"ai-blame\", \"report\", \"--format\", \"json\"],\n    cwd=\"/path/to/project\",\n    capture_output=True,\n    text=True,\n    check=True\n)\n\n# Parse the output\nreport = json.loads(result.stdout)\nfor file_info in report:\n    print(f\"{file_info['path']}: {len(file_info['edits'])} edits\")\n</code></pre>"},{"location":"tutorials/python-api/#running-other-commands","title":"Running Other Commands","text":"<pre><code>import subprocess\n\n# Run annotate with error handling\ntry:\n    subprocess.run(\n        [\"ai-blame\", \"annotate\", \"--dry-run\", \"--pattern\", \"*.py\"],\n        cwd=\"/path/to/project\",\n        check=True\n    )\nexcept subprocess.CalledProcessError as e:\n    print(f\"ai-blame command failed with exit code {e.returncode}\")\n    # Handle the error appropriately\n\n# Run blame on a specific file\ntry:\n    result = subprocess.run(\n        [\"ai-blame\", \"blame\", \"myfile.py\", \"--blocks\"],\n        cwd=\"/path/to/project\",\n        capture_output=True,\n        text=True,\n        check=True\n    )\n    print(result.stdout)\nexcept subprocess.CalledProcessError as e:\n    print(f\"Command failed: {e.stderr}\")\nexcept FileNotFoundError:\n    print(\"ai-blame not found. Make sure it's installed: pip install ai-blame\")\n</code></pre>"},{"location":"tutorials/python-api/#need-a-python-api","title":"Need a Python API?","text":"<p>If you have a use case that requires a proper Python API (beyond calling the CLI), please open an issue describing your needs. We can consider adding PyO3 bindings if there's sufficient demand.</p>"},{"location":"tutorials/python-api/#python-version-deprecated","title":"Python Version (Deprecated)","text":"<p>The original Python implementation with a Python API is at <code>ai4curation/ai-blame</code>. See the migration guide for more information.</p>"},{"location":"tutorials/python-api/#old-python-api-for-reference","title":"Old Python API (for reference)","text":"<p>This API is from the deprecated Python version and is not available in the Rust version:</p> <pre><code># This ONLY works with the old Python version\nfrom pathlib import Path\nfrom ai_blame.extractor import extract_edit_history, convert_to_file_histories\nfrom ai_blame.models import FilterConfig\n\n# Define the trace directory (or use default)\ntrace_dir = Path.home() / \".claude\" / \"projects\" / \"-Users-you-my-project\"\n\n# Extract all edits\nconfig = FilterConfig()\nedits_by_file = extract_edit_history(trace_dir, config)\n\n# See what files were edited\nfor file_path, edits in edits_by_file.items():\n    print(f\"{file_path}: {len(edits)} edits\")\n</code></pre>"},{"location":"tutorials/quickstart/","title":"Quickstart Guide","text":"<p>Get started with <code>ai-blame</code> in 5 minutes. This guide covers the most common tasks.</p>"},{"location":"tutorials/quickstart/#installation","title":"Installation","text":"<pre><code>git clone https://github.com/ai4curation/ai-blame\ncd ai-blame\ncargo build --release\ncargo install --path .\n</code></pre>"},{"location":"tutorials/quickstart/#quick-commands","title":"Quick Commands","text":""},{"location":"tutorials/quickstart/#1-check-your-traces","title":"1\ufe0f\u20e3 Check Your Traces","text":"<pre><code>cd /path/to/your/project\nai-blame stats\n</code></pre> <p>Shows how many traces and edits are available.</p>"},{"location":"tutorials/quickstart/#2-see-what-changed","title":"2\ufe0f\u20e3 See What Changed","text":"<pre><code># Timeline of all changes\nai-blame timeline\n\n# Line-by-line blame for a file\nai-blame blame src/main.rs\n\n# Group lines by model\nai-blame blame src/main.rs --blocks\n</code></pre>"},{"location":"tutorials/quickstart/#3-explore-sessions","title":"3\ufe0f\u20e3 Explore Sessions","text":"<pre><code># List all sessions\nai-blame transcript list\n\n# Show models used in each session\nai-blame transcript list --columns SATMO\n\n# View a specific session\nai-blame transcript view &lt;session-id&gt; --full\n</code></pre>"},{"location":"tutorials/quickstart/#4-add-provenance-to-files","title":"4\ufe0f\u20e3 Add Provenance to Files","text":"<pre><code># Initialize config\nai-blame init\n\n# Preview what will be added\nai-blame report --initial-and-recent\n\n# Apply changes to files\nai-blame annotate --initial-and-recent\n</code></pre>"},{"location":"tutorials/quickstart/#common-patterns","title":"Common Patterns","text":""},{"location":"tutorials/quickstart/#filter-by-file-type","title":"Filter by File Type","text":"<pre><code># Only YAML files\nai-blame report --pattern \".yaml\"\n\n# Only files in docs/\nai-blame report --pattern \"docs/\"\n</code></pre>"},{"location":"tutorials/quickstart/#export-for-documentation","title":"Export for Documentation","text":"<pre><code># Export a session as markdown\nai-blame transcript view &lt;session-id&gt; --format markdown &gt; session.md\n\n# See the full conversation\nai-blame transcript view &lt;session-id&gt; --full --show-thinking\n</code></pre>"},{"location":"tutorials/quickstart/#view-specific-file-changes","title":"View Specific File Changes","text":"<pre><code># Blame a specific file\nai-blame blame config.yaml\n\n# Report for a specific file\nai-blame report config.yaml\n</code></pre>"},{"location":"tutorials/quickstart/#understanding-session-ids","title":"Understanding Session IDs","text":"<p>You may see the same Session ID appear multiple times in <code>transcript list</code>. This is normal\u2014it means Claude Code spawned subagents (Explore, Task, Plan agents) that share the same parent session. Each row is a different trace file.</p> <p>Use <code>--columns SATMO</code> to see which models were used in each trace file. This helps distinguish parent sessions from subagent sessions.</p>"},{"location":"tutorials/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Full tutorial: Getting Started</li> <li>All commands: CLI Reference</li> <li>Understand sessions: Transcripts &amp; Subagents</li> <li>Configure output: Configuration</li> <li>Questions? FAQs</li> </ul>"},{"location":"tutorials/quickstart/#tips-tricks","title":"Tips &amp; Tricks","text":"Task Command Dry run (preview only) <code>ai-blame report</code> Keep only first/last edit <code>--initial-and-recent</code> Show file blame details <code>ai-blame blame &lt;file&gt;</code> Group blame by model <code>ai-blame blame &lt;file&gt; --blocks</code> List all sessions <code>ai-blame transcript list -n 0</code> Export session <code>ai-blame transcript view &lt;id&gt; --format markdown</code> See blame at line X <code>ai-blame blame &lt;file&gt; --lines X-X</code>"}]}